define("models/api",function(t,e,n){var i,s,f=t("nmc/main/model"),m=t("$"),g=function(){},c=t("appUtil"),v=t("dataManager"),o=t("lib/uid-creator"),b=t("nmc/insight/blames"),a=t("insight"),y=t("lib/api-context-cache"),w=a.register("capi-request-error",{level:a.EventLevel.Error}),r=t("util"),l=t("nmcConfig"),d=t("fetch-event-source"),C=function(t){return m.param(t)},I=(i={},function(t,n){return function(){var e=n.apply(null,arguments);return i[e]?i[e].then(function(t){return c.clone(t)}):(i[e]=t.apply(this,arguments),i[e].then(function(t){return delete i[e],t},function(t){throw delete i[e],t}))}}),x=(s={},function(t,e,n){var i,o=m.param(t);if(s[e.cacheTag]||(s[e.cacheTag]={}),e.success==g&&e.fail==g&&e.cache){if(e.flush){for(var a in s[e.cacheTag])clearTimeout(s[e.cacheTag][a].timer);s[e.cacheTag]={}}(t=s[e.cacheTag][o])?i=Promise.resolve(c.clone(t.data)):(i=n()).then(function(t){u(o,t,e)})}else i=n(),s[e.cacheTag][o]&&i.then(function(t){u(o,t,e)});return i});function u(t,e,n){var i=s[n.cacheTag],o=i[t];o&&clearTimeout(o.timer);var a=setTimeout(function(){o&&(clearTimeout(o.timer),delete i[t])},6e4*n.expire);i[t]={data:c.clone(e),timer:a,timeStamp:Date.now(),expire:n.expire}}function p(r,t){var e=function(t){try{var e=t.cmd||"",n=t.serviceType||"";return"string"==typeof n&&n?"string"==typeof e&&e?30<n.length?{isLegal:!1,illegalInfo:"The length of the 'serviceType' parameter cannot exceed 30"}:80<e.length?{isLegal:!1,illegalInfo:"The length of the 'cmd' parameter cannot exceed 80"}:/^[a-z][a-z0-9\-]+$/i.test(n)?/^[a-z][a-z0-9\.]+$/i.test(e)?{isLegal:!0}:{isLegal:!1,illegalInfo:"The 'cmd' parameter may contain invalid characters"}:{isLegal:!1,illegalInfo:"The 'serviceType' parameter may contain invalid characters"}:{isLegal:!1,illegalInfo:"The 'cmd' argument must be of type string and invalid"}:{isLegal:!1,illegalInfo:"The 'serviceType' argument must be of type string and invalid"}}catch(i){return{isLegal:!0}}}(r);if(!e.isLegal){var n=["云 api 无效请求："+e.illegalInfo,"  cmd: "+(r.cmd||"(无)"),"  serviceType: "+(r.serviceType||"(无)")];return console.warn(n.join("\n")),void w.push({action:r.cmd||"",service:r.serviceType||"",message:"Invalid request: "+e.illegalInfo})}var l=o.create();k(Object.assign({},r,{id:l,status:"pending"}));var d=new Error("平台云 API 请求 ("+r.serviceType+"."+r.cmd+")");t=t||{};var u=m.extend({success:g,fail:g,name:"delegateCApi",data:r,cache:!1,cacheTag:"",flush:!1,expire:5,combine:!0,secure:!1},t),p=u.success,h=u.fail;return x(r,u,function(){return function(t,e,n){return e.success==g&&e.fail==g&&e.combine?I(n,C).apply(this,arguments):n()}(r,u,function(){return new Promise(function(e,n){var i,o=function(t){p.call(this,t),k({id:l,status:"success",response:t.data}),e(t)},a=function(t){h.apply(this,arguments),k({id:l,status:"error",response:t&&t.data&&t.data.data}),y.set([t.msg,t.data&&t.data.message],t),n(t)},t=b.findBlame({path:location.pathname}),s={},c=u.highCapacity;c?(i="//"+window.QCHC_HOST+"/_api/"+r.serviceType+"/"+r.cmd,u.crossDomain=!0):(s.cmd=r.cmd,s.action="delegate",s.serviceType=r.serviceType,i="/capi"),u.secure&&(s.secure=1),u.version&&(s.version=u.version),u.json&&(s.json=1),t&&t.dictId&&(s.dictId=t.dictId),$(s,u),v.getAllWhiteList(function(t){u.secure&&t.CONSOLE_STS_WHITE&&t.CONSOLE_STS_WHITE.length&&(s.sts=1),m.isEmptyObject(s)||(i+="?"+m.param(s)),new f({delegateCApi:{url:i,method:"post"}},c?null:"/cgi").request(m.extend({},u,{success:o,fail:a,trace:d}))})})})})}function k(t){try{window.postMessage({type:"platform-capi-call",payload:t},window.origin||location.protocol+"//"+location.hostname)}catch(e){console.warn("Cannot postMessage() for platform-api-call: ",e)}}function $(t,e){e.withClientIP&&(t.withClientIP=1),e.withClientUA&&(t.withClientUA=1),e.withLanguage&&(t.withLanguage=1),e.enableZip&&(t.enableZip=1),e.traceId&&/^(\w{8}(-\w{4}){3}-\w{12}?)$/.test(e.traceId)&&(t.traceId=e.traceId)}function h(t,e){m.extend(t,{serviceType:Array.isArray(e)?undefined:e.serviceType,cmd:Array.isArray(e)?undefined:e.cmd,t:Date.now(),uin:r.getUin(),ownerUin:r.getOwnerUin()||0,csrfCode:r.getACSRFToken()}),l.additionalUrlParam&&m.extend(t,l.additionalUrlParam(e,"post"))}n.exports={req:p,request:p,prepareSSERequest:function(t,e){var n={};return $(n,e=e||{}),h(n,t),e="//"+window.QCHC_HOST+"/_api-stream/"+t.serviceType+"/"+t.cmd,m.isEmptyObject(n)||(e+="?"+m.param(n)),{url:e,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}},batchRequest:function(t,e){e=e||{};for(var n=[],i=[],o=[],a=new Array(t.length).fill(!1),s=0;s<t.length;s++)n.push(new Promise(function(t,e){i.push(t),o.push(e)}));var c={};return $(c,e),h(c,t),e.withRequest&&(c.withRequest=1),e="//"+window.QCHC_HOST+"/_api-batch",m.isEmptyObject(c)||(e+="?"+m.param(c)),d.fetchEventSource(e,{body:JSON.stringify(t),method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",credentials:"include",onmessage:function(t){t=JSON.parse(t.data);if(t.code)throw t;t=JSON.parse(t.data);a[t.index]=!0,i[t.index](t)},onerror:function(n){throw o.forEach(function(t,e){a[e]||t(n)}),n}})["catch"](g),n},duplicatePromiseCombine:I}}),define("models/capi",function(t,e,n){t=t("nmc/main/model");n.exports=new t({querySecretId:{url:"/capi?action=querySecretId",method:"get"},applySecretId:{url:"/capi?action=applySecretId",method:"post"},deleteSecretId:{url:"/capi?action=deleteSecretId",method:"post"},disableSecretId:{url:"/capi?action=disableSecretId",method:"post"},enableSecretId:{url:"/capi?action=enableSecretId",method:"post"},queryKeyReq:{url:"/capi?action=queryKeyReq",method:"get"},batchQueryKeyReq:{url:"/capi?action=batchQueryKeyReq",method:"get"},querySecretProjectReq:{url:"/capi?action=querySecretProjectReq",method:"get"},applyKeyReq:{url:"/capi?action=applyKeyReq",method:"post"},enableKeyReq:{url:"/capi?action=enableKeyReq",method:"post"},disableKeyReq:{url:"/capi?action=disableKeyReq",method:"post"},deleteKeyReq:{url:"/capi?action=deleteKeyReq",method:"post"}},"/cgi")}),define("models/dao_config",function(t,e,n){var i,o={checkLogin:{url:"/login?action=checkLogin",method:"get"},quitLogin:{url:"/login?action=quitLogin",method:"get"},queryRegion:{url:"/com?action=queryRegion",method:"get"},queryCorpRedirect:{url:"/com?action=queryCorpRedirect",method:"get"},queryWhiteList:{url:"/com?action=getWhiteList",method:"post"},getUserData:{url:"/com?action=getUserData",method:"post"},queryOs:{url:"/cvm?action=queryOS",method:"get"},queryCdnMenu:{url:"/com?action=queryCdnMenu",method:"get"},queryYunsoMenu:{url:"/com?action=queryYunsoMenu",method:"get"},queryWenzhiMenu:{url:"/com?action=queryWenzhiMenu",method:"get"},queryMonitorMenu:{url:"/com?action=queryMonitorMenu",method:"get"},queryCpayMenu:{url:"/com?action=queryCpayMenu",method:"get"},getUserIsSeeGuidelines:{url:"/com?action=getUserIsSeeGuidelines",method:"get"},setUserIsSeeGuidelines:{url:"/com?action=setUserIsSeeGuidelines",method:"post"},getUserGuideData:{url:"/com?action=getUserGuideData",method:"get"},setUserGuideData:{url:"/com?action=setUserGuideData",method:"post"},getMsgList:{url:"/message?action=getMsgList",method:"get"},getTicketNum:{url:"/com?action=getTicketNum",method:"get"},getVouchersNum:{url:"/com?action=getVouchersNum",method:"get"},queryChannelV2:{url:"/com?action=queryChannelV2",method:"get"},getConsoleProductVideoUrls:{url:"/com?action=getConsoleProductVideoUrls",method:"get"},getGrantAndUserPermissionInfo:{url:"/com?action=getGrantAndUserPermissionInfo",method:"get"},getCVMNotice:{url:"/cvm?action=getNotice",method:"get"},payByCartCvm:{url:"/cvm?action=payByCartCvm",method:"post"},getCvmList:{url:"/cvm?action=getCvmList",method:"get"},getCvmMore:{url:"/cvm?action=getCvmMore",method:"get"},getFlowCscResult:{url:"/com?action=getFlowCscResult",method:"get"},rebootCvm:{url:"/cvm?action=rebootCvm",method:"post"},cvmAction:{url:"/cvm?action=cvmAction",method:"post"},modifyCvmAliasBatch:{url:"/cvm?action=modifyCvmAliasBatch",method:"post"},resetCvmSystem:{url:"/cvm?action=resetCvmSystem",method:"post"},switchCvmSystem:{url:"/cvm?action=switchCvmSystem",method:"post"},getQuotiesChargeItem:{url:"/cvm?action=getQuotiesChargeItem",method:"post"},resetCvmPasswd:{url:"/cvm?action=resetCvmPasswd",method:"post"},formatCvmDisk:{url:"/cvm?action=formatCvmDisk",method:"post"},getBandwidthHistory:{url:"/cvm?action=getBandwidthHistory",method:"get"},getPrice:{url:"/cvm?action=getPrice",method:"post"},getPriceForHour:{url:"/cvm?action=getPriceForHour",method:"get"},getBandwidthReturnFittingPrice:{url:"/cvm?action=getBandwidthReturnFittingPrice",method:"get"},upgradeHourCvm:{url:"/cvm?action=upgradeHourCvm",method:"post"},upgradeHourCvmBandwidth:{url:"/cvm?action=upgradeHourCvmBandwidth",method:"post"},returnCvm:{url:"/cvm?action=returnCvm",method:"post"},canPrepaidReturn:{url:"/cvm?action=getReturnResourcesPrice",method:"post"},verifyCode:{url:"/cvm?action=verifyCode",method:"post"},destroyCvm:{url:"/cvm?action=destroyCvm",method:"post"},destroyCvmAndCdhCvm:{url:"/cvm?action=destroyCvmAndCdhCvm",method:"post"},restoreCdhCvm:{url:"/cdh?action=restoreCdhCvm",method:"post"},returnCvmInTime:{url:"/cdh?action=returnCvmInTime",method:"get"},getCdhChartData:{url:"/cdh?action=getCdhChartData",method:"get"},getCdhMonitorChartData:{url:"/cdh?action=getCdhMonitorChartData",method:"get"},getStatisticsGridData:{url:"/cdh?action=getStatisticsGridData",method:"get"},getCdhChartDataBatch:{url:"/cdh?action=getCdhChartDataBatch",method:"get"},getRealTimeCdhData:{url:"/cdh?action=getRealTimeCdhData",method:"get"},upgradeXenToKvm:{url:"/cvm?action=upgradeXenToKvm",method:"post"},getImageCategories:{url:"/cvm?action=getImageCategories",method:"get"},getMarketWhiteList:{url:"/cvm?action=getMarketWhiteList",method:"get"},checkResetSys:{url:"/cvm?action=checkResetSys",method:"get"},getImageProductsDetail:{url:"/cvm?action=getImageProductsDetail",method:"get"},getImagesDetail:{url:"/cvm?action=getImagesDetail",method:"get"},setBandwidthLimit:{url:"/cvm?action=setBandwidth",method:"post"},setBandwidthLimitForFlow:{url:"/cvm?action=setBandwidthLimitForFlow",method:"post"},changeProject:{url:"/cvm?action=changeProject",method:"post"},setRenewFlag:{url:"/cvm?action=setRenewFlag",method:"post"},queryKeypair:{url:"/sshkey?action=queryKeypair",method:"get"},createKeypair:{url:"/sshkey?action=createKeypair",method:"post"},loadKeypair:{url:"/sshkey?action=loadKeypair",method:"post"},modifyKeypair:{url:"/sshkey?action=modifyKeypair",method:"post"},deleteKeypair:{url:"/sshkey?action=deleteKeypair",method:"post"},manageCvmKey:{url:"/sshkey?action=manageCvmKey",method:"post"},detailKeypair:{url:"/sshkey?action=detailKeypair",method:"get"},loadChartData:{url:"/cvm?action=loadChartData",method:"get"},getMonitorAgent:{url:"/cvm?action=getMonitorAgent",method:"get"},queryKeyByIps:{url:"/cvm?action=queryKeyByIps",method:"get"},queryCvmOpLogs:{url:"/cvm?action=queryCvmOpLogs",method:"get"},getServiceAccount:{url:"/com?action=getServiceAccount",method:"get"},getAccounts:{url:"/com?action=getAccounts",method:"get"},createCvmImage:{url:"/image?action=createCvmImage",method:"post"},queryImages:{url:"/image?action=getCvmImageInfo",method:"get"},delImages:{url:"/image?action=deleteCvmImage",method:"post"},modImage:{url:"/image?action=modifyCvmImageInfo",method:"post"},queryCbsList:{url:"/cbs?action=getCbsList",method:"get"},modifyCbsAlias:{url:"/cbs?action=modifyCbsAlias",method:"post"},setCbsAutoRenewFlag:{url:"/cbs?action=setCbsAutoRenewFlag",method:"post"},getDashboardBase:{url:"/dashboard?action=getDashboardBase",method:"get"},getAppMonitor:{url:"/dashboard?action=getAppMonitor",method:"get"},getAppSecurity:{url:"/dashboard?action=getAppSecurity",method:"get"},getNetworkFlow:{url:"/dashboard?action=getNetworkFlow",method:"get"},getMargin:{url:"/dashboard?action=getMargin",method:"get"},getServicesInfo:{url:"/dashboard?action=getServicesInfo",method:"get"},getExpireNum:{url:"/dashboard?action=getExpireNum",method:"get"},getNotice:{url:"/dashboard?action=getNotice",method:"get"},getVpcList:{url:"/vpc?action=getVpcList",method:"get"},getVpcRegionWhiteList:{url:"/vpc?action=getVpcRegionWhiteList",method:"get"},getVpcView:{url:"/vpc?action=getVpcView",method:"get"},addVpc:{url:"/vpc?action=addVpc",method:"post"},delVpc:{url:"/vpc?action=delVpc",method:"post"},modifyVpcProperty:{url:"/vpc?action=modifyVPCProperty",method:"post"},modifyVPCSubnetRouteTable:{url:"/vpc?action=modifyVPCSubnetRouteTable",method:"post"},getVpcDeviceCount:{url:"/vpc?action=getVpcDeviceCount",method:"get"},getSubnetInfo:{url:"/subnet?action=getSubnetInfo",method:"get"},addSubnet:{url:"/subnet?action=addSubnet",method:"post"},queryZone:{url:"/subnet?action=queryZone",method:"get"},getVpcZoneWhiteList:{url:"/vpc?action=getVpcZoneWhiteList",method:"get"},modifySubnet:{url:"/subnet?action=modifySubnet",method:"post"},deleteSubnet:{url:"/subnet?action=deleteSubnet",method:"post"},getVPCGatewayList:{url:"/route?action=getVPCGatewayList",method:"get"},getVPCRouteTable:{url:"/route?action=getVPCRouteTable",method:"get"},addVPCRouteTable:{url:"/route?action=addVPCRouteTable",method:"post"},modifyVPCRouteTable:{url:"/route?action=modifyVPCRouteTable",method:"post"},deleteVPCRouteTable:{url:"/route?action=deleteVPCRouteTable",method:"post"},getVpnGw:{url:"/vpc?action=getVpnGw",method:"get"},initVpnGw:{url:"/vpc?action=initVpnGw",method:"post"},clearVpnGw:{url:"/vpc?action=clearVpnGw",method:"post"},clearSslVpn:{url:"/sslvpn?action=clearSslVpn",method:"post"},getVpnGwQuota:{url:"/vpc?action=getVpnGwQuota",method:"get"},addVpnGw:{url:"/vpc?action=addVpnGw",method:"post"},addUserGw:{url:"/vpc?action=addUserGw",method:"post"},addVpnConn:{url:"/vpc?action=addVpnConn",method:"post"},getUserGwProperty:{url:"/vpc?action=getUserGwProperty",method:"get"},getVpnConnProperty:{url:"/vpc?action=getVpnConnProperty",method:"get"},getVpnStuff:{url:"/vpc?action=getVpnStuff",method:"get"},modifyVpnGw:{url:"/vpc?action=modifyVpnGw",method:"post"},delUserGw:{url:"/vpc?action=delUserGw",method:"post"},modifyUserGw:{url:"/vpc?action=modifyUserGw",method:"post"},modifyVpnConn:{url:"/vpc?action=modifyVpnConn",method:"post"},delVpnConn:{url:"/vpc?action=delVpnConn",method:"post"},getVpnPrice:{url:"/vpc?action=getVpnPrice",method:"post"},payByCart:{url:"/vpc?action=payByCart",method:"post"},getDealsByCond:{url:"/vpc?action=getDealsByCond",method:"post"},getUserGwVendor:{url:"/vpc?action=getUserGwVendor",method:"get"},loadVpnChartData:{url:"/vpc?action=loadVpnChartData",method:"get"},getOperatelogList:{url:"/operatelog?action=getOperatelogList",method:"get"},getVpcTopo:{url:"/vpctopo?action=getVpcTopo",method:"get"},getVpcTopoExternal:{url:"/vpctopo?action=getVpcTopoExternal",method:"get"},getGwStatusList:{url:"/vpctopo?action=getGwStatusList",method:"get"},getVpnGwStatusList:{url:"/vpctopo?action=getVpnGwStatusList",method:"get"},getVpnConnStatusList:{url:"/vpctopo?action=getVpnConnStatusList",method:"get"},getVpcStatisticList:{url:"/vpc?action=getVpcStatisticList",method:"get"},getVpcSubnetStatisticList:{url:"/vpc?action=getVpcSubnetStatisticList",method:"get"},updateCvm:{url:"/vpc?action=updateCvm",method:"post"},getVpcExternalStatistic:{url:"/vpc?action=getVpcExternalStatistic",method:"get"},getVpcSubnetIpCounts:{url:"/vpc?action=getVpcSubnetIpCounts",method:"get"},getVpcRtbStatisticList:{url:"/vpc?action=getVpcRtbStatisticList",method:"get"},getVpcVpnGwStatisticList:{url:"/vpc?action=getVpcVpnGwStatisticList",method:"get"},getVpcVpnGwStatisticListEx:{url:"/vpc?action=getVpcVpnGwStatisticListEx",method:"get"},getVpcVpnConnStatisticList:{url:"/vpc?action=getVpcVpnConnStatisticList",method:"get"},getVpcUserGwStatisticList:{url:"/vpc?action=getVpcUserGwStatisticList",method:"get"},delegateCApi:{url:"/capi?action=delegate",method:"post"},queryConfigureProducts:{url:"/datacfg?action=queryConfigureProducts",method:"get"},updateUserDefined:{url:"/datacfg?action=updateUserDefined",method:"post"},queryConfigureCodeData:{url:"/datacfg?action=queryConfigureCodeData",method:"post"},getSslVpnStatisticListEx:{url:"/sslvpn?action=getSslVpnStatisticListEx",method:"get"},getVpcVpnUsedList:{url:"/sslvpn?action=getVpcVpnUsedList",method:"get"},getDeveloperAccountList:{url:"/com?action=getDeveloperAccountList",method:"get"},switchDeveloperAccount:{url:"/com?action=switchDeveloperAccount",method:"post"},resetCpmPasswd:{url:"/cpm?action=resetCpmPasswd",method:"post"},getVpcBmVpnGwList:{url:"/vpcbm?action=getVpcBmVpnGwList",method:"get"},getPriceBm:{url:"/cpm?action=getPrice",method:"post"},generateDeals:{url:"/vpcbm?action=generateDeals",method:"post"},getGroupList:{url:"/com?action=getGroupList",method:"get"},ping:{url:"/com?action=ping",method:"get"},reportTranslate:{url:"/com?action=reportTranslate",method:"post"},hideNewSidebarTip:{url:"/datacfg?action=hideNewSidebarTip",method:"get"},useOldSidebar:{url:"/datacfg?action=useOldSidebar",method:"get"},useNewSidebar:{url:"/datacfg?action=useNewSidebar",method:"get"}};for(i in"/cgi",o){var a=o[i];a&&a.url&&(a.url="/cgi"+a.url)}var s={get:function(t){return o[t]}};n.exports=s}),define("models/directconnect",function(t,e,n){t=new(t("nmc/main/model"))({getDCInfo:{url:"/dc?action=getDCInfo",method:"get"},applyDC:{url:"/dc?action=applyDC",method:"post"},getARList:{url:"/dc?action=getARList",method:"get"},updateDCInfo:{url:"/dc?action=updateDCInfo",method:"post"},updateApplyStatus:{url:"/dc?action=updateApplyStatus",method:"post"},updateDCApplyInfo:{url:"/dc?action=updateDCApplyInfo",method:"post"},getApplyInfo:{url:"/dc?action=getApplyInfo",method:"get"},deleteDCApply:{url:"/dc?action=deleteDCApply",method:"post"},getVIFInfo:{url:"/dc?action=getVIFInfo",method:"get"},checkIsEnterprise:{url:"/dc?action=checkIsEnterprise",method:"post"},createVIF:{url:"/dc?action=createVIF",method:"post"},updateVIFInfo:{url:"/dc?action=updateVIFInfo",method:"post"},deleteVIF:{url:"/dc?action=deleteVIF",method:"post"},getVPCVIFNum:{url:"/dc?action=getVPCVIFNum",method:"get"},updateDeal:{url:"/dc?action=updateDeal",method:"post"},updatePayStatus:{url:"/dc?action=updatePayStatus",method:"post"},getPrice:{url:"/trade?action=getPrice",method:"post"},payByCart:{url:"/trade?action=payByCart",method:"post"},getDealsByCond:{url:"/trade?action=getDealsByCond",method:"post"},approveVIF:{url:"/dc?action=approveVIF",method:"post"},describeDirectConnectGateway:{url:"/dc?action=describeDirectConnectGateway",method:"get"},createDirectConnectGateway:{url:"/dc?action=createDirectConnectGateway",method:"post"},deleteDirectConnectGateway:{url:"/dc?action=deleteDirectConnectGateway",method:"post"},getChartData:{url:"/dc?action=getChartData",method:"get"}},"/cgi");n.exports=t}),define("models/eip",function(t,e,n){t=t("nmc/main/model");n.exports=new t({queryEipList:{url:"/cgi/eip?action=queryEipList",method:"get"},queryEipQuota:{url:"/cgi/eip?action=queryEipQuota",method:"get"},createEip:{url:"/cgi/eip?action=createEip",method:"post"},bindEip:{url:"/cgi/eip?action=bindEip",method:"post"},unBindEip:{url:"/cgi/eip?action=unBindEip",method:"post"},updateEip:{url:"/cgi/eip?action=updateEip",method:"post"},deleteEip:{url:"/cgi/eip?action=deleteEip",method:"post"},wipToEip:{url:"/cgi/eip?action=wipToEip",method:"post"},queryCvmList:{url:"/cgi/eip?action=queryCvmList",method:"get"},exportEipList:{url:"/cgi/eip?action=exportEipList",method:"get"},getEipFlowCscResult:{url:"/cgi/eip?action=getEipFlowCscResult",method:"get"}})}),define("models/firewall",function(t,e,n){t=t("nmc/main/model");n.exports=new t({getUSGFromProject:{url:"/firewall?action=getUSGFromProject",method:"get"},createUSG:{url:"/firewall?action=createUSG",method:"post"},getVMFromUSG:{url:"/firewall?action=getVMFromUSG",method:"get"},getUSGFromVM:{url:"/firewall?action=getUSGFromVM",method:"get"},getAvailableVM:{url:"/firewall?action=getAvailableVM",method:"get"},modifyVMOfUSG:{url:"/firewall?action=modifyVMOfUSG",method:"post"},modifyUSGInfo:{url:"/firewall?action=modifyUSGInfo",method:"post"},deleteUSG:{url:"/firewall?action=deleteUSG",method:"post"},getUSGPolicy:{url:"/firewall?action=getUSGPolicy",method:"get"},updatePolicyOfUSG:{url:"/firewall?action=updatePolicyOfUSG",method:"post"},getUSGLink:{url:"/firewall?action=getUSGLink",method:"get"},copy:{url:"/firewall?action=copy",method:"post"}},"/cgi")}),define("models/iaas",function(t,e){var a=t("manager"),n=t("models/api"),f=t("models/reporter"),o=t("appUtil"),s=t("util"),c=t("config/adapter"),r=t("tips"),l=t("nmcConfig"),d=t("login"),u=t("widget/cam/cam"),p=t("dialog"),m=t("router"),g=t("insight"),h=t("sdk"),i=t("lib/uid-creator");function v(t,e,n){n=n||{};var i={"X-SeqId":o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o(),"X-Referer":location.href,"X-CsrfCode":s.getACSRFToken(),"x-lid":n.lid,"x-life":n.life,"x-intl":n.i18n||n.intl};function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return n.pid&&(i["x-pid"]=n.pid),Promise.resolve($.ajax($.extend({type:"post",xhrFields:{withCredentials:!0},crossDomain:!0,url:`${location.protocol}//${window.QCBASE_HOST||"iaas.cloud.tencent.com"}${t}`,headers:i,data:n.isFormData?e:JSON.stringify(e),dataType:"json",processData:!n.isFormData,contentType:!n.isFormData&&"application/json; charset=utf-8"},n)))}var b=function(){return new Promise(function(t){t(v)})},y=function(i,e,o){var a,t,n,s,c,r,l;o=o||{};try{o.useOptsUrl&&(i=o.url);var d=(t=i,s="cgi",c=m.queryToObj(t),r=c.i||c.query||"",l=c.action,c=r.split("/"),l?n=l:r&&(n=2==c.length?c[1]:c[0]),{service:2==c.length?c[0]:"qcbase",action:n,cgiType:s=/cgi\/capi/.test(t)?"capi":s}),u=new Error("IaaS 云 API 请求 ("+d.service+"."+d.action+")");i=g.provideCgiTraceUrl(i,{extendReport:function(t,e){return{seqId:e.requestHeaders&&e.requestHeaders["X-SeqId"],service:d.service,action:d.action,cgiType:d.cgiType,hostname:window.QCBASE_HOST}},trace:u}),o.useOptsUrl&&(o.url=i)}catch(h){}var p=window.getLifeInfo&&window.getLifeInfo();return p&&p.lid&&p.life&&(o.lid=p.lid,o.life=p.life),b().then(function(t){return a=Date.now(),t(i,e,o)}).then(function(t){var e=Date.now()-a;if(f.report(t,e,i,o),o.v3)return t;if(!1===o.classicResponse)return t;if(0==t.code)return t.data;throw t})["catch"](function(t){var e=Date.now()-a;if(f.report({code:t.status},e,i,o),"object"==typeof t&&!t.stack)try{t.stack=u.stack}catch(n){}throw t})},y=n.duplicatePromiseCombine(y,function(t,e){return t+"\n"+JSON.stringify(e)}),w=function(t,e){g.stat("iaas:tcb-sdk-error",{str_code:t||"Internal_Error",str_message:e||"An internal error has occurred."})},C=function(i){return i.cache=i.cache||{},function(){var n=JSON.stringify(Array.prototype.slice.call(arguments));return n in i.cache?i.cache[n]:(i.cache[n]=i.apply(this,arguments),new Promise(function(t,e){i.cache[n].then(t)["catch"](function(t){delete i.cache[n],e(t)})}))}},I=function(n){return new Promise(function(e,t){Promise.race([y("/cgi/platform?action=queryPlatform",{whiteListKey:"TCB_IAAS_ACCESS",serviceType:n})["catch"](function(t){throw new Error("An internal error has occurred.")}),new Promise(function(t,e){var n=setTimeout(function(){e(new Error("server timeout in 3s.")),clearTimeout(n)},3e3)})]).then(e,function(t){e(null),w("QUERY_PLATFORM_FAILED",t&&t.message)})})},x=function(){return new Promise(function(e,t){h.use("iaas-sdk").then(e,function(t){e(null),w("INIT_TCB_SDK_FAILED",t&&t.message)})})},k={VM:"VM",SCF:"SCF",TKE:"TKE"},S=function(t,e){return t.cmd&&!t.action&&(t.action=t.cmd),e&&e.v3&&(t.data=t.data||{},t.data.Version=t.data.Version||"2017-03-12"),t},_=function(t,e){var n=t.data&&t.data.Action||t.action||"";!m.debug||t.regionId||t.data.region||(console.warn(t.serviceType,n),console.warn("请传入 regionId! 没有传入 regionId / region 时会隐式使用 cookie 中的 regionId, 这可能会造成请求地域混乱"));var i=g.captureTrace("CAPI Call: "+t.serviceType+"."+t.action);return y("/cgi/capi?i="+t.serviceType+"/"+n+"&uin="+s.getUin(),t,e).then(function(t){if(e&&(!1===e.classicResponse||e.v3)){if(t&&t.code)throw t;if(!1===e.classicResponse&&(t=t.data)&&t.Response&&t.Response.Error)throw{code:t.Response.Error.Code,message:t.Response.Error.Message}}if(e&&e.v3&&(t=o.toLowerCaseFL(t.data||{}))&&t.response&&t.response.error)throw{code:t.response.error.code,message:t.response.error.message};return t})["catch"](T(e,i))},T=function(i,o){return(i=i||{}).camTipsType=i.camTipsType||"dialog",function(n){var t;if(n=c.capi(n),"function"==typeof i.error&&(n=i.error(n)),u.isCamRefused(n)?!1!==i.camTips&&("dialog"==i.camTipsType?h.use("cam-sdk").then(function(t){t.showBreakModal({message:n.message})})["catch"](function(t){var e=new Bee("<div><cam-tips>"+n.message+"</cam-tips></div>");p.create(e.$el,820,"",{title:"您没有权限执行此操作",defaultCancelBtn:!1,button:{" 确定 ":function(){p.hide()}}})}):t=n.message):800200==n.cgwCode?p.confirm("您的账号暂未完成实名认证，请前往完成实名认证！",function(){m.navigate("/developer/auth")},function(){},{title:"提示",width:480,mainBtnName:"前往认证",defaultCancelBtn:!1}):t=n.message||l.defaultReqErr,"VERIFY_LOGIN_FAILED"==n.code&&(t="当前用户登录已超时，请重新登录",a.ping(function(){console.error(window.QCBASE_HOST+" 用户态异常"),d.show()})),!1!==i.tipErr&&t&&r.error(t),"object"==typeof n&&!n.stack&&o)try{n.stack=o.stack}catch(e){}throw n}},D=function(t,e){var n="/cgi/graphql";return t.operationName?n+="?operationName="+t.operationName+"&uin="+s.getUin():n+="?uin="+s.getUin(),y(n,t,$.extend({classicResponse:!1},e))};function L(t,e){var n,i,o=(t=t||[]).join(".");for(e=e||[],n=0;n<e.length;n++)if(((i=e[n]).path||[]).join(".")==o)return JSON.parse(i.message);return null}function P(t){try{window.postMessage({type:"iaas-capi-call",payload:t},window.origin||location.protocol+"//"+location.hostname)}catch(e){console.warn("Cannot postMessage() for iaas-api-call: ",e)}}e.singleGqlRequest=function(t,e){var n=(t=t||{}).regionId,i=t.path,o=t.schema,a=t.params,s=t.paramsSchema,c=t.localParamsSchema,t=Object.keys(s||{}),r=$.extend({},s,c),c=(c=Object.keys(r).map(function(t){return"$"+t+": "+r[t]}).join(", "))&&"("+c+")",t=t.map(function(t){return t+": $"+t}).join(", "),o=function l(t,e,n){t="{"+e[0]+(1<e.length?l(t,e.slice(1)):t)+"}";return t=n?"("+n+")"+t:t}((t=t&&"("+t+")")+o,i);return D({regionId:n,variables:a,operationName:null,query:"query "+c+o},e).then(function(t){if(t.code)return{error:t};var e=t.errors;return{data:function(t,e){for(var n,i=e,o=0;o<t.length;o++){if(n=t[o],!(i&&n in i))return null;i=i[n]}return i}(i,t.data),error:L(i,e)||e&&e[0],errors:e}},function(t){return{data:null,error:t,errors:[{path:i,message:JSON.stringify(t)}]}})},e.getWhiteList=function(t,e){return y("/cgi/whitelist",{whitelistKeys:t,type:e},{classicResponse:!1})},e.ready=b,e.request=y,e.apiRequest=function(a,n){return a=S(a,n),new Promise(function(o){Promise.all([C(x)(),C(I)(a.serviceType)]).then(function(t){var e=t&&t[0]&&t[0].iaas,n=!(e&&e.ready),i=t&&t[1],t=i&&i.serviceTypes||[],i=!i||i.platform===k.VM,t=!t.length||-1<t.indexOf(a.serviceType);i||n||!t?o(null):e.ready().then(function(){o(e)},function(t){o(null),w("TCB_TURN_TO_QCBASE",t&&t.message)})})}).then(function(t){var e=i.create();return P(Object.assign({},a,{id:e,status:"pending"})),t?t.capiRequest(a,n).then(function(t){return P({id:e,status:"success",response:t}),t})["catch"](function(t){throw P({id:e,status:"error",response:t}),t}):_(a,n).then(function(t){return P({id:e,status:"success",response:t}),t})["catch"](function(t){throw P({id:e,status:"error",response:t}),t})})},e.dcRequest=function(t,e){return y("/cgi/dc?action=delegate&i="+t["interface"]+"&uin="+s.getUin(),t,e)},e.cloudLogRequest=function(t,e){return y("/cgi/cloudLog?action=delegate&i="+t["interface"],t,e)},e.gqlRequest=D,e.getGqlError=L,e.errorHandler=T}),define("models/manager",function(t,e,n){var C=t("dataManager"),I=t("net"),l=t("daoConfig"),x=t("util"),d=t("appUtil"),c=t("constants"),r=t("tips"),s=t("router"),i=(t("reporter"),t("config/productmenu")),o=t("models/api"),a=t("config/jsRouter"),t=window.g_buffet_data.navigation.flat().map(t=>t.menu).flat(),u=new Map(t.map(t=>[t.productId,t])),p={},h={checkFtCloudUserPromiser:undefined,checkAutoDrivingCloudUserPromiser:undefined},f=function(t){return"whitelist_cache_"+t};i&&i.all&&i.all.forEach(function(t){t.forEach(function(t){t.menu.forEach(function(t){t.href&&(p[t.href]=t)})})});var m,g={checkLogin:function(e,n,t){var i=this;t=t!=undefined&&t,I.send(l.get("checkLogin"),{cb:function(t){C.commonCb(t,e,n),i.onWatchGrantAndProjectChange()},global:t})},quitLogin:function(e,n){I.send(l.get("quitLogin"),{cb:function(t){C.commonCb(t,e,n)}})},queryRegion:function(e,n,i){i=i||"region_list";C.get(i)?e(C.get(i)):I.send(l.get("queryRegion"),{cb:function(t){C.commonCb(t,e,n,i)}})},queryBmRegion:function(e,t){var n="bm_region_list",i=C.get(n);i?e(i):this.delegateCApi(8,"bm","DescribeRegions",{},function(t){C.set(n,t),e(t)},t)},queryCorpRedirect:function(e,n,i){I.send(l.get("queryCorpRedirect"),{cb:function(t){C.commonCb(t,e,n,i)}})},queryOs:function(t,e,n){I.send(l.get("queryOs"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},queryCdnMenu:function(n,t){var e="cdn."+window.DOCUMENT_DOMAIN;$.ajax({type:"get",url:"//"+e+"/ajax/api.php?action=get_menu&format=jsonp&g_tk="+x.getACSRFToken(),dataType:"jsonp",jsonp:"cb",success:function(t){var e={};t&&t.data&&(e=t.data),n(e)}})},queryCpayMenu:function(e,n){I.send(l.get("queryCpayMenu"),{cb:function(t){C.commonCb(t,e,n)}})},queryCnsMenu:function(e,t){$.ajax({type:"get",url:"//wss.qcloud.com/dns/api/config/get_menu?mc_gtk="+x.getACSRFToken(),dataType:"jsonp",jsonp:"cb",success:function(t){e(t?t:{})}})},queryOvmMenu:function(e,t){$.ajax({url:"//ovm.qcloud.com/gamecloud_ovm/app_menu/GetMenu",dataType:"jsonp",jsonp:"cb",success:function(t){e(t?t:{})}})},queryDayuMenu:function(n){$.ajax({type:"get",url:"//dy.qcloud.com/ajax/api.php?action=get_menu&format=jsonp&g_tk="+x.getACSRFToken(),dataType:"jsonp",jsonp:"cb",success:function(t){var e={};t&&t.data&&(e=t.data),n(e)}})},queryYunsoMenu:function(e,n){I.send(l.get("queryYunsoMenu"),{cb:function(t){C.commonCb(t,e,n)}})},queryWenzhiMenu:function(e,n){I.send(l.get("queryWenzhiMenu"),{cb:function(t){C.commonCb(t,e,n)}})},queryMonitorMenu:function(e,n){$.ajax({url:"//monitor."+QCCONSOLE_HOST.substr(8)+"/index.php/nav/list",dataType:"jsonp",data:{_format:"json"},jsonp:"cb",success:function(t){C.commonCb(t,e,n)},error:n})},queryTmlMenu:function(e,n){$.ajax({url:"//tml.qcloud.com/ajax/get_menu",dataType:"jsonp",jsonp:"cb",data:{_format:"json"},success:function(t){C.commonCb(t,e,n)},error:n})},queryCosMenu:function(e,n){$.ajax({url:"https://cosapi.qcloud.com/api.php",dataType:"jsonp",jsonp:"callback",data:{Action:"GetMenu",mc_gtk:x.getACSRFToken()},success:function(t){C.commonCb(t,e,n)},error:n})},onWatchGrantAndProjectChange:function(){var n=this;window.localStorage&&(n.switchGrantAndProjectStatus(!0),window.onstorage=function(t){var e="grant_and_project_is_updated";t.key===e&&t.newValue!==t.oldValue&&"false"==window.localStorage.getItem(e)&&(n.updateGrantAndProject(),n.switchGrantAndProjectStatus(!0))})},switchGrantAndProjectStatus:function(t){window.localStorage&&window.localStorage.setItem("grant_and_project_is_updated",t)},notifyUpdateProjects:function(){this.updateGrantAndProject(),this.switchGrantAndProjectStatus(!1)},updateGrantAndProject:function(){I.send(l.get("getGrantAndUserPermissionInfo"),{global:!1,cb:function(t){t&&t.data&&d.setGrantAndProjectData({grantInfo:t.data.grantInfo,projects:t.data.permission.projectList})}})},getProjects:function(a,t){this.getComData(function(t){var e=t.userInfo.grantInfo,n=t.projects,i=e&&e.allowServiceList||[],o=s.fragment&&s.fragment.split("/")[1];o&&-1<i.indexOf(o)&&e.projectList?a({isShowAll:!0,data:e.projectList}):a({isShowAll:t.isShowAllProject,data:n})})},getUserAreaInfo:function(e,t){this.getComData(function(t){e(t.userInfo.areaInfo)})},checkPrivateCloudUser:function(a,t,e){var s=this,n=C.get(f(a));h[t]||(h[t]=function(){if(n){var t={};return t[a]=n,Promise.resolve(t)}return new Promise(function(e,n){var i=0,o=function(){s.queryWhiteList({whiteKey:[a]},function(t){e(t)},function(t){t=t.msg||t.message||(t instanceof Error?t.toString():JSON.stringify(t));i<3?(i++,o()):n(new Error(t))},!1,3e3,{tipErr:!1})};o()})}());var i=h[t];i.then(function(t){t[a]&&t[a].length?e&&e(null,!(!t[a]||!t[a].length)):e&&e(null,!1)})["catch"](function(t){i=null,e&&e(t,!1)})},isFtCloudUser:function(t){this.checkPrivateCloudUser("GROUP_CLOUD_JR_WHITELIST","checkFtCloudUserPromiser",t)},isAutoDrivingCloudUser:function(t){this.checkPrivateCloudUser("ADC_SINGEL_ADC_WHITELIST","checkAutoDrivingCloudUserPromiser",t)},queryWhiteListWithCache:function(t,e,n,i){var t=t.whiteKey,o=[],a={};t.forEach(function(t){var e=C.get(f(t));e?a[t]=e:o.push(t)}),o&&o.length?this.queryWhiteList({whiteKey:o},function(t){e&&e(Object.assign(a,t))},n,i):e&&e(a)},queryWhiteList:function(t,e,i,n,o,a){var s=t&&t.whiteKey,c=a&&a.tipErr;_cb=function(n){n&&0==n.code&&n.data&&s.forEach(function(t){var e=f(t);1===s.length?C.set(e,n.data[t]||n.data):C.set(e,n.data[t]||[])}),C.commonCb(n,e,i,null,c)},I.send(l.get("queryWhiteList"),{data:t,global:n,cb:_cb,timeout:o})},getUserData:function(t,e,n){I.send(l.get("getUserData"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},setUserIsSeeGuidelines:function(t,e,n){I.send(l.get("setUserIsSeeGuidelines"),{data:{isSeeGuidelines:t},global:!1,cb:function(t){C.commonCb(t,e,n)}})},getUserIsSeeGuidelines:function(e,n){I.send(l.get("getUserIsSeeGuidelines"),{cb:function(t){C.commonCb(t,e,n)}})},setUserGuideData:function(t,e,n){I.send(l.get("setUserGuideData"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},getUserGuideData:function(e,n){I.send(l.get("getUserGuideData"),{cb:function(t){C.commonCb(t,e,n)}})},getComData:function(t,e){d.getComData()?t(d.getComData()):$(document).on("login_data_inited",function n(){$(document).off("login_data_inited",n),t(d.getComData())}),this._getComDataStats()},_getComDataStats:function(){},getFlowCscResult:function(t,a,s,e){I.send(l.get("getFlowCscResult"),{data:t,global:"vpc"===e,cb:function(t){var e=(t.data||{}).output;if(C.commonCb(t,a,s),0==t.code)if(e&&e.failedInfo)for(var n=0;i=e.failedInfo[n];n++){var i=i.errorNum;i=(i="object"==typeof i?i[0]:i).toString().substring(1);var o=c.FLOW_RESULT_FAIL[i]||"操作执行失败，请稍后重试";r.error(o);break}else e&&e.errorCode&&(o=c.FLOW_RESULT_FAIL[e.errorCode]||"操作执行失败，请稍后重试",r.error(o))}})},getCvmList:function(t,e,n,i){var o=l.get("getCvmList");"post"==t.method?o.method="post":o.method="get",I.send(o,{data:t,global:i,cb:function(t){C.commonCb(t,e,n)}})},getCvmMore:function(t,e,n,i,o,a){I.send(l.get("getCvmMore"),{data:t,cb:function(t){C.commonCb(t,e,n,o,a)},global:i})},getCVMNotice:function(e,n){I.send(l.get("getCVMNotice"),{cb:function(t){C.commonCb(t,e,n)}})},rebootCvm:function(t,e,n){I.send(l.get("rebootCvm"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},cvmAction:function(t,e,n){I.send(l.get("cvmAction"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},modifyCvmAliasBatch:function(t,e,n){I.send(l.get("modifyCvmAliasBatch"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},resetCvmSystem:function(t,e,n){I.send(l.get("resetCvmSystem"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},switchCvmSystem:function(t,e,n){I.send(l.get("switchCvmSystem"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getQuotiesChargeItem:function(t,e,n,i,o){I.send(l.get("getQuotiesChargeItem"),{data:t,cb:function(t){C.commonCb(t,e,n,i,o)}})},resetCvmPasswd:function(t,e,n){I.send(l.get("resetCvmPasswd"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},formatCvmDisk:function(t,e,n){I.send(l.get("formatCvmDisk"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getBandwidthHistory:function(t,e,n){I.send(l.get("getBandwidthHistory"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getPrice:function(t,e,n){I.send(l.get("getPrice"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},getPriceForHour:function(t,e,n){I.send(l.get("getPriceForHour"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},getBandwidthReturnFittingPrice:function(t,e,n){I.send(l.get("getBandwidthReturnFittingPrice"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},upgradeHourCvm:function(t,e,n){I.send(l.get("upgradeHourCvm"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},upgradeHourCvmBandwidth:function(t,e,n){I.send(l.get("upgradeHourCvmBandwidth"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getServiceAccount:function(e,n,i){i=i||"is_user_service_account";C.get(i)?e(C.get(i)):I.send(l.get("getServiceAccount"),{data:{},cb:function(t){C.commonCb(t,e,n,i)}})},getAccounts:function(t,e,n){I.send(l.get("getAccounts"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},createCvmImage:function(t,e,n){I.send(l.get("createCvmImage"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},returnCvm:function(t,e,n){I.send(l.get("returnCvm"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},canPrepaidReturn:function(t,e,n){I.send(l.get("canPrepaidReturn"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},verifyCode:function(t,e,n){I.send(l.get("verifyCode"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},destroyCvm:function(t,e,n){I.send(l.get("destroyCvm"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},destroyCvmAndCdhCvm:function(t,e,n){I.send(l.get("destroyCvmAndCdhCvm"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},returnCvmInTime:function(t,e,n){I.send(l.get("returnCvmInTime"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},restoreCdhCvm:function(t,e,n){I.send(l.get("restoreCdhCvm"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getImageCategories:function(e,n){I.send(l.get("getImageCategories"),{cb:function(t){C.commonCb(t,e,n)}})},getImageProductsDetail:function(t,e,n){I.send(l.get("getImageProductsDetail"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getImagesDetail:function(t,e,n){I.send(l.get("getImagesDetail"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getMarketWhiteList:function(e,n){I.send(l.get("getMarketWhiteList"),{cb:function(t){C.commonCb(t,e,n)}})},checkResetSys:function(t,e,n){I.send(l.get("checkResetSys"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},setBandwidthLimit:function(t,e,n){I.send(l.get("setBandwidthLimit"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},setBandwidthLimitForFlow:function(t,e,n){I.send(l.get("setBandwidthLimitForFlow"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},changeProject:function(t,e,n){I.send(l.get("changeProject"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},setRenewFlag:function(t,e,n){I.send(l.get("setRenewFlag"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getAllWhiteList:function(t){C.getAllWhiteList(t)},isPrepaid:function(){var e=$.Deferred();return C.getAllWhiteList(function(t){t.PrepaidForCVM||t.CDB_PrepaidForCDB?e.resolve():e.reject()}),e},getMsgList:function(t,e,n){I.send(l.get("getMsgList"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},getTicketNum:function(e,n){I.send(l.get("getTicketNum"),{global:!1,cb:function(t){C.commonCb(t,e,n)}})},getVouchersNum:function(e,n){I.send(l.get("getVouchersNum"),{global:!1,cb:function(t){C.commonCb(t,e,n)}})},queryChannelV2:function(e,n){I.send(l.get("queryChannelV2"),{global:!1,cb:function(t){C.commonCb(t,e,n)}})},getConsoleProductVideoUrls:function(t,e,n){I.send(l.get("getConsoleProductVideoUrls"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},queryKeypair:function(t,e,n){I.send(l.get("queryKeypair"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},createKeypair:function(t,e,n){I.send(l.get("createKeypair"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},loadKeypair:function(t,e,n){I.send(l.get("loadKeypair"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},modifyKeypair:function(t,e,n){I.send(l.get("modifyKeypair"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},deleteKeypair:function(t,e,n){I.send(l.get("deleteKeypair"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},manageCvmKey:function(t,e,n){I.send(l.get("manageCvmKey"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},detailKeypair:function(t,i,e){I.send(l.get("detailKeypair"),{data:t,cb:function(t){C.commonCb(t,function(t){var e=t.detail_list?t.detail_list[0]:[{}],n=e.bind_uuidlist||[];e.regionList=[],n.map(function(t){return e.regionList.push(t.area),t.uuid}),i(t)},e)}})},loadChartDataV2:function(t,o,e,a,n){var s=this,c=(t=t||{}).chartInfos||[],i=t.namespace||"cvm",r=t.date||"",l=t.area||1,d=t.appId,u=t.vpcId,p=t.ip,h=t.uuid;s.chartDataCache||(s.chartDataCache={});for(var f=[],m=(new Date).getTime(),g=0;g<c.length;g++){var v=s.chartDataCache[a+"_"+c[g]+"_"+JSON.stringify(r)];(!v||"1h"==r&&v.time+3e5<m)&&f.push(c[g])}if(f.length){for(var b=[],g=0;g<f.length;g++)b.push({resourceType:i,resourceId:a,resourceArea:l,metric:f[g],time:r,vpc:u,appId:d,ip:p,uuid:h});var y="https://monitor."+QCCONSOLE_HOST.substr(8)+"/index.php/"+i+"/graph?g_tk="+x.getACSRFToken()+"&cb=?",t={_format:"jsonp",querys:b};I.getJSON(y,t,function(t){C.commonCb(t,function(t){for(var e=(t=t||{}).graphs||[],n=0;n<e.length;n++)e[n]&&(s.chartDataCache[a+"_"+e[n].metric+"_"+JSON.stringify(r)]={time:m,chartData:e[n]});var i=[];for(g=0;g<c.length;g++)s.chartDataCache[a+"_"+c[g]+"_"+JSON.stringify(r)]&&i.push({chartInfo:c[g],chartData:x.cloneObject(s.chartDataCache[a+"_"+c[g]+"_"+JSON.stringify(r)].chartData)});o(i)},e)})}else{var w=[];for(g=0;g<c.length;g++)w.push({chartInfo:c[g],chartData:x.cloneObject(s.chartDataCache[a+"_"+c[g]+"_"+JSON.stringify(r)].chartData)});o(w)}},loading:!1,cbList:[],getMonitorAgent:function(t,e,n){var i=this,o=i.agentCache||{},a=Date.now();o&&o.time&&a<=o.time+3e5?e(o.data):(i.cbList&&i.cbList.push({cb:e,fail:n}),i.loading||(i.loading=!0,I.send(l.get("getMonitorAgent"),{data:t,cb:function(t){i.agentCache=t,i.agentCache.time=Date.now();for(var e=0;e<i.cbList.length;e++){var n=i.cbList[e];n&&C.commonCb(t,n.cb||function(){},n.fail||function(){})}i.cbList=[],i.loading=!1}})))},queryKeyByIps:function(t,e,n){I.send(l.get("queryKeyByIps"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},queryCvmOpLogs:function(t,e,n,i,o,a,s){I.send(l.get("queryCvmOpLogs"),{data:{deviceIds:t.join("|"),startTime:e,endTime:n,offset:i,count:o},cb:function(t){C.commonCb(t,a,s)}})},queryImages:function(t,e,n,i,o,a){e={regionId:t,imgStatus:e};o!=undefined&&(e.virtualPlatform=o),I.send(l.get("queryImages"),{data:e,cb:function(t){C.commonCb(t,n,i)},global:a})},queryImageDetail:function(t,e,n){I.send(l.get("queryImages"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},delImages:function(t,e,n){I.send(l.get("delImages"),{data:{imageIds:t},cb:function(t){C.commonCb(t,e,n)}})},modImage:function(t,e,n,i,o){I.send(l.get("modImage"),{data:{imageId:t,imageName:e,imageDesc:n},cb:function(t){C.commonCb(t,i,o)}})},queryCbsList:function(t,e,n,i){I.send(l.get("queryCbsList"),{data:t,global:i,cb:function(t){C.commonCb(t,e,n)}})},modifyCbsAlias:function(t,e,n){I.send(l.get("modifyCbsAlias"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},setCbsAutoRenewFlag:function(t,e,n){I.send(l.get("setCbsAutoRenewFlag"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getDashboardBase:function(e,n){I.send(l.get("getDashboardBase"),{cb:function(t){C.commonCb(t,e,n)}})},getAppMonitor:function(e,n){$.ajax({url:"//monitor."+QCCONSOLE_HOST.substr(8)+"/index.php/alarm/scope",dataType:"jsonp",data:{_format:"json",g_tk:x.getACSRFToken()},jsonp:"cb",success:function(t){C.commonCb(t,e,n)},error:n})},getAppSecurity:function(e,n){I.send(l.get("getAppSecurity"),{cb:function(t){C.commonCb(t,e,n)}})},getNetworkFlow:function(e,n){I.send(l.get("getNetworkFlow"),{cb:function(t){C.commonCb(t,e,n)}})},getMargin:function(e,n){var t=C.get("cache_margin");t?e(t):I.send(l.get("getMargin"),{cb:function(t){C.commonCb(t,e,n,"cache_margin")}})},getServicesInfo:function(t,e,n){I.send(l.get("getServicesInfo"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getExpireNum:function(t,e,n,i){I.send(l.get("getExpireNum"),{data:t,global:i,cb:function(t){C.commonCb(t,e,n)}})},getNotice:function(t,e,n){I.send(l.get("getNotice"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getVpcRegionWhiteList:function(e,n){I.send(l.get("getVpcRegionWhiteList"),{data:{},cb:function(t){C.commonCb(t,e,n)}})},getVpcList:function(t,e,n){I.send(l.get("getVpcList"),{data:{regionId:t},cb:function(t){C.commonCb(t,e,n)}})},getVpcStatisticList:function(t,e,n,i,o,a){I.send(l.get("getVpcStatisticList"),{data:{regionId:t,offset:n,limit:i,keyword:e},cb:function(t){C.commonCb(t,o,a)}})},getVpcExternalStatistic:function(t,e,n,i,o){I.send(l.get("getVpcExternalStatistic"),{data:{regionId:t,vpcIds:e,keys:n},cb:function(t){C.commonCb(t,i,o)}})},getVpcTopo:function(t,e,n,i){I.send(l.get("getVpcTopo"),{data:{regionId:t,vpcId:e},cb:function(t){C.commonCb(t,n,i)}})},getVpcTopoExternal:function(t,e,n,i){I.send(l.get("getVpcTopoExternal"),{data:{regionId:t,vpcId:e},cb:function(t){C.commonCb(t,n,i)}})},updateCvm:function(t,e,n,i,o,a,s,c,r){I.send(l.get("updateCvm"),{data:{regionId:t,vpcId:e,uuid:n,srcVpcIp:i,dstVpcIp:o,srcSubnetId:a,dstSubnetId:s},cb:function(t){C.commonCb(t,c,r)}})},getVpcSubnetStatisticList:function(t,e,n){I.send(l.get("getVpcSubnetStatisticList"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getVpcSubnetIpCounts:function(t,e,n,i){I.send(l.get("getVpcSubnetIpCounts"),{data:{regionId:t,subnetList:e},cb:function(t){C.commonCb(t,n,i)}})},getVpcRtbStatisticList:function(t,e,n,i,o,a,s){I.send(l.get("getVpcRtbStatisticList"),{data:{regionId:t,vpcId:e,offset:i,limit:o,keyword:n},cb:function(t){C.commonCb(t,a,s)}})},getVpcVpnGwStatisticList:function(t,e,n,i,o,a,s){I.send(l.get("getVpcVpnGwStatisticList"),{data:{regionId:t,vpcId:e,offset:i,limit:o,keyword:n},cb:function(t){C.commonCb(t,a,s)}})},getVpcVpnGwStatisticListEx:function(t,e,n,i,o,a,s,c){$.isFunction(a)&&(c=s,s=a,a=o,o=i,i=n,n=undefined),I.send(l.get("getVpcVpnGwStatisticListEx"),{data:{regionId:t,vpcId:e,vpnGwId:n,offset:o,limit:a,keyword:i},cb:function(t){C.commonCb(t,s,c)}})},getSslVpnStatisticListEx:function(t,e,n,i,o,a,s,c){I.send(l.get("getSslVpnStatisticListEx"),{data:{regionId:t,vpcId:e,sslVpnId:n,offset:o,limit:a,keyword:i},cb:function(t){C.commonCb(t,s,c)}})},getVpcVpnUsedList:function(t,e,n){I.send(l.get("getVpcVpnUsedList"),{data:{regionId:t},cb:function(t){C.commonCb(t,e,n)}})},getVpcVpnConnStatisticList:function(t,e,n,i,o,a,s){I.send(l.get("getVpcVpnConnStatisticList"),{data:{regionId:t,vpcId:e,offset:i,limit:o,keyword:n},cb:function(t){C.commonCb(t,a,s)}})},getVpcUserGwStatisticList:function(t,e,n,i,o,a){I.send(l.get("getVpcUserGwStatisticList"),{data:{regionId:t,offset:n,limit:i,keyword:e},cb:function(t){C.commonCb(t,o,a)}})},getVpcView:function(t,e,n,i){I.send(l.get("getVpcView"),{data:{regionId:t,vpcId:e},cb:function(t){C.commonCb(t,n,i)}})},addVpc:function(t,e,n,i,o,a){I.send(l.get("addVpc"),{data:{regionId:t,vpcName:e,vpcCIDR:n,subnetList:i},cb:function(t){C.commonCb(t,o,a)}})},delVpc:function(t,e,n,i){I.send(l.get("delVpc"),{data:{vpcId:e,regionId:t},cb:function(t){C.commonCb(t,n,i)}})},modifyVpcProperty:function(t,e,n,i,o){I.send(l.get("modifyVpcProperty"),{data:{vpcId:e,vpcName:n,regionId:t},cb:function(t){C.commonCb(t,i,o)}})},modifyVPCSubnetRouteTable:function(t,e,n,i,o,a){I.send(l.get("modifyVPCSubnetRouteTable"),{data:{regionId:t,vpcId:e,subnetId:n,routeId:i},cb:function(t){C.commonCb(t,o,a)}})},getVpcDeviceCount:function(t,e,n,i){I.send(l.get("getVpcDeviceCount"),{data:{regionId:t,vpcId:e},cb:function(t){C.commonCb(t,n,i)}})},getSubnetInfo:function(t,e,n,i,o){I.send(l.get("getSubnetInfo"),{data:{regionId:t,vpcId:e,subnetId:n},cb:function(t){C.commonCb(t,i,o)}})},addSubnet:function(t,e,n,i,o){I.send(l.get("addSubnet"),{data:{regionId:t,vpcId:e,subnetList:n},cb:function(t){C.commonCb(t,i,o)}})},queryZone:function(t,e,n,i){I.send(l.get("queryZone"),{data:{regionId:t},cb:function(t){C.commonCb(t,e,n,!1,i)}})},getVpcZoneWhiteList:function(t,e,n){I.send(l.get("getVpcZoneWhiteList"),{data:{zoneIds:t},cb:function(t){C.commonCb(t,e,n)}})},modifySubnet:function(t,e,n,i,o,a,s){I.send(l.get("modifySubnet"),{data:{regionId:t,vpcId:e,subnetId:n,subnetName:i,rtbId:o},cb:function(t){C.commonCb(t,a,s)}})},deleteSubnet:function(t,e,n,i,o){I.send(l.get("deleteSubnet"),{data:{regionId:t,vpcId:e,subnetId:n},cb:function(t){C.commonCb(t,i,o)}})},getVPCGatewayList:function(t,e,n,i,o){I.send(l.get("getVPCGatewayList"),{data:{regionId:t,vpcId:e,gatewayType:n},cb:function(t){C.commonCb(t,i,o)}})},getVPCRouteTable:function(t,e,n,i,o,a){I.send(l.get("getVPCRouteTable"),{data:{regionId:t,vpcId:e,routerId:n,rtbId:i},cb:function(t){C.commonCb(t,o,a)}})},addVPCRouteTable:function(t,e,n,i,o,a,s){I.send(l.get("addVPCRouteTable"),{data:{regionId:t,vpcId:e,routerId:n,rtbName:i,routeList:o},cb:function(t){C.commonCb(t,a,s)}})},modifyVPCRouteTable:function(t,e,n,i,o,a,s,c){I.send(l.get("modifyVPCRouteTable"),{data:{regionId:t,vpcId:e,routerId:n,rtbId:i,rtbName:o,routeList:a},cb:function(t){C.commonCb(t,s,c)}})},deleteVPCRouteTable:function(t,e,n,i,o,a){I.send(l.get("deleteVPCRouteTable"),{data:{regionId:t,vpcId:e,routerId:n,rtbId:i},cb:function(t){C.commonCb(t,o,a)}})},getVpnGw:function(t,e,n,i,o){I.send(l.get("getVpnGw"),{data:{regionId:t,vpcId:e,vpnGwId:n},cb:function(t){C.commonCb(t,i,o)}})},initVpnGw:function(t,e,n){I.send(l.get("initVpnGw"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},clearVpnGw:function(t,e,n,i,o){I.send(l.get("clearVpnGw"),{data:{regionId:t,vpcId:e,vpnGwId:n},cb:function(t){C.commonCb(t,i,o)}})},clearSslVpn:function(t,e,n,i,o){I.send(l.get("clearSslVpn"),{data:{regionId:t,vpcId:e,sslVpnId:n},cb:function(t){C.commonCb(t,i,o)}})},getVpnGwQuota:function(e,n){I.send(l.get("getVpnGwQuota"),{cb:function(t){C.commonCb(t,e,n)}})},addVpnGw:function(t,e,n){I.send(l.get("addVpnGw"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},modifyVpnGw:function(t,e,n){I.send(l.get("modifyVpnGw"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},addUserGw:function(t,e,n){I.send(l.get("addUserGw"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},modifyUserGw:function(t,e,n){I.send(l.get("modifyUserGw"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},delUserGw:function(t,e,n){I.send(l.get("delUserGw"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},addVpnConn:function(t,e,n){I.send(l.get("addVpnConn"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},modifyVpnConn:function(t,e,n){I.send(l.get("modifyVpnConn"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},delVpnConn:function(t,e,n){I.send(l.get("delVpnConn"),{data:t,cb:function(t){C.commonCb(t,e,n)}})},getVpnStuff:function(t,e,n,i){I.send(l.get("getVpnStuff"),{data:{regionId:t,vpcId:e},cb:function(t){C.commonCb(t,n,i)}})},getVpnConnProperty:function(t,e,n,i,o){I.send(l.get("getVpnConnProperty"),{data:{vpcId:t,vpcConnId:e,taskId:n},cb:function(t){C.commonCb(t,i,o)}})},getVpnPrice:function(t,e,n){I.send(l.get("getVpnPrice"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},payByCart:function(t,e,n){I.send(l.get("payByCart"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},payByCartCvm:function(t,e,n){I.send(l.get("payByCartCvm"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},getDealsByCond:function(t,e,n){I.send(l.get("getDealsByCond"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},getUserGwVendor:function(e,n){I.send(l.get("getUserGwVendor"),{global:!1,cb:function(t){C.commonCb(t,e,n)}})},loadVpnChartData:function(t,e,n){I.send(l.get("loadVpnChartData"),{data:t,cb:function(t){C.commonCb(t,e,n,!1,!1)}})},getGwStatusList:function(t,e,n,i){I.send(l.get("getGwStatusList"),{data:{regionId:t,vpcId:e},cb:function(t){C.commonCb(t,n,i,!1,!1)}})},getVpnGwStatusList:function(t,e,n,i){I.send(l.get("getVpnGwStatusList"),{data:{regionId:t,vpcId:e},cb:function(t){C.commonCb(t,n,i,!1,!1)}})},getVpnConnStatusList:function(t,e,n,i){I.send(l.get("getVpnConnStatusList"),{data:{regionId:t,vpcId:e},cb:function(t){C.commonCb(t,n,i,!1,!1)}})},getOperatelogList:function(t,e,n,i){I.send(l.get("getOperatelogList"),{data:t,global:i,cb:function(t){C.commonCb(t,e,n)}})},queryConfigureProducts:function(t,e,n,i){I.send(l.get("queryConfigureProducts"),{data:t,global:i,cb:function(t){C.commonCb(t,e,n)}})},updateUserDefined:function(t,e,n,i){I.send(l.get("updateUserDefined"),{data:t,global:i,cb:function(t){C.commonCb(t,e,n)}})},queryConfigureCodeData:function(t,e,n,i){I.send(l.get("queryConfigureCodeData"),{data:t,global:i,cb:function(t){C.commonCb(t,e,n)}})},getDeveloperAccountList:function(t,e,n,i){I.send(l.get("getDeveloperAccountList"),{data:t,global:i,cb:function(t){C.commonCb(t,e,n)}})},switchDeveloperAccount:function(t,e,n,i){I.send(l.get("switchDeveloperAccount"),{data:t,global:i,cb:function(t){C.commonCb(t,e,n)}})},resetCpmPasswd:function(t,e,n,i){I.send(l.get("resetCpmPasswd"),{data:t,global:i,cb:function(t){C.commonCb(t,e,n)}})},getPriceBm:function(t,e,n){I.send(l.get("getPriceBm"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},getVpcBmVpnGwList:function(t,e,n,i,o,a,s){I.send(l.get("getVpcBmVpnGwList"),{data:{regionId:t,vpcId:e,offset:i,limit:o,keyword:n},cb:function(t){C.commonCb(t,a,s)}})},generateDeals:function(t,e,n){I.send(l.get("generateDeals"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},delegateCApi:function(t,e,n,i,o,a,s){var c={};Object.keys(i).forEach(function(t){var e=i[t];e!==undefined&&(c[t]=e)}),I.send({url:"/cgi/capi?"+$.param({cmd:n,action:"delegate",serviceType:e}),method:"post"},{data:{regionId:t,serviceType:e,cmd:n,data:c},cb:function(t){var e=t.data;C.commonCb(t,o,a,null,!e),0!==t.code&&e&&(s?r.error(s(e.cgwerrorCode,e)):r.error(t.msg||e.message||e.msg||"请求服务器失败"))}})},queryBarad:function(t,e,n,i){I.send({url:"/cgi/barad?action=query",method:"post"},{data:$.extend({regionId:t},e),cb:function(t){C.commonCb(t,n,i)}})},checkTask:function(t){var o=$.extend({checkTime:1e3,hideTips:!1,tips:""},t);return o.hideTips||r.requestStart({text:o.tips}),new Promise(function(e,n){!function i(){g.getFlowCscResult({taskId:o.taskId,regionId:o.regionId},function(t){0===t.status?(o.hideTips||r.requestStop(),e(t.output)):1===t.status?(o.hideTips||r.requestStop(),n(t.output)):setTimeout(i,o.checkTime)},n)}()})},getCdhChartData:function(t,e,n){I.send(l.get("getCdhChartData"),{data:t,cb:function(t){C.commonCb(t,e,n,!1,!1)}})},getCdhMonitorChartData:function(t,e,n){I.send(l.get("getCdhMonitorChartData"),{data:t,cb:function(t){C.commonCb(t,e,n,!1,!1)}})},getStatisticsGridData:function(t,e,n){I.send(l.get("getStatisticsGridData"),{data:t,cb:function(t){C.commonCb(t,e,n,!1,!1)}})},getCdhChartDataBatch:function(t,e,n){I.send(l.get("getCdhChartDataBatch"),{data:t,cb:function(t){C.commonCb(t,e,n,!1,!1)}})},getRealTimeCdhData:function(t,e,n){I.send(l.get("getRealTimeCdhData"),{data:t,cb:function(t){C.commonCb(t,e,n,!1,!1)}})},getGroupList:function(t,e,n,i){I.send(l.get("getGroupList"),{data:t,global:i,cb:function(t){C.commonCb(t,e,n)}})},ping:function(e,n){I.send(l.get("ping"),{global:!1,cb:function(t){C.commonCb(t,e,n)}})},queryZoneName:(m={},function(t,e){var n=t.regionId,i=t.zoneId,o=(e=e||{}).tipErr;return new Promise(function(e,t){n||t(new Error("缺少 regionId")),i?m[n]?setTimeout(function(){e(d.clone(m[n]))},0):g.queryZone(n,function(t){m[n]=t,e(d.clone(m[n]))},t,o):t(new Error("缺少 zoneId"))}).then(function(t){var e="";return t.some(function(t){if(t.zoneId==i)return e=t.zoneName,!0}),e||i})}),getNextDate:function(t,e){if(!t)return"";var n=d.getDate(t),i=n.getDate(),t=new Date(n.getFullYear(),n.getMonth()+1,0);return n.setMonth(n.getMonth()+(e||1)),n.getDate()<i?n.setDate(0):i===t.getDate()&&n.setFullYear(n.getFullYear(),n.getMonth()+1,0),d.formatDate(n,"yyyy-MM-dd")},getInstanceEniLimit:function(t,e,n){this.delegateCApi(t.regionId,"vpc","GetInstanceEniLimit",t,function(t){e(t)},n)},getInstanceEniNum:function(t,e,n){this.delegateCApi(t.regionId,"vpc","DescribeNetworkInterfaces",t,function(t){e(t)},n)},reportVisitProduct:function(e){for(var t,n,i=(e=e||(s&&s.option&&!s.option.html5Mode?location.hash.slice(1):location.pathname)).split("/");i&&i.length;){if(p[i.join("/")]){n=i.join("/");break}i.pop()}n||(t=(t=a.getRouteConfig(e.slice(1)))&&t.productId||0,t=u.get(t),n=t&&t.href||""),n&&this.getComData(function(t){t&&t.userInfo&&o.request({serviceType:"account",cmd:"ReportUserLastVisit",data:{Version:"2018-12-25",ProductName:n,ProductPath:`${e}${100<(location.search||"").length?"":location.search}`},regionId:1},{tipErr:!1,global:!1,secure:!0,version:3})})},reportTranslate:function(t,e,n){I.send(l.get("reportTranslate"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},hideNewSidebarTip:function(t,e,n){I.send(l.get("hideNewSidebarTip"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},useOldSidebar:function(t,e,n){I.send(l.get("useOldSidebar"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})},useNewSidebar:function(t,e,n){I.send(l.get("useNewSidebar"),{data:t,global:!1,cb:function(t){C.commonCb(t,e,n)}})}},v={};g._cacheRequest=function(t,e,n){v[t]=v[t]||{},n=n||{};var i=v[t],o={},a=0,s=1e3*n.expire;"function"!=typeof e[0]&&(o=e[0],a=1);var c=$.param(o),r=$.Deferred();return e[a]=d.beforeFn(e[a]||function(){},function(t){var e=!i[c];i[c]={data:d.clone(t)},s&&e&&(i[c].timer=setTimeout(function(){delete i[c]},s)),r.resolve(t)}),i&&i[c]&&i[c].data?(e[a](i[c].data),r.resolve(i[c].data)):g[t].apply(g,e),r.promise()},n.exports=g}),define("models/market",function(t,e,n){t=t("nmc/main/model");n.exports=new t({getProviderDealList:{url:"/market?action=getDealList",method:"get"},setServiceStatus:{url:"/market?action=setServiceStatus",method:"post"},getDealInfo:{url:"/market?action=getDealInfo",method:"get"},getPendingDealNum:{url:"/market?action=getPendingDealNum",method:"get"}},"/cgi")}),define("models/message",function(t,e,n){t=t("nmc/main/model");n.exports=new t({getMsgList:{url:"/message?action=getMsgList",method:"get"},getMsgSearch:{url:"/message?action=getMsgSearch",method:"get"},getMsgSummary:{url:"/message?action=getMsgSummary",method:"get"},getMsgType:{url:"/message?action=getMsgType",method:"get"},getMsgContent:{url:"/message?action=getMsgContent",method:"get"},queryMsgTypeList:{url:"/message?action=queryMsgTypeList",method:"get"},getReceiversOnAllType:{url:"/message?action=getReceiversOnAllType",method:"get"},msgRead:{url:"/message?action=msgRead",method:"post"},msgReadAll:{url:"/message?action=msgReadAll",method:"post"},msgDelete:{url:"/message?action=msgDelete",method:"post"}},"/cgi")}),define("models/reporter",function(t,e){e.report=function(t,e,n,i){}}),define("models/snapshot",function(t,e,n){t=t("nmc/main/model");n.exports=new t({querySnapshot:{url:"/snapshot?action=querySnapshot",method:"get"},modifySnapshot:{url:"/snapshot?action=modifySnapshot",method:"post"},createSnapshot:{url:"/snapshot?action=createSnapshot",method:"post"},delSnapshot:{url:"/snapshot?action=delSnapshot",method:"post"},rollbackSnapshot:{url:"/snapshot?action=rollbackSnapshot",method:"post"},querySnapshotLog:{url:"/snapshot?action=querySnapshotLog",method:"get"},checkSnapAbility:{url:"/snapshot?action=checkSnapAbility",method:"get"},createAutoSnapshotPolicy:{url:"/snapshot?action=createAutoSnapshotPolicy",method:"post"},describeAutoSnapshotPolicies:{url:"/snapshot?action=describeAutoSnapshotPolicies",method:"get"},modifyAutoSnapshotPolicy:{url:"/snapshot?action=modifyAutoSnapshotPolicy",method:"post"},deleteAutoSnapshotPolicies:{url:"/snapshot?action=deleteAutoSnapshotPolicies",method:"post"},bindAutoSnapshotPolicy:{url:"/snapshot?action=bindAutoSnapshotPolicy",method:"post"},describeCbsAssociatedAsp:{url:"/snapshot?action=describeCbsAssociatedAsp",method:"get"},unbindAutoSnapshotPolicy:{url:"/snapshot?action=unbindAutoSnapshotPolicy",method:"post"}},"/cgi")}),define("widget/alg/Locks",function(t,e,n){n.exports=function(){var n={},i=0,o=this,a=function(t){var e=o.isLocked();e!==t&&o.onChange&&o.onChange(e)};o.lock=function(t){var e;n.hasOwnProperty(t)||(e=o.isLocked(),n[t]=!0,i++,a(e))},o.unlock=function(t){var e;n.hasOwnProperty(t)&&(e=o.isLocked(),delete n[t],i--,a(e))},o.isLocked=function(){return 0<i}}}),define("widget/baseInfo/baseInfo",function(t,e,n){t("pageManager");var i=t("appUtil"),o=t("widget/pubsubhub/pubsubhub"),a=t("qccomponent"),s=t("./validator"),c=n.exports=a.ComponentBase.extend({$tpl:'    <div class="tc-15-list-wrap {{className}}">        <div class="head-top-title"><h3>{{title}}</h3>            <a b-on-click="edit(true)" b-if="!isEdit && showEdit && info" href="javascript:;"><i class="pencil-icon "></i>编辑</a>        </div>        <form action="javascript:;" b-on-submit="save()">            {{> detailTpl }}            <div class="tc-15-page tc-15-table-panel-edit" style="margin-left: 95px;" b-if="isEdit">                <button class="tc-15-btn" b-ref="saveBtn" type="submit">保存</button>                <button class="tc-15-btn weak" b-on-click="cancel()">取消</button>            </div>        </form>    </div>',$afterInit:function(){c.__super__.$afterInit.call(this),this.load(),this.bindEvent()},detailTpl:'    <div class="tc-15-list-content">        <ul>            <li><em class="tc-15-list-tit">名称</em>                <span b-if="!isEdit" class="tc-15-list-det">{{info.name}}</span>                <div class="tc-15-input-text-wrap" b-if="isEdit">                    <input type="text" data-validate="name" class="tc-15-input-text" b-model="info.name" maxlength="25">                    <div class="tc-15-input-tips">还能输入{{25 - (info.name).length}}个字符，英文、汉字、数字、连接线"-"或下划线"_"</div>                </div>            </li>            <li><em class="tc-15-list-tit">ID</em><span class="tc-15-list-det">{{info.id}}</span>            </li>        </ul>    </div>',showEdit:!0,edit:function(t){this.$set("isEdit",t),t&&$(this.$el).find("input:text:visible:first").select()},getData:function(t){return new Promise(function(t,e){console.log("实现该方法以拉取数据")})},updateData:function(){return new Promise(function(t,e){console.log("实现该方法更新编辑数据")})},validate:function(t){return!0},save:function(){var e=$(this.$refs.saveBtn),t=new s({rules:this.rules});if(t.btn=this.$refs.saveBtn,!e.hasClass("disabled")&&t.validateAll(this.$el,this)&&this.validate(t,this.$el,this))return e.addClass("disabled"),this.updateData(this.info).then(function(t){return e.removeClass("disabled"),t},function(t){throw e.removeClass("disabled"),t})},cancel:function(){this.$set({info:i.clone(this.origin)}),this.edit(!1)},refresh:function(){return this.load()},load:function(){var e=this;return this.getData(this.id).then(function(t){e.$set({info:t,regionId:i.getRegionId(),origin:i.clone(t),isEdit:!1}),e.$emit("loaded")})},bindEvent:function(){var t=this;o.on(this.changeEvent,function(){t.load()})}},{defaults:{title:"基本信息",showEdit:!0,className:"vpc-line-inf"}})}),define("widget/baseInfo/validator",function(t,e,n){t("appUtil");var i=t("qccomponent"),t=t("widget/validator/validatorV2");n.exports=t.extend({typeAttr:"data-validate",showErr:function(t,e,n,i){var o=this;(n=n||{}).silence||(n.noTips||this.showTips(t,e,n),$(t).parent().addClass(this.errClass),"SELECT"===t.tagName.toUpperCase()&&$(t).addClass(this.errClass),$(t).filter(this.validateSelector).off(".validator").on("input.validator change.validator",function(){o.validate(t,{noTips:!0},i)}))},hideErr:function(t){this.hideTips(t),$(t).parent().removeClass(this.errClass),"SELECT"===t.tagName.toUpperCase()&&$(t).removeClass(this.errClass)},showTips:function(t,e,n){n=new(i.getComponent("qc-popover"))({$data:$.extend({trigger:"",hideDestroy:!0,content:e,position:"top"},n),target:t,handler:this.btn});(t.tips=n).show()},hideTips:function(t){t=t.tips;t&&t.hide()}})}),define("widget/betaTip/betaTip",function(t,e,n){var i=t("$"),o=(t("util"),t("pageManager")),a=t("router"),s=function(){a.navigate("ticket")},c={vpc:'    <div class="title-select-panel">        <h2>私有网络</h2>    </div>    <i class="line"></i>    <i class="vpc-view"></i>    <div class="vpc-info">        <h3>私有网络可以做什么</h3>        <p class="info">您可以在此创建独立的私有地址空间，并在此空间内管理云服务器<br>您可以使用 VPN服务将您的数据中心与此空间进行连接，搭建您的混合云服务</p>        <a href="javascript:void(0);" class="btn-mod" id="betaTicket">立即申请开通</a>    </div>',firewall:'    <div class="title-select-panel">        <h2>开通安全组</h2>    </div>    <i class="line"></i>    <div class="firewall-welcome">        <i class="line"></i>        <i class="firewall-view"></i>        <div class="cdn-info">            <h3>腾讯云安全组新鲜出炉,诚邀试用</h3>            <p class="info">安全组提供基于IP和端口的云主机出入访问规则控制</p>            <a href="javascript:;" id="betaTicket" class="btn-mod">申请试用</a>        </div>    </div>'},t={show:function(t){t&&(o.appArea.html(c[t]),i("#betaTicket").click(s))}};n.exports=t}),define("widget/cacher/Cacher",function(t,e,n){var d=t("appUtil"),s="_KEY_",p=function(c,r,l){var d=l.promiseStyle,u=l.ns,p=l.alias||r;return function(){var n,i,o,e=this,a=[].slice.call(arguments),s=p+"-"+a.join("-"),t=d?function(e){c[r].apply(c,a).done(function(t){e(null,t)}).fail(function(t){e(t)})}:(n=c,i=r,o=a,function(e){var t=o.concat([function(t){e(null,t)},e]);n[i].apply(n,t)});return u&&[].concat(u).forEach(function(t){e.addNsCache(h(t,a),s)}),e.getCache(s,t,l)}};function h(t,n){return 0<=t.indexOf("$")?t.replace(/\$(\d+)/g,function(t,e){return n[e]||""}):[t].concat(n).join(".")}t=function(t){var e=this;e.nsCache={},e.storage={},e.waiting={},(t||[]).forEach(e.registerCacheFn.bind(e))};$.extend(t.prototype,{addNsCache:function(t,e){for(var n,i=t.split("."),o=this.nsCache,a=0;a<i.length;a++)o=o[n=i[a]]||(o[n]={});(o[s]||(o[s]={}))[e]=1},clearNsCache:function(t){for(var e,n=t.split("."),i=this.nsCache,o=[],a=0;a<n.length;a++)(i=i[e=n[a]]||(i[e]={})).ALL&&i.ALL[s]&&(o=o.concat(Object.keys(i.ALL[s])));(o=i[s]?o.concat(Object.keys(i[s])):o).forEach(this.resetCache.bind(this))},getCache:function(n,t,e){var i=this.storage,o=this.waiting,a=e.ignoreCache,s=e.lifetime,e=function(t){return d.clone(t)};if(o.hasOwnProperty(n))return o[n].then(e);var c,r=$.Deferred(),l=(new Date).getTime();return!0!==a&&i.hasOwnProperty(n)&&(!(c=i[n]).expire||c.expire>l)?r.resolve(d.clone(c.data)):((o[n]=r).always(function(){delete o[n]}),t(function(t,e){t?r.reject(t):(i[n]={expire:s?l+s:0,data:e},r.resolve(e))}),r.then(e))},resetCache:function(t){delete this.storage[t]},resetNamespace:function(t){1<arguments.length&&(t=[].join.call(arguments,".")),this.clearNsCache(t)},registerCacheFn:function(t){var e,n,i,o,a,s,c,r,l,d=this,u=d;$.isArray(t)?(e=t[0],n=t[1],i=t[2],s=t[3]||0):(e=t.host,n=t.fnName,i=t.alias,o=t.promise,a=t.ns,s=t.lifetime,c=t.isModify),r=u[i=i||n]=p(e,n,{ignoreCache:c,lifetime:s,ns:a,promiseStyle:o,alias:i}),l=function(){var e=[].slice.call(arguments),t=i+"-"+e.join("-");d.resetCache(t),a&&[].concat(a).forEach(function(t){d.clearNsCache(h(t,e))})},c&&(u[i]=function(){var t=this,e=[].slice.call(arguments),n=r.apply(t,arguments);return n.done(function(){l.apply(t,e)}),n}),!c&&/^get/.test(i)&&(u[i.replace(/^get/,"reset")]=l,u[i.replace(/^get/,"getFresh")]=p(e,n,{ignoreCache:!0,ns:a,promiseStyle:o,alias:i}))}}),n.exports=t}),define("widget/cam/cam",function(t,e,n){var i=t("qccomponent"),o=/\(\w+:\w+\)/g,a=/\(([\w\-|\/]*:){5}.*?\)/g,s=(t("dialog"),(i=t("qccomponent")).getComponent("grid-view").extend({dataCallback:function(t){return $(this.$el).removeClass("none-mod cam-tips"),this.camTipsStatus&&(this.$set("camTipsStatus",!1),this.hideTips()),s.__super__.dataCallback(t)},errorCallback:function(t){return e.isCamRefused(t)&&($(this.$el).addClass("none-mod cam-tips"),this.$set({camTipsStatus:!0,list:[],totalNum:0}),this.showTips("<cam-tips>"+(t.message||t.msg)+"</cam-tips>")),s.__super__.errorCallback(t)}}));i.tag("grid-view",s);var c=i.extend({$tpl:'<div class="authority-wrap" style="text-align: left">    <p class="authority-inf text-weak">该操作需要授权，请联系您的开发商为您添加权限。<a  target="_blank" href="//www.qcloud.com/document/product/378/4509">查看授权操作指南 <i class="external-link-icon"></i></a></p>    <p class="authority-tit text-weak" b-if="_content">失败信息描述：</p>        <div class="rich-textarea" b-if="_content">        \x3c!--<div class="permission-code-editor">                <ul class="editor-toolbars">                    <li class="active">                        <a href="##" class="editor-toolbars-item"><i class="icon copy"></i></a>                    </li>                </ul>        </div>--\x3e        <div class="rich-content">{{{ _content }}}</div>    </div></div>',$afterInit:function(){var t=this.content||$(this.$content).text();this.$set("_content",this.format(t))},format:function(t){return(t="undefined"==t?"":t).replace(/^\(.+?\)/,"").trim().replace(o,'<span class="text-success">$&</span>').replace(a,'<span class="text-warning">$&</span>').replace(/^(.+)$/gm,'<p class="rich-text">$1</p>')}}),t=i.extend({$tpl:'<span>    <span b-if="!icon" qc-popover-position?="position" qc-popover="<cam-tips>{{_content}}</cam-tips>" data-style="{{style}}">*****</span>    <i b-if="icon" class="icon-info-red" qc-popover-position?="position" qc-popover="<cam-tips>{{_content}}</cam-tips>" data-style="{{style}}"></i></span>',style:"width: 510px",$afterInit:function(){var t=this.content||$(this.$content).text();this.$set("_content",t),this.$watch("type",function(t){this.$set("icon","icon"==t||this.icon)},!0)}});i.tag("cam-tips",c),i.tag("cam-help-tips",t),e.CamTips=c,e.isCamRefused=function(t,e){return 4102==+t.code||42==+t.code||"UnauthorizedOperation"===t.code||"AuthFailure.UnauthorizedOperation"===t.code},e.CamHelpTips=t}),define("widget/chart/SDKWrap",function(t,e,n){var i=t("qccomponent"),o=t("lib/monitor-sdk-importer"),a=t("appUtil"),s=n.exports=i.extend({optionsExpression:"getOptions(regionId, data)",$afterInit:function(){var n=this;s.__super__.$afterInit.apply(n,arguments),o.ready().then(function(e){n.bufferUpdate=a.bufferFn(function(t){n.chartDisposer=e.MonitorDetailBuilder.build(t,n.$el)},100),n.$watch(n.optionsExpression,n.bufferUpdate,!0)})},$beforeDestroy:function(){this.bufferUpdate&&this.bufferUpdate.destroy(),this.chartDisposer&&this.chartDisposer(),s.__super__.$beforeDestroy.apply(this,arguments)}})}),define("widget/contextmenu/contextmenu",function(t,e,n){var b=t("$"),i=t("util"),a=".contextmenu{position:absolute;border:1px solid #d1d1d1;box-shadow: 1px 1px 2px rgba(0,0,0,.2);z-index: 1100;min-width:192px;background: #fff;}.contextmenu ul {border-bottom:1px solid #e1e1e1;padding:5px 0;}.contextmenu a{display:block;padding:4px 10px;font-size:12px;color:#222}.contextmenu a:hover {background-color:#0071ce;color:#fff}.contextmenu li.disabled a {color:#999; cursor:default}.contextmenu li.disabled a:hover {background-color:transparent;color:#999}",y=function(){b("#contextMenu").hide().html(""),b("body").off("click",y)},t=function(t){var o=this;this.options=b.extend({},{object:null,selector:"tbody tr",data:{},filterClass:"",getData:null,onShow:null},t);t=this.options.object;t&&(this.menuId=(new Date).getTime(),(this.menuEl=b("#contextMenu")).length||(this.menuEl=b('<div id="contextMenu" class="contextmenu"></div>').appendTo("body").hide().bind("click",function(t){t.stopPropagation()}),i.insertStyle(a),b(document).off("contextmenu").on("contextmenu",function(t){y()})),b(t).off("contextmenu").on("contextmenu",this.options.selector,function(t){var e=b(this),n=b(t.target),i=o.options.filterClass;if(!i||!n.hasClass(i)&&!n.closest("."+i).length){if(/tr/.test(o.options.selector))if(e.filter("[data-isloading=true], .disabled").length)return;return o.trigger=e,o._show(t),!1}}))};t.prototype={_show:function(t){var n=this,e=this.options,i=this.menuEl;if(e.getData||!i.html()||this.menuId!=i.attr("menuId")){for(var o,a=b([]),s=e.getData?e.getData(n.trigger):e.data,c=0;o=s[c];c++){var r,l=b("<ul/>");for(r in o){var d=o[r],u=r,p="",h=d;"object"==typeof d&&d.callback&&(u=d.name||r,p='data-name="'+r+'"',h=d.callback);u=b("<li "+p+'><a href="javascript:;">'+u+"</a></li>");!function(t,e){t.on("click",function(){"function"!=typeof e||b(this).hasClass("disabled")||e(n.trigger,b(this)),t.trigger("mouseleave"),n.hide()})}(u,h),l.append(u)}a=a.add(l)}if(!a.find("li").length)return void y();i.html("").append(a),i.attr("menuId",this.menuId)}e.onShow&&e.onShow(t,i,n.trigger),i.show();var f=t.clientX,m=t.clientY,g=b(window),v=g.width(),e=g.height(),t=i.outerWidth(),g=i.outerHeight();e<m+g&&(m=e-g),v<f+t&&(f=v-t),i.css({left:f,top:m}),b("body").off("click",y).on("click",y)},hide:function(){y()},destroy:function(){}},n.exports=t}),define("widget/copy/copy",function(t,e,n){var o=t("$"),a=t("tips"),s=(t("util"),t("clipboard")),t=function(t){this.$handle=o(t.handle),this.$container=o(t.container),t.container&&this.bindEvent(),this.initClipboard()};t.prototype={bindEvent:function(){var i=this;this.$container.mouseenter(function(){i.$handle.hide(),o(this).find("[data-clipboard-text]").each(function(t,e){var n=o(e),e=n.attr("data-clipboard-text");i._checkTxt(e)&&n.show()})}).mouseleave(function(){o(this).find("[data-clipboard-text]").hide()})},initClipboard:function(){var i=this;this.$handle.each(function(t,e){var e=o(e),n=e.attr("data-clipboard-text");i._checkTxt(n)&&((e=new s(e[0],{text:function(){return n}})).on("success",function(){a.success("复制成功")}),e.on("error",function(t){a.error("您的浏览器不支持一键复制，请选中文本后用 Ctrl + C 快捷键进行复制"),console.warn(t)}))})},_checkTxt:function(t){return t&&"-"!=t}},n.exports=t}),define("widget/copy/fakeCopy",function(t,e,n){var i=function(t,e){this.text=t,this.callback=e,this.selectFake()};i.prototype.selectFake=function(){var t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";t=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,t)),this.fakeElem.style.top=t+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.fakeElem.select(),this.copyText()},i.prototype.removeFake=function(){this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},i.prototype.copyText=function(){var t=!0;try{t=document.execCommand("copy")}catch(e){t=!1}this.handleResult(t)},i.prototype.handleResult=function(t){this.callback&&this.callback.call(this,t)},n.exports=i}),define("widget/detail/detail",function(t,e,n){t("$");var i=t("qccomponent"),o=t("router"),a='    <div class="{{ ClassName ? ClassName : \'\'}}">        \x3c!--添加窗体模块--\x3e        {{> headerTpl }}        <qc-detail-tabs b-if="tabData && !hideTabs" active-index="{{activeIndex}}" b-with="tabData" b-ref="tabs"></qc-detail-tabs>        {{> content }}    </div>',t='    <div data-role="qc-tabs" class="manage-area-main secondary-main" style="overflow-y: inherit;">        <div class="tc-15-tab tc-15-tab-alt">            <ul role="tablist" class="tc-15-tablist" b-if="list.length > 1">                <li class="{{$index == activeIndex ? \'tc-cur\': \'\'}}" b-repeat="tab in list">                    <a b-on-click="$set(\'activeIndex\', $index)"                       title="{{tab.label}}" href="javascript:;">{{tab.label}}</a>                </li>            </ul>            <div data-tab-pane b-repeat="tab in list" b-style="{display: $index == activeIndex ? \'block\': \'none\'}">                {{> tab.content }}            </div>        </div>    </div>',t=i.getComponent("qc-tabs").extend({$tpl:t});i.tag("qc-detail-tabs",t);a=i.extend({$tpl:a,backUrl:"",$afterInit:function(){var n=this;this.$refs.tabs&&this.$refs.tabs.$watch("activeIndex",function(t,e){t!=e&&n.loadTabs(t||0)},!0)},loadTabs:function(t){},back:function(){1<history.length?history.back():this.backUrl?o.navigate(this.backUrl):this.$destroy()}},{defaults:{title:"",content:"",hideTabs:!1,headerTpl:'    <div class="manage-area-title secondary-title">        <a href="javascript:;" b-on-click="back()" class="back-link">            <i class="btn-back-icon"></i>            <span>返回</span>        </a>        <span class="line-icon">|</span>        <h2 title="{{title || id}}">{{title || id}}</h2>        <div class="manage-area-title-right">            {{> headerRightTpl }}        </div>    </div>'}});n.exports=a}),define("widget/dialog/dialog",function(t,e,n){t("$");var s=t("dialog"),t={show:function(t,e){var n=(t=t||{}).flag||"success",i=t.content||"操作完成",o=t.title||"温馨提示",a={};a[t.okBtnTxt||"确定"]=function(){e&&e(),s.hide()},t.sub_title&&(i="<h4>"+t.sub_title+"</h4>"+i);s.create('<i class="b-'+n+'-icon"></i><div style="width: 300px; margin-left: 10px; vertical-align: middle; display: inline-block;">'+i+"</div>",480,"",{title:o,button:a,defaultCancelCb:t.defaultCancelCb});s.center()}};n.exports=t}),define("widget/editInPlace/editInPlace",function(t,e,n){t=t("qccomponent").getComponent("popup-confirm").extend({$tpl:'    <div data-role="qc-popover" class="tc-15-edit-in-place"         style="display: none;top:-10000px;left:-10000px;z-index:999;position:absolute;background-color: #ffffff"         b-style="style">        <div>            {{> content }}        </div>        <button class="tc-15-btn m" data-confirm b-on-click="hide(true)">{{confirmKey}}</button>        <button class="tc-15-btn m weak" b-on-click="hide()">{{cancelKey}}</button>    </div>'});n.exports=t}),define("widget/errorTips/errorTips",function(t,e,n){var i=t("qccomponent"),o=t("widget/cam/cam"),a=/\(\w+:\w+\)/g,s=/\(([\w|\/]*:){5}.*?\)/g,c=(t("dialog"),{$afterInit:function(){var t=this.content||$(this.$content).text();this.$set("_content",this.format(t))},format:function(t){return(t="undefined"==t?"":t).replace(/^\(.+?\)/,"").trim().replace(a,'<span class="text-success">$&</span>').replace(s,'<span class="text-warning">$&</span>').replace(/^(.+)$/gm,'<p class="rich-text">$1</p>')}}),t=i.extend($.extend({$tpl:'<div class="authority-wrap" style="text-align: left">    <p class="authority-inf text-weak">该操作失败， 请联系您的开发商为您提供帮助。</p>    <p class="authority-tit text-weak" b-if="_content">详细的错误信息如下：</p>    <div class="rich-textarea" b-if="_content">        \x3c!--<div class="permission-code-editor">                <ul class="editor-toolbars">                    <li class="active">                        <a href="##" class="editor-toolbars-item"><i class="icon copy"></i></a>                    </li>                </ul>        </div>--\x3e        <div class="rich-content">{{{ _content }}}</div>    </div></div>'},c)),c={$afterInit:function(){var t=this.content||$(this.$content).text();this.$set("_content",t),this.$watch("type",function(t){this.$set("icon","icon"==t||this.icon)},!0)}},c=i.extend($.extend({$tpl:'<span>    <span b-if="!icon" qc-popover-position?="position" qc-popover="<error-tips>{{_content}}</error-tips>">*****</span>    <i b-if="icon" class="icon-info-red" qc-popover-position?="position" qc-popover="<error-tips>{{_content}}</error-tips>"></i></span>',type:"icon"},c));i.tag("error-tips",t),i.tag("error-help-tips",c),e.ErrorTips=t,e.CamTips=o.CamTips,e.isCamRefused=function(t,e){return t&&(4102==t.code||42==t.code||"AuthFailure"==t.code||"UnauthorizedOperation"==t.code)},e.CamHelpTips=o.CamHelpTips,e.ErrorHelpTips=c}),define("widget/feedback/feedback",function(t,e,n){var i=t("$"),t={init:function(){seajs.use("https://"+QCCDN_HOST+"/qcloud/main/scripts/release/common/feedback/api.js",function(){QCFeedback.init(i('[data-event="feedback"]'),"qcconsole",3)})}};n.exports=t}),define("widget/fieldsManager/fieldsManager",function(t,e,n){var r=t("$"),l=t("util"),d=t("dialog"),a=t("tips"),u='    <div class="customize-column" id="customizeColumn">        <div class="tip_box">            <%=tipText%><span id="limitTip">，最多可勾选<%= maxLimit %>个字段，已勾选<%=defaultsNum %>个。</span>        </div>        <div class="list-wrap clearfix">            <% var field, i = -1; for (field in data) { i++; var required = data[field]["required"]; var isDefault = data[field]["defaults"];                 var eachColNum = eachColNum; %>                <% if (i % eachColNum === 0) { %>                <ul class="list-mod">                <% } %>                <li>                    <input type="checkbox" class=\'tc-15-checkbox <%= required ? "required" : ""%>\' id="customize_field_<%- field %>" value="<%- field %>"                     <% if (required) { %>                        disabled checked                     <% } else { %>                        <% if (selectedFields && selectedFields.length > 0) { %>                            <% if (selectedFields.indexOf(field) >= 0 && !required ) {                             %>                                checked                            <% } %>                        <% } else { %>                            <% if (isDefault && !required ) {                             %>                                checked                            <% } %>                        <% } %>                    <% } %>                    >                    <label for="customize_field_<%- field %>"><%= data[field]["name"] %></label>                </li>                <% if ((i+1) % eachColNum === 0) { %>                </ul>                <% } %>            <% } %>        </div>    </div>',t=function(t){this.options=r.extend({},{eachColNum:6},t),this.options.data&&this.options.cacheKey&&this.bindEvent()};t.prototype={bindEvent:function(){var t=this.options.settingHandle,e=this;t&&t.off("click").on("click",function(){e.showDialog()})},getDisplayFields:function(){return this._getDisplayFieldsData()},showDialog:function(){var t=this,e=this.options,n=e.data,i=e.eachColNum,o=e.cacheKey,a=localStorage[o]||"",s=this._countFields(),c=(s.requiredCount,s.defaultsCount),o=e.maxLimit||s.count,s=e.tipText||"请选择您想显示的列表详细信息，根据您的分辨率",a=l.tmpl(u,{data:n,tipText:s,eachColNum:i,defaultsNum:c,maxLimit:o,selectedFields:a?a.split(","):[]});d.create(a,"540","",{title:e.title||"自定义列表字段",preventResubmit:!0,button:{"确定":function(){t._setFields()}}}),r("#customizeColumn").off("click.fieldsLimit").on("click.fieldsLimit",":checkbox",this._initItemEvent.bind(this)),this._initItemEvent()},_setFields:function(){var t=this.options,e=t.cacheKey,n=t.callback,i=r("#customizeColumn").find('input[type="checkbox"]:checked'),o=[];i.each(function(t,e){e=r(e),o.push(e.val())}),localStorage[e]=o.join(","),n&&n(this._getDisplayFieldsData()),t.withoutTips||a.success("设置成功"),d.hide()},_getDisplayFieldsData:function(){var t,e=this.options,n=e.data,e=e.cacheKey,i=localStorage[e]&&localStorage[e].split(","),o={fields:[],data:{},allWidth:0};for(t in n){var a=n[t].required,s=n[t].defaults;(a||i&&0<=i.indexOf(t)||!i&&s)&&(o.data[t]=n[t],o.fields.push(t),o.allWidth+=n[t].width)}return o},_countFields:function(){var t,e=this.options.data,n=0,i=0,o=0;for(t in e)e.hasOwnProperty(t)&&(n++,e[t].required&&i++,e[t].defaults&&o++);return{count:n,requiredCount:i,defaultsCount:o}},_initItemEvent:function(){var t=this.options,e=this._countFields(),t=t.maxLimit||e.count,e=r("#customizeColumn :checked").length;e<t?r("#customizeColumn :checkbox").not(".required").attr("disabled",!1).siblings("label").removeAttr("data-title"):r("#customizeColumn :checkbox").not(":checked").attr("disabled",!0).siblings("label").attr("data-title","最多勾选"+t+"个字段，已勾选"+e+"个"),r("#limitTip").html("，最多勾选"+t+"个字段，已勾选"+e+"个。")}},n.exports=t}),define("widget/fieldsManager/gridView",function(t,e,n){var r=t("widget/fieldsManager/fieldsManager"),i=t("$"),l=function(e,t){t=(t=t||this.colums).map(function(t){return-1<e.fields.indexOf(t.key)?t.hide=!1:t.hide=!0,t});this.setColums(t),i(document).trigger("updateColumByField")},o={1:"100%",2:"48%",3:"32%"};n.exports=function(a,e,s,c){return{$afterInit:function(){var t=this;t.$watch("colums.length",function(){t.buildFieldsManager()},!0),i(e).click(function(){t.showFieldsManager()})},buildFieldsManager:function(t){var e,n=this,i=n.$get("colums"),o=(e={},i.forEach(function(t){t.hide||0==t.selected||(t.defaults=!0),e[t.key]=t}),e);n.fm=new r({data:o,cacheKey:t||a,eachColNum:s,maxLimit:c,callback:function(t){l.call(n,t,i)}}),l.call(n,n.fm.getDisplayFields(),i)},showFieldsManager:function(t){var e=this.fm.showDialog();t||i(e).find("ul.list-mod").width(o[Math.ceil(this.$get("colums").length/6)])}}}}),define("widget/form/Checkbox",function(t,e,n){var i=t("qccomponent"),t=i.extend({$tpl:'    <label b-attr="attr" b-on="$event" title="{{loading ? (checked ? checkingText : uncheckingText) : (checked ? checkedText : uncheckedText)}}" class="tc-15-switch {{checked ? \'tc-15-switch-checked\' : \'\'}} {{loading ? \'indeterminate\' : \'\'}}" title="{{title}}">        <input type="checkbox" class="tc-15-switch-input" b-model="checked" disabled?="disabled">        <span class="tc-15-switch-helper">{{checked ? checkedText : uncheckedText}}</span>    </label>',$valuekey:"checked"},{defaults:{disabled:!1,loading:!1,checkedText:"已开启",uncheckedText:"已关闭",checkingText:"开启中",uncheckingText:"关闭中"}});i.tag("qc-checkbox",t),n.exports=t}),define("widget/form/NumberStepInput",function(t,e,n){var i=t("qccomponent"),t=i.extend({$tpl:'    <span class="tc-15-input-num {{extraClass}}">        <style>            input::-webkit-outer-spin-button,            input::-webkit-inner-spin-button {                -webkit-appearance: none !important;            }            input[type="number"]{                -moz-appearance:textfield;            }        </style>        <span class="minus {{disableMinus ? \'disabled\' : \' \'}}" tabindex="0" role="button" b-on-click="minus()">-</span>        <input type="number" class="num" b-ref="input" b-on="{change: inputChange.bind(this), keyup: inputKeyup.bind(this)}" style="">        <span class="plus {{disablePlus ? \'disabled\' : \' \'}}" tabindex="0" role="button" b-on-click="plus()">+</span>{{unit}}    </span>',$afterInit:function(){var t=this;t.$set({val:Number(t.initVal),min:Number(t.min),max:Number(t.max)}),t.$set("val",Number(t.initVal)),t.$refs.input.value=t.val,t.checkButtonState(),t.$watch("[step, min, limitMin, max, limitMax, val]",t.checkButtonState.bind(t))},$valuekey:"val",inputChange:function(t){var e=t.target.value;this.limitMin&&e<this.min&&(e=this.min),this.limitMax&&e>this.max&&(e=this.max),t.target.value=Number(e),this.$set("val",Number(e))},inputKeyup:function(t){},minus:function(){this.disableMinus||(this.$set("val",this.val-this.step),this.$refs.input.value=this.val)},plus:function(){this.disablePlus||(this.$set("val",this.val+this.step),this.$refs.input.value=this.val)},checkButtonState:function(){this.$set({disableMinus:this.limitMin&&this.val-this.step<this.min,disablePlus:this.limitMax&&this.val+this.step>this.max})}},{defaults:{initVal:1,step:1,min:1,limitMin:!0,limitMax:!1,extraClass:"m",unit:"台"}});i.tag("qc-number-step",t),n.exports=t}),define("widget/grid/Action",function(t,e,n){var t=t("qccomponent"),a="_clickHooker",i=n.exports=t.extend({constructor:function(t,e){var n;e=e||t,t='    <a b-if="!hidden" href="#" data-role="{{!disabled && act}}" class="oper-item {{disabled ? \'disable\' : \'\'}}" data-title="{{title}}">{{text}}</a>',(n=e.$data||{}).menu?t='    <div b-if="!hidden" class="tc-15-dropdown {{expanded ? \'tc-15-menu-active\' : \'\'}} {{up ? \'tc-15-dropup\' : \'\'}}" data-cell-action-menu>        <a href="javascript:;" class="tc-15-dropdown-link" b-on="{click:expand}">{{text || \'更多\'}}<i class="caret"></i></a>        <ul b-if="expanded" class="tc-15-dropdown-menu">            <div b-template b-repeat="action in menu">                <li role="presentation"><cell-action b-with="action"></cell-action></li>            </div>        </ul>    </div>':"separator"===n.type&&(t='    <i class="black-seperate-line-icon" role="separator"></i>'),e.$tpl=t,i.__super__.constructor.call(this,e)},expand:function(t){var e=this,n=$(document),i=$(t.currentTarget),o=e[a];e.expanded||(e.$set("expanded",!0),o=o||(e[a]={handler:function(){e.$set("expanded",!1),o.destroy()},hook:function(){n.on("click",o.handler)},destroy:function(){n.off("click",o.handler)}}),setTimeout(function(){i.blur(),o.hook()},1))},collapse:function(){var t=this[a];this.expanded&&t&&t.handler()}});i.tag("cell-action",i);var o=".tc-15-dropdown.tc-15-menu-active[data-cell-action-menu]";i.isMenuActivated=function(t){t=(t=$(t||document.body)).find(o);return t.length&&t.is(":visible")},i.hideMenu=function(t){(t=$(t||document.body)).find(o).each(function(t,e){e=e.bee;e&&e.collapse()})}}),define("widget/grid/LocalGrid",function(t,e,n){var o=t("qccomponent").getComponent("grid-view"),i=t("./Action"),a=t("appUtil"),s="_bufferReloadHandler",c="_lastMouseDownPosition";(n.exports=o.extend({renameIconHtml:' <i b-if="!item.$disabled && !item.$loading" class="pencil-icon hover-icon" data-role="rename" data-title="编辑"></i>',events:{"click [data-grid-body] tr [data-role]":function(t){var e,n,i=$(t.currentTarget).attr("data-role")||"",o="onRow"+i.charAt(0).toUpperCase()+i.slice(1),a=this;(a[o]||a.handleAction)&&(e=a.findRowIndex(t),!(n=a.list[e])||!a.actionOnDisabled&&n.$disable||(a.handleAction?a.handleAction(i,n,e,t):a[o](n,e,t))),t.preventDefault()},"mousedown [data-grid-body] tr":function(t){this[c]={x:t.pageX,y:t.pageY}},"click [data-grid-body] tr":function(t){var e,n=this,i=n[c];n[c]=null,i&&(5<Math.abs(i.x-t.pageX)||5<Math.abs(i.y-t.pageY))||!n.onRowClick&&!n.handleAction||$(t.target).closest("tr [data-role]").length||(e=n.findRowIndex(t),!(i=n.list[e])||!n.actionOnDisabled&&i.$disable||(n.handleAction?n.handleAction("click",i,e,t):n.onRowClick(i,e,t)))}},listFn:function(t,e){var n=this,i=Object.keys(t||{});if(2===i.length&&"orderField"in t&&"order"in t)return n.outerSorting?void n.$set({pendingOrderField:t.orderField,pendingOrder:t.order}):(n.$set(t),void n.$set("list",n.localSort(n.list,t.orderField,t.order)));n.outerPaging&&2===i.length&&"page"in t&&"count"in t?n.$set({pendingPage:t.page,pendingCount:t.count}):o.prototype.listFn.apply(this,arguments)},bufferReload:function(t,e){var n=this;(n[s]||(n[s]=a.bufferFn(function(t){n.setData({totalNum:0,searchKey:"",list:[]}),n.listFn(t),n.bufferOpt=null})))(t=t&&$.extend(n.bufferOpt||(n.bufferOpt={}),t))},findRowIndex:function(t){return $(t.currentTarget).closest("tr").attr("data-index")},findRowData:function(t){t=this.findRowIndex(t);return this.list[t]},updateRowData:function(i,n){var t,o=this.list,a=$.isFunction(i)?i:(t=Object.keys(i),function(e){var n=!0;return t.forEach(function(t){e[t]!==i[t]&&(n=!1)}),n});o&&o.length&&o.forEach(function(t,e){a(t)&&o.$set(e,n)})},getActions:function(t,e,n){},localSort:function(t,n,i){var e;return n?(e="function"==typeof n?n:function(t,e){var t=t[n],e=e[n],e=void 0===t?1:void 0===e?-1:(e=isNaN(t)?(t=t.toLowerCase(),e.toLowerCase()):(t=parseFloat(t),parseFloat(e)),i?t<e?-1:1:t<e?1:-1);return e},t.sort(e)):t}},{defaults:{ACTION_TD:'    <div class="oper-cell">        <div b-template b-repeat="action in getActions(item, $parent.$index, $parent.$parent.list.length)">            <cell-action b-with="action"></cell-action>        </div>    </div>',page:1,count:20,hasFirst:!1,initGetData:!1,outerSorting:!1,outerPaging:!0,actionOnDisabled:!1}})).tag("cell-action",i)}),define("widget/i18n",function(t,i,e){var n,o,a,s=t("qccomponent"),c=t("manager"),r=t("constants");i.isI18n=function(){return n=n||new Promise(function(e,t){c.getUserAreaInfo(function(t){e(t&&2==+t.area)},t)})},i.then=function(t,e){return i.isI18n().then(t,e)},i.notI18n=function(){return i.then(function(t){return!t})},i.syncThen=(i.then(function(t){o=!0,a=t}),function(t){return t&&o?Promise.resolve(t(a)):i.then(t)});var l={symbol:["¥{money}","${money}"],code:["{money} CNY","{money} USD"],words:["{money}元","{money}美元"]},d=["CNY","USD"];i.getCurrency=function(t){return t&&0<=d.indexOf(t)?Promise.resolve(t):i.then(function(t){return t?"USD":"CNY"})},i.toI18nMoney=function(e,n,t){return i.getCurrency(t).then(function(t){return(l[n]||l.symbol)[d.indexOf(t)].replace("{money}",e)})},i.getBeeConfig=function(){return{isI18n:i.isI18n,notI18n:i.notI18n,getCurrency:i.getCurrency,toI18nMoney:i.toI18nMoney}},i.bindBee=function(e){e.$set(i.getBeeConfig()),i.then(function(t){e.$set("i18n",t)})},s.tag("money",s.extend({$tpl:"<span>{{toI18nMoney(value, format, currency)}}</span>",toI18nMoney:i.toI18nMoney})),s.tag("i18n-show",s.extend({$tpl:'<span><div b-template b-if="isI18n()">{{>$content}}</div></span>'},{defaults:{isI18n:i.isI18n}})),s.tag("i18n-hide",s.extend({$tpl:'<span><div b-template b-if="notI18n()">{{>$content}}</div></span>'},{defaults:{notI18n:i.notI18n}})),i.then(function(t){t&&Object.keys(r.EIP_REGION_PRICE).forEach(function(t){t=r.EIP_REGION_PRICE[t];t.price=(parseFloat(t.price)/6.9).toFixed(4)})})}),define("widget/login/login",function(e,t,n){var k=e("$"),i=e("sdk"),$=e("net"),S=e("util"),_=e("appUtil"),o=e("event"),s=e("dialog"),T=(e("router"),e("pageManager")),a=e("constants"),c=e("insight"),r=e("widget/login/saas"),l=c.register("login-sdk-init-error",{level:c.EventLevel.Error});var d=function(){if(window.localStorage)try{return window.localStorage.isPrivate=!1,1}catch(t){return}}()?window.localStorage:{getItem:function(){},setItem:function(){}},u="https://"+QCMAIN_HOST+"/login?s_url=",p="https://"+QCMAIN_HOST+"/login/quit?s_url=",h="https://"+QCMAIN_HOST+"/register/completion?s_url=",f=function(){var t=location.href;return u+encodeURIComponent(t)},m=function(){return new Promise(function(e,n){var t;i.has("login-sdk")?i.use("login-sdk").then(function(t){t.init().then(e)["catch"](function(t){l.push(c.captureTrace(t,"login SDK 初始化异常")),n("login sdk load failed")})}):(t=window.qcLoginSdkUrl||"https://"+window.QCMAIN_HOST+"/qccomponent/login/api.js",window.seajs&&window.seajs.use(t,function(){e(window.QCLogin)}))})},g=S.cookie.get("language");m();var v={_uin:"",_nick:"",isVisible:!1,isLoggedOut:!1,init:function(t,e){this.echoObj=t,this.setUin(this.getRealUin()),this.echo(),this.isLogin()&&this.checkLogin(null,function(){e&&e()}),this.bindEvent(),r.sync()},echo:function(t){this.isLogin()?(k(document).trigger("updateUserDisplayName",this.getDisplayName()),this.echoObj&&this.echoObj.html(S.tmpl('<div class="qc-user-inner"><i class="qc-user-icon"></i><span class="qc-user-name"  data-hot="header.user.center" title="<%=name%>"><%=name%></span><i class="qc-nav-arrows"></i><div class="qc-user-info qc-user-panel"><div class="qc-user-panel-inner J-dropdownPanel"></div></div></div>',{name:this.getDisplayName()}))):this.gotoLoginUrl()},gotoLoginUrl:function(){location.href=f()},gotoLogoutUrl:function(){var t;location.href=(t=f(),p+encodeURIComponent(t))},isLogin:function(){return!!this.getUin()},getRealUin:function(){return parseInt(S.cookie.get("uin").replace(/\D/g,""),10)},getUin:function(){return this._uin||this.getRealUin()},setUin:function(t){this._uin=t},getNick:function(){return this._nick||decodeURIComponent(S.cookie.get("nick"))},setNick:function(t){this._nick=t},getDisplayName:function(){return this._displayName||d.getItem("lastDisplayName")||""},setDisplayName:function(t){(this._displayName=t)&&d.setItem("lastDisplayName",t)},show:function(e){this.isVisible||this.isUnloading||this.ACCOUNT_HAS_CHANGED||(this.isVisible=!0,this.clearSession(),m().then(function(t){_.isI18n()?location.href="https://"+window.QCMAIN_HOST+"/login?s_url="+encodeURIComponent(location.href):t.showLoginBox(k.extend({hide_close_icon:1,redirectVerify:!0},e))}),k(document).trigger("logout"))},clearSession:function(){S.cookie.del("skey"),S.cookie.del("p_skey"),S.cookie.del("nodesess","console.qcloud.com"),S.setACSRFToken("")},checkLogin:function(C,I){var x=this,t=!!C;e.async("manager",function(w){w.checkLogin(function(t){if(t){var e=t.userInfo||{},n=t.ownerInfo||{},i=(t.systemTime||(new Date).getTime())-(new Date).getTime(),o=e.nick,a=e.displayName||o,s=e.permProjects,c=e.isShowAllProject,r=e.canManageCloudResource,l=e.globalManageFinancePerm,d=e.globalManageResourcePerm,u=e.globalManageHumanResourcePerm,p=e.isOwner,h=e.isProjectUser,f=e.isAgent,m=e.isAgentClient,g=e.isSpread,v=t.qcloudAppId,b="3"==n.cur_devcheck_state,y=b&&"8"==n.authDetail.authType,t=p||u||e.collUserInfo&&e.collUserInfo.permList&&e.collUserInfo.permList.some(function(t){return t&&"MANAGE_FINANCE"===t.opName});if(!x.checkI18NVersion(e.areaInfo,n.msgLang))return;x.setNick(o),x.setDisplayName(a),S.cookie.set("nick",encodeURIComponent(o)),S.cookie.set("appid",v),S.cookie.set("moduleId",v),S.cookie.set("ownerUin",e.ownerUin),S.cookie.set("systemTimeGap",i);o=S.cookie.get("ownerUin");o&&!/^O.*G$/.test(o)&&S.cookie.set("ownerUin","O"+o+"G"),$.setLandingOwnerUin(S.getOwnerUin()),_.setManagePerm(r),_.setVerified(b),_.setVerifiedOverseas(y),_.setComData({hasFinancePerm:t,projects:s,isShowAllProject:c,canManageCloudResource:r,globalManageFinancePerm:l,globalManageResourcePerm:d,globalManageHumanResourcePerm:u,isOwner:p,isProjectUser:h,isAgent:f,isAgentClient:m,isSpread:g,ownerUin:e.ownerUin,userInfo:e,ownerInfo:n,appId:v,systemClientTimeGap:i}),k(document).trigger("login_data_inited"),w.getAllWhiteList(function(){!1===_.getManagePerm()&&_.setNoPermHtml(),!1===_.isVerified()&&_.setUnverifiedHtml(),!0===_.isVerifiedOverseas()&&_.setVerifiedOverseasHtml()}),w.getUserAreaInfo(function(t){t&&2==t.area&&(_.setI18n(!0),T.checkRoutesI18n())})}x.echo(),I&&I(),k(document).trigger("login-ready"),C&&!I&&location.reload()},function(t){x.checkLoginFail(t,C)},t)})},checkI18NVersion:function(t,e){if(t&&2==t.area){if(!a.INTL_AVAILABLE_LANG[g])return S.cookie.set("language","en"),location.reload(),!1}else if(!a.CN_AVAILABLE_LANG[g])return S.cookie.set("language","zh"),location.reload(),!1;return S.cookie.set("intl",t?t.area:1,null,null,720),!0},checkLoginFail:function(t,e){var n;12==t.code||44==t.code?location.href=(n=location.href,h+encodeURIComponent(n)):99981==t.code||(e?T.renderOops():!function(t){for(var e=[7,9,21,49,50];e.length;)if(t==e.shift())return!0;return!1}(t.code)?T._renderErrorPage("userInfoError"):this.show())},logout:function(t){if(!this.isLoggedOut){if(this.isLoggedOut=!0,S.cookie.del("nick"),S.cookie.del("regionId"),S.cookie.del("projectId"),S.cookie.del("appid"),S.cookie.del("nodesess","console.qcloud.com"),S.cookie.del("refreshSession"),S.setACSRFToken(""),this.setUin(""),this.setNick(""),!t)return this.isUnloading=!0,void this.gotoLogoutUrl();e.async("manager",function(t){t.quitLogin()}),S.cookie.del("uin"),S.cookie.del("luin"),S.cookie.del("skey"),S.cookie.del("p_skey"),e.async("main/api",function(t){t.logoutInner()}),k(document).trigger("logout"),m().then(function(t){t.logout()})}},bindEvent:function(){var a=this;o.addCommonEvent("click",{logout:function(){a.logout()}}),k(window).off("update_project_data").on("update_project_data",function(){a.isLogin()&&a.checkLogin(null)}),k(document).on("accountChanged",function(t,o){var e;a.ACCOUNT_HAS_CHANGED||(a.ACCOUNT_HAS_CHANGED=!0,e=function(){m().then(function(i){setTimeout(function(){try{i.hideLoginBox()}catch(n){}var t=+o===a.ERR_OWNER_HAS_CHANGED,e=t?"当前账号下有其他身份在不同设备、浏览器或选项卡发生了登录操作。请刷新以同步至最新身份，或切换其他账号登录。":"当前页面下有其他账号在不同设备、浏览器或选项卡发生了登录操作。请刷新以同步至最新登录账号，或切换其他账号登录。";s.create(e,"460",null,{title:t?"登录身份发生变更":"登录账号发生变更",struct:"rich",closeIcon:!1,isMaskClickHide:!1,button:{"刷新页面":function(){location.reload()},"登录其他账号":function(){var t="https://"+QCMAIN_HOST+"/login?s_url="+encodeURIComponent(location.href);location.href=t}},defaultCancelBtn:!1,buttonHighlight:[1,0]})},1500)})},i.use("menus-sdk").then(function(t){t.hasAccountChangeEventListener||e()})["catch"](function(){e()}))}),k(window).on("beforeunload",function(){self.ACCOUNT_HAS_CHANGED=!0})},ERR_SESSION_HAS_CHANGED:-8,ERR_OWNER_HAS_CHANGED:-9},b=c.register("login-show",{level:c.EventLevel.Warn});v.show=c.watch(v.show,b,function(t,e){return v.isVisible?null:k.extend({message:"登录框被调用",options:t&&JSON.stringify(t),cookie:document.cookie},e)});b=c.register("logout",{level:c.EventLevel.Info});v.logout=c.watch(v.logout,b,function(t){return v.isLoggedOut?null:{message:"登录框 logout 方法被调用",cookie:document.cookie,silent:t}}),n.exports=v}),define("widget/login/saas",function(t,e,n){var i=t("$"),o=t("util").cookie,a=t("appUtil");n.exports={sync:function(){var t,e,n;t=window.LOGIN_INFO.loginUin,e=o.get("skey"),n=o.get("saas_synced_session"),encodeURIComponent([t,e].join("|"))===n||a.isIntl()||i(window).on("load",function(){var t=document.createElement("iframe");t.style.display="none",t.src="https://"+window.QCMAIN_HOST+"/login/saas/sessionSyncToSaas",document.body.appendChild(t)})}}}),define("widget/market/updatedealstatus",function(t,e,n){var i=t("$"),o=t("dialog"),a=t("tips"),s=t("util"),c=(t("validator"),t("models/market")),r="请根据实际情况填写实施完成的相关信息，如账号密码、授权license、其它变动等，最多能输入300个字符",l='    <div class="dialog_layer_cont">        <div class="whitelist">            <div class="list-wrap clearfix">                <textarea id="deal_remarks" placeholder="请根据实际情况填写实施完成的相关信息，如账号密码、授权license、其它变动等，最多能输入300个字符" style="width: 434px;"></textarea>            </div>        </div>    </div>',t={showSetCompleteDialog:function(t){var e=this,n={dealName:t.dealName||"",status:t.status||0,callback:t.succCallback};o.create(s.tmpl(l),"550","",{title:"完成反馈",preventResubmit:!0,button:{"确定实施完成":function(){e.setDealComplete(n)}}}),this.checkPlaceholderSupport()||o.el.find("#deal_remarks").val(r),e.bindEvent()},showSetDealProcessingDialog:function(t){o.confirm("确认开始实施吗？",function(){c.request({name:"setServiceStatus",data:{dealName:t.dealName||"",status:t.status||0},success:function(){a.success("操作成功"),t.succCallback&&t.succCallback()}})},null,"提示",400,"")},setDealComplete:function(e){var t=o.el.find("#deal_remarks"),n=t.val();if(300<(n=n==r?"":n).length)return a.error("长度不能超过300个字符"),t.focus(),void(o.el&&o.el.find(".btn_unclick").removeClass("btn_unclick"));c.request({name:"setServiceStatus",data:{dealName:e.dealName||"",status:e.status||0,dealRemarks:n},success:function(t){a.success("操作成功"),e.callback&&e.callback(n,t),o.hide()}})},bindEvent:function(){this.checkPlaceholderSupport()||o.el.find("#deal_remarks").blur(function(){""==i(this).val()&&i(this).val(r)}).focus(function(){i(this).val()==r&&i(this).val("")})},checkPlaceholderSupport:function(){return"placeholder"in document.createElement("input")}};n.exports=t}),define("widget/menu/cost/cost",function(t,e,n){t("$"),t("util"),t("appUtil"),t("event");var a=t("manager"),i=(t("dialog"),t("tips"),t("reporter"),t("router"),t("widget/menu/common")),o=(t("widget/mfa/mfa"),t("dataManager")),s='    <div class="qc-user-balance">        <span>            账户余额            <span class="unauth tc-15-bubble-icon tc-15-triangle-align-start" style="display: none;">                <i class="plaint-icon"></i>                <div class="tc-15-bubble tc-15-bubble-top">                    <div class="tc-15-bubble-inner">您暂无财务权限，请联系开发商负责人或有财务权限的协作者了解账户余额</div>                </div>            </span>        </span>        <span class="J-costRecharge"><a href="/account/recharge" style="display:none" data-event="nav" data-auth="account" data-hot="header.user.rechage">立即充值</a></span>        <div class="qc-balance-num">            <span data-field="balance" data-event="nav" href="/account">--</span>            <strong class="currency-unit">元</strong>        </div>    </div>    <ul class="qc-user-voucher">        <li><a href="/account/voucher" data-event="nav" data-field="voucher" data-hot="header.user.voucher">代金券</a></li>        <li><a href="/account/renewal" data-event="nav" data-field="renewal" data-hot="header.user.renewal">续费</a></li>        <li><a href="/account/invoice" data-event="nav" data-field="invoice" data-hot="header.user.invoice" data-auth="checkPassState">发票</a></li>    </ul>    <div class="qc-user-list">        <a class="qc-account-icon-order" href="/deal" data-field="deal" data-event="nav" data-hot="header.user.deal">我的订单</a>        <a class="qc-account-icon-list" style="display:none" data-auth="account" href="/account/fee" data-event="nav" data-hot="header.user.account">收支明细</a>        <a class="qc-account-icon-bill" style="display:none" data-auth="account" href="/expense/bill/overview" data-event="nav" data-hot="header.user.account">资源账单</a>        <a class="qc-account-icon-agreement" style="display:none" data-field="contract" data-auth="account" href="/account/contract" data-event="nav" data-hot="header.user.account.contract">合同管理</a>    </div>    <div class="qc-account-center">        <a class="qc-account-icon-cost" style="display:none" data-auth="account" href="/account" data-event="nav" data-hot="header.user.account">费用中心</a>    </div>',t={init:function(){a.getServiceAccount(function(){})},render:function(e){e.html(s),i.displayAuthNavUser(e);var n=this;a.getUserAreaInfo(function(t){2==t.area&&(e.find("li a[data-field=voucher]").parent().hide(),e.find("li a[data-field=renewal]").parent().hide(),e.find("li a[data-field=invoice]").parent().hide(),e.find("a[data-field=deal]").hide(),e.find("a[data-field=contract]").hide(),e.find(".currency-unit").text("USD"),e.find(".J-costRecharge").hide())}),a.getComData(function(t){t.globalManageFinancePerm?(n.getVouchersNum(e),n.renderBalance(e)):n.renderBalanceNotAuthorize(e)})},onHover:function(e){var n=this;o.set("cache_margin",null),a.getComData(function(t){t.globalManageFinancePerm&&n.renderBalance(e)})},renderBalance:function(o){a.getMargin(function(i){i.noPerm||a.getUserAreaInfo(function(t){var e=(2==t.area?i.available_credit_amount:i.realBalance)||0;e/=100;var n=o.find('[data-field="balance"]'),t=e.toString().split("."),e=t[0],t=(t[1]||"")+"00";n.text(e+"."+t.substr(0,2))})})},renderBalanceNotAuthorize:function(t){t.find(".unauth").show(),t.find(".num").hide(),t.find(".balance-num").css({paddingBottom:"5px"}),t.find(".balance-num em.txt span").css({display:"inline-block",height:"20px",lineHeight:"20px",verticalAlign:"middle"}),t.find(".qc-user-list").css({borderBottom:"none"})},getVouchersNum:function(e){a.getVouchersNum(function(t){t&&0<parseInt(t.totalCount)&&e.find('[data-field="voucher"]').text("代金券 ("+t.totalCount+")")})}};n.exports=t}),define("widget/menu/menucustom/menucustom",function(t,e,n){var r=t("$"),i=t("util"),o=t("insight"),a=t("event"),s=t("appUtil"),c=t("manager"),l=(t("dialog"),t("tips")),d=t("reporter"),u=(t("nmcConfig"),t("widget/menu/product/product")),p=t("config/productmenu"),h=(t("widget/operatelog/util"),t("widget/menu/common")),f=t("sdk"),m=(o=t("insight")).register("shortcut-menu-error",{level:o.EventLevel.Error});seajs.config({alias:{"extlib/jquery/ui/sortable":"//"+QCCDN_HOST+"/qcloud/app/qcconsole_web/dest/jqueryui/jquery-ui-sortable.js"}});var g=null,v=null,b='<div class="qc-nav-tool-left">    <%for(var i=0,item; item=customlist[i]; i++){%>    <li <%if(item.whiteKey || item.auth){%>style="display: none;"<%}%> <%if(item.whiteKey){%>data-nav="nav_<%=item.whiteKey%>"<%}%> <%if(item.auth){%>data-auth="<%=item.auth%>"<%}%> ><a title="<%=item.name%>" href="<%=item.href%>"<%if (item.linkType == "inner") {%>data-event="nav"<%}%><% if (item.target) { %> target="<%=item.target%>" <% } %><% if (item.hotTag) { %> data-hot="<%=item.hotTag%>" <% } %>><%=item.name%></a></li>    <%}%></div>',y={init:function(){var e,t=/MSIE (\d+)/i.test(navigator.userAgent),n=parseInt(RegExp.$1,10);t&&n<11?this.initLegalcy():(e=this,f.use("menus-sdk").then(function(t){return e.initBySdk(t)}).then(function(){o.stat("console:shortcut-menu-ready")})["catch"](function(t){console.error(t),m.push(o.captureTrace(t,"快捷菜单 SDK 初始化异常")),e.initLegalcy()}))},initBySdk:function(t){var e=r(".qc-header-shortcut").get(0);return t.shortcut.init(e)},initLegalcy:function(){var t=this;v=r(".J-headerCustom"),t.getMenuData(function(){"zh"==window.VERSION&&(t.renderPopup(),t.refreshNavCustomItem(),t.initOtherEvent(),t.initSortable()),r(document).trigger("nav_custom_render_over")}),t.bindEvent()},bindEvent:function(){var e=this;a.addCommonEvent("click",{"nav-custom-setting":function(t){d.click("header.custom"),e.showPopup()},"nav-commit-custom":function(t){e.saveCustomMenus(function(t){t?(l.success("保存成功"),e.hidePopup()):l.error("保存失败，请重试")})},"nav-custom-close":function(){d.click("header.custom.close"),e.hidePopup()}}),r(window).on("resize.headerCustom",function(){e.adjustSelWidth()}),r(window).on("resize.headerCustomAutoHeight",s.throttle(function(){e.autoHeight()},50))},renderPopup:function(){var t=window.VERSION,n=this;u.transformData(p,t,function(t){v.find(".J-dropdownPanel").html(i.tmpl('<div class="qc-shortcut-menu-inner"><div class="qc-shortcut-menu-title J-customNumTitle">固定至导航 (0/10)</div><div class="menu-list-all J-customProductList"><% for (var i = 0, cnt = 0, col; col = data.all[i]; ++i) { %><div class="menu-list-col"<% if (col.whiteKeyMenuCount === col.MenuCount) { %>style="display:none"<% } %>><% for (var j = 0, category; category = col[j]; ++j, ++cnt) { %><div class="menu-area"<% if (category.whiteKeyMenuCount === category.menu.length) { %>style="display:none"<% } %><% if (isMobile) { %>data-event="menu_area_mobile"<% } %>><div  class="menu-area-tit"><em><%=category.title%></em></div><div class="menu-area-con" aria-labelledby="product_list_title_<%=cnt%>" tabindex="0" role="list"><% for (var k = 0, item; item = category.menu[k]; ++k) { %><div class="menu-item"<% if (item.whiteKey) { %>data-nav="nav_<%=item.whiteKey%>"<% } %><% if (item.auth) { %>data-auth="<%=item.auth%>"<% } %><% if (item.whiteKey || item.auth) { %>style="display: none"<% } %>><div class="menu-item-tit"><label><input type="checkbox" class="menu-item-checkbox" value="<%=item.href%>"><%=item.name%></label></div></div><% } %></div></div><% } %></div><% } %></div>        <div class="qc-shortcut-menu-tool">            <a href="javascript:;" data-event="nav-commit-custom" class="qc-shortcut-save">保存</a><a href="javascript:;" data-event="nav-custom-close" class="qc-shortcut-cancel">取消</a>        </div></div>',{data:t,isMobile:i.isMobile()})),n._displayLogic(v);var e={};v.find(".menu-item-checkbox").each(function(){var t=r(this);e[t.val()]&&t.closest(".menu-item").hide(),e[t.val()]=!0}),v.find(".menu-list-col").each(function(t,e){var e=r(e),n=!1;e.children().each(function(t,e){"none"!==r(e).css("display")&&(n=!0)}),n||e.hide()}),v.find(".J-headerCustomSet").parent().show()})},showPopup:function(){r("#topnav").addClass("qc-header-shortcut-select").trigger("header_right_tool_show"),v.addClass("qc-nav-select"),this.refreshCheckStatus(),this.refreshCustomNumTitle(),v.find(".J-headerCustomLink").sortable&&v.find(".J-headerCustomLink").sortable("enable"),this.autoHeight()},hidePopup:function(){this.refreshNavCustomItem(),v.removeClass("qc-nav-select"),r("#topnav").removeClass("qc-header-shortcut-select")},initOtherEvent:function(){var e=this;v.find('.J-customProductList [type="checkbox"]').on("change",function(){if($checkbos=r(this),path=$checkbos.val(),$checkbos.is(":checked")){var t=e.findProductItemByPath(path);g.customlist_sel.push(t)}else{t=e.fundCustomSelItemIndexByPath(path);if(-1==t)return;g.customlist_sel.splice(t,1)}e.refreshCustomList()})},refreshCustomNumTitle:function(){var t=v.find('.J-customProductList [type="checkbox"]:visible:checked');v.find(".J-customNumTitle").text("固定至导航 ("+t.length+"/10)")},refreshCheckStatus:function(){var t=g.customlist_sel,n=v.find('.J-customProductList [type="checkbox"]');r.each(t,function(t,e){n.each(function(){var t=r(this);t.val()==e.href&&t.prop("checked",!0)})}),this.refreshCheckMaxStatus()},refreshCheckMaxStatus:function(){var t=v.find('.J-customProductList [type="checkbox"]').not(":checked");10==v.find('.J-customProductList [type="checkbox"]:visible:checked').length?t.prop("disabled",!0).parent().addClass("disabled").parent().attr("data-title","最多支持选择10个"):t.prop("disabled",!1).parent().removeClass("disabled").parent().attr("data-title","")},refreshCustomList:function(){this.refreshCustomNumTitle(),this.refreshCheckMaxStatus(),this.refreshNavCustomItem({customlist:g.customlist_sel})},refreshNavCustomItem:function(t){t=i.tmpl(b,t||g);v.find(".J-headerCustomLink").html(t),this._displayLogic(v.find(".J-headerCustomLink")),this.adjustSelWidth()},updateCustomSelSort:function(){var n={};r.each(g.customlist_sel,function(t,e){n[e.href]=e}),v.find(".J-headerCustomLink a").each(function(t,e){e=r(e).attr("href");n[e]&&(n[e]._uiidx=t)}),g.customlist_sel.sort(function(t,e){return parseInt(t._uiidx)-parseInt(e._uiidx)})},findConfigItemById:function(t){return this.findItemById(t,g.configlist)},findProductItemByPath:function(n){var i;return r.each(p.all,function(t,e){r.each(e,function(t,e){r.each(e.menu,function(t,e){if(e.href==n)return i=e,!1})})}),i&&(i.id=i.href),i},fundCustomSelItemById:function(n){var i;return r.each(g.customlist_sel,function(t,e){if(e.id==n)return i=e,!1}),i},fundCustomSelItemIndexByPath:function(n){var i=-1;return r.each(g.customlist_sel,function(t,e){if(e.href==n)return i=t,!1}),i},findItemById:function(n,t){var i;return r.each(t,function(t,e){r.each(e.menu,function(t,e){if(e.id==n)return i=e,!1})}),i},render:function(){},saveCustomMenus:function(e){var t={name:"用户自定义的链接列表",datalist:g.customlist_sel};c.updateUserDefined({regionId:s.getRegionId(),code:"CONSOLE_NAV_DEFINED_LIST",content:JSON.stringify(t)},function(t){g.customlist=[].concat(g.customlist_sel),e&&e(!0)},function(){e&&e(!1)})},getMenuData:function(e){var n=this;g?e&&e():this.queryMenuData().then(function(t){n.logicMenuData(t),g=t,e&&e()})},queryMenuData:function(){var e=this,i=r.Deferred(),o={configlist:[],customlist:[],customlist_sel:[]};return h.getNavConfigData(function(t){var n;t.CONSOLE_NAV_DEFINED_LIST?((t=t.CONSOLE_NAV_DEFINED_LIST).config&&r.isArray(t.config.datalist)&&(o.configlist=t.config.datalist),t.defined&&r.isArray(t.defined.datalist)&&(n={},r.each(t.defined.datalist,function(t,e){null!=e&&null!=e.id&&null!=e.href&&(n[e.href]||(n[e.href]=1,o.customlist.push(e)))}),o.customlist_sel=[].concat(o.customlist)),i.resolve(o),e._reportDataStat(o)):i.resolve(o)}),i},autoHeight:function(){var t=41+r(".J-customNumTitle").height()+r(".J-customProductList").height()+r(".qc-shortcut-menu-tool").height();v.find(".J-dropdownPanel").height(Math.min(r(window).height()-50,t))},logicMenuData:function(i){var o=this,a=[],s={};r.each(i.customlist,function(t,e){var n,e=e.id;/^\d+$/.test(e)&&(n=o.findItemById(e,i.configlist))&&(e=n.href),(n=o.findProductItemByPath(e))&&!s[n.href]&&(s[n.href]=1,a.push(n))}),i.customlist=a,i.customlist_sel=[].concat(i.customlist)},_displayLogic:function(t){for(var e,n=[],i=0;e=p.all[i];i++)for(var o,a=0;o=e[a];a++)for(var s,c=0;s=o.menu[c];c++)s.whiteKey&&n.push(s.whiteKey);h.displayWhiteListNav(t,n),h.displayAuthNavAllProduct(t)},initSortable:function(){var e=this;t.async("extlib/jquery/ui/sortable",function(){var n=0,i=!0,t=v.find(".J-headerCustomLink");t.sortable&&t.sortable({cancel:"i",cursor:"move",tolerance:"pointer",revert:!1,placeholder:"sortable-placeholder",items:"li",update:function(){e.updateCustomSelSort()},remove:function(t){},receive:function(){n=1},out:function(t,e){n=0,i||e.placeholder.appendTo(e.item.parent())},over:function(){i=!(n=1)},beforeStop:function(t,e){n||e.item.appendTo(e.item.parent()),i=!0},start:function(t,e){e.placeholder.width(e.item.width()-2)},sort:function(t,e){}}),t.sortable&&t.sortable("disable")})},adjustSelWidth:function(){if(this.canvasSupport()&&!i.isMobile())for(var a=this,t=v.find(".J-headerCustomLink li").toArray(),s=v.width()-60,c=20;t=function(t){var i=s/t.length,o=[];return r.each(t,function(t,e){e=r(e);var n=a.measureText(e.find("a").text())+c;n<i?(e.css("width",n),s-=n):o.push(e)}),o.length==t.length&&(r.each(o,function(t,e){e.css("width",i)}),o=[]),o}(t),t.length;);},measureText:function(t){if(this.measureText.textWidthMap||(this.measureText.textWidthMap={}),this.measureText.textWidthMap[t])return this.measureText.textWidthMap[t];var e=document.createElement("canvas").getContext("2d"),n=v.find(".J-headerCustomLink li:eq(0) a")[0],i=this.getCss(n,"font-size");i+=" "+this.getCss(n,"font-family"),e.font=i;e=e.measureText(t);return this.measureText.textWidthMap[t]=e.width+2,this.measureText.textWidthMap[t]},getCss:function(t,e){return window.getComputedStyle(t,null).getPropertyValue(e)},canvasSupport:function(){return!document.createElement("testcanvas").getContext},_reportDataStat:function(t){t=t&&t.customlist&&t.customlist.length||0;o.stat("console:header.fastlink.usage",{int_count:t},!0)}};n.exports=y}),define("widget/menu/support/support",function(t,e,n){var i=t("$"),o=(t("util"),t("manager")),a=t("event"),s=t("reporter"),c=t("router"),r=t("widget/feedback/feedback"),t={render:function(t){t.html('    <div>        <a href="/workorder/category" data-event="new-workorder" data-hot="header.support.new">发起工单</a>        <a href="/workorder" data-event="nav" data-hot="header.support.ticket">我的工单<span id="topTktNum" style="display:none"></span></a>    </div>'),r.init(),a.addCommonEvent("click",{zxkf:function(){window.open("http://crm2.qq.com/page/portalpage/wpa.php?uin=800033878&f=1&ty=1&ap=000018{$SP|146|295$}&as=2&v=2&sp==")},"new-workorder":function(){s.reportEvent("mc_workorder_entry",{url:location.href}),c.navigate(i(this).attr("href"))}}),o.getTicketNum(function(t){t&&t.num&&i("#topTktNum").text(" ("+t.num+")").show()}),"zh"!=window.VERSION&&i('a[data-event="feedback"]').hide()}};n.exports=t}),define("widget/menu/user/user",function(t,e,n){var i,o,a=t("$"),s=t("util"),c=t("appUtil"),r=t("event"),l=t("manager"),d=t("dialog"),u=(t("tips"),t("reporter"),t("router")),p=t("widget/menu/common"),h=(t("widget/mfa/mfa"),t("qccomponent"),t("models/iaas")),f=(t("tips"),t("nmcConfig"),'    <a class="qc-user-info-account" href="/developer" data-event="nav" data-hot="header.user.developer">      账号信息      <% if (showUnauthLabel) { %>      <span class="qc-user-info-status">（未实名）</span>      <% } %>    </a>    <a class="qc-user-info-safe" href="/developer/security" data-event="nav" data-hot="header.user.security">安全设置</a>    <a class="qc-user-info-visit" href="/cam/overview" data-event="nav" data-hot="header.user.permission">访问管理</a>    <a class="qc-user-info-tag" href="/tag/resources" data-event="nav" data-hot="header.user.tag" class="J-tagEntry">标签</a>    <a class="qc-user-info-project" href="/project" style="display:none" data-auth="project" data-event="nav" data-hot="header.user.project">项目管理</a>    <a class="qc-user-info-channel" href="/partners" style="display:none" data-auth="returnAmount" data-event="nav" data-hot="header.user.agent">渠道管理</a>    <a class="qc-user-info-cps" href="/spread" style="display:none" data-auth="cps" data-event="nav" data-hot="header.user.cps">CPS 推广</a>    <a class="qc-user-info-facilitator" href="/serviceprovider" style="display:none" data-auth="isServiceAccount" data-event="nav" data-hot="header.user.yunwei">服务商管理</a>    <a style="display:none" data-event="changeVersion"></a>    <a class="qc-user-info-api" href="/cam/capi" style="display:none" data-field="capi" data-event="nav" data-hot="header.user.capi">访问密钥</a>    <a class="qc-user-info-port" style="display:none" data-event="unlock">安全管控</a>    <span class="qc-user-info-line"></span>    <a class="qc-user-info-change" style="display: none;" data-event="changeAccount">切换用户身份</a>    <a class="qc-user-info-logout" data-event="logout">退出</a>'),m='    <div class="switch-outline">        <% if (me) { %>        <h4>我创建的开发商</h4>        <div class="switch-details" style="margin-bottom: 15px;">            <table class="switch-details-tb">                <colgroup>                    <col class="tc-15-table-col1" style="width:10%">                    <col class="tc-15-table-col2" style="width:75%">                    <col class="tc-15-table-col3" style="width:15%">                </colgroup>                <tbody>                <tr>                    <td><input type="radio" name="itemAccount" class="tc-15-radio" id="myAccount"                        <%if(me.isDefault){%>checked<%}%> value="<%=me.uin%>" />                    </td>                    <td><label class="entity-name" for="myAccount"><%=me.display%></label></td>                    <td></td>                </tr>                </tbody>            </table>        </div>        <%}%>        <% if (list && list.length) { %>        <h4>我协作的开发商</h4>        <div class="switch-details">            <table class="switch-details-tb">                <colgroup>                    <col class="tc-15-table-col1" style="width:10%">                    <col class="tc-15-table-col2" style="width:75%">                    <col class="tc-15-table-col3" style="width:15%">                </colgroup>                <tbody>                <% for(var i=0,item; item=list[i]; i++){ %>                <tr>                    <td><input type="radio" name="itemAccount" class="tc-15-radio" id="itemAccount_<%=i%>"                        <%if(item.isDefault){%>checked<%}%> value="<%=item.uin%>">                    </td>                    <td><label class="entity-name" for="itemAccount_<%=i%>"><%=item.display%></label>                    </td>                    <td></td>                </tr>                <% } %>                </tbody>            </table>        </div>        <%}%>    </div>',t={init:function(){l.getServiceAccount(function(){}),this.getAccountOrDeveloperList(),this.getUnlockBlackList()["catch"](function(){}),this.checkIsBigCustomer()},render:function(e){var t="zh"===window.VERSION&&window.LOGIN_INFO&&!window.LOGIN_INFO.identity,t=s.tmpl(f,{showUnauthLabel:t});e.html(t),p.displayAuthNavUser(e),this.getAccountOrDeveloperList().then(function(t){t&&t.list&&0<t.list.length&&e.find('[data-event="changeAccount"]').show()}),l.getUserAreaInfo(function(t){2==t.area&&(e.find('a[data-auth="project"]').hide(),e.find("a[data-field=capi]").show())}),e.find('a[data-event="unlock"]').show(),"zh"!=window.VERSION&&e.find(".J-tagEntry").hide(),this.initEvents(e)},initEvents:function(t){var e=this;r.bindCommonEvent(t.find('[data-event="changeAccount"]').get(0),"click",{changeAccount:function(){c.updateUserInfo();var t=location.protocol+"//"+location.hostname+u.debug+"/developer";c.isI18n()?location.href="//intl.cloud.tencent.com/login/forward?s_url="+encodeURIComponent(t):window.QCMAIN_HOST?location.href="//"+QCMAIN_HOST+"/login/forward?s_url="+encodeURIComponent(t):location.href="//cloud.tencent.com/login/forward?s_url="+encodeURIComponent(t)}}),r.bindCommonEvent(t.find('[data-event="unlock"]').get(0),"click",{unlock:function(){e.unlock()}})},unlock:function(){var t={title:"25端口解封申请",defaultCancelBtn:!1,isMaskClickHide:!1,button:{"确定":function(t){d.defaultCancel()}}};this.getUnlockBlackList().then(function(){u.navigate("/secctrl")},function(){d.create('您暂无权限申请25端口解封，如有疑问，请提<a href="/workorder/category" data-event="new-workorder" data-hot="header.support.new">工单申请</a>。',"500","",t)})},getUnlockBlackList:function(){return o=o||new Promise(function(e,n){l.getAllWhiteList(function(t){t&&t.NOT_UNLOCK_SMTP?n():e(!0)})})},checkIsBigCustomer:(i=o=null,function(){return i=i||new Promise(function(t,e){l.getUserData({fields:["isBigCustomer"]},t,function(t){i=null,e(t)})})}),getQuote:function(){return h.apiRequest({regionId:this.regionId,serviceType:"dfw",cmd:"AllowVMSTMP",data:{vms:instanceIdList}})},changeAccount:function(){this.getAccountList().then(function(t){var t=s.tmpl(m,t),e=d.create(t,"480","",{title:"切换用户身份",button:{"切换":function(){var t=e.find('[name="itemAccount"]:checked').val();d.hide(),l.switchDeveloperAccount({ownerUin:t},function(t){c.updateUserInfo();var e=location.protocol+"//"+location.hostname+u.debug+"/developer";window.QCMAIN_HOST?location.href="//"+QCMAIN_HOST+"/login/forward?s_url="+encodeURIComponent(e):location.href="//www.qcloud.com/login/forward?s_url="+encodeURIComponent(e)})}},defaultCancelCb:function(){}})})},getAccountList:function(){if(this.developerListDefer)return this.developerListDefer;var o=this.developerListDefer=a.Deferred(),e=o.reject.bind(o);return l.getComData(function(t){var i=t.userInfo.uin;l.getDeveloperAccountList({},function(t){if(!t||!t.list||!t.list.length)return o.resolve();if(t.list.forEach(function(t){t.display=t.displayName||t.account||t.uin}),t.me=null,t.list)for(var e=0;e<t.list.length;e++){var n=t.list[e];if(n.uin==i){t.me=n,t.list.splice(e,1);break}}o.resolve(t)},e)},e),o},getAccountOrDeveloperList:function(){var e=this;return e.getAccountOrDeveloperListDefer||(e.getAccountOrDeveloperListDefer=a.Deferred(),l.getComData(function(){l.getDeveloperAccountList({version:2},function(t){e.getAccountOrDeveloperListDefer.resolve(t)},function(){e.getAccountOrDeveloperListDefer.reject(),e.getAccountOrDeveloperListDefer=null})}),e.getAccountOrDeveloperListDefer.promise())}};n.exports=t}),define("widget/monacoEditor/monacoEditor",function(t,e,n){var a=t("qccomponent"),s=t("$"),c='<iframe src="//{{cdnHost}}/qcloud/app/qcconsole_web/vs/index.html" id="{{iframeId}}" b-ref="iframe" frameborder="0" name="zh-cn"  width="100%" height="100%"></iframe>',r='<div><style type="text/css">.ie-editor{    margin-left: 20px;    max-width: 780px;    max-height: 300px;    width: 780px;    height: 300px;    overflow: auto;    border: none;    outline: none;    resize: none;    background-color: #fff;}.readonly .ie-editor{    background-color:#f2f2f2;    cursor: not-allow}</style><textarea class="ie-editor" disabled?="disabled" b-ref="txt" b-model="value"></textarea></div>';function i(t,i){var o,e;t.containerId&&t.ORIGINS&&t.ORIGINS.length&&t.ACTIONS&&t.language&&(this.isSupportWorker="function"==typeof window.Worker&&!t.debug,this.options=s.extend({},{language:"",containerId:null,ORIGINS:[],ACTIONS:{}},t),e=(o=this).isSupportWorker?c:r,t=a.extend({}),this.bee=new t(e,{cdnHost:QCCDN_HOST,iframeId:"iframe-editor-"+(new Date).getTime(),value:o.options.value}),this.render(),this.isSupportWorker?(this.editorFrameWindow=this.bee.$refs.iframe.$el.contentWindow,s(window).off("message.cam").on("message.cam",function(t){var e=t.data||t.originalEvent.data,n=t.origin||t.originalEvent.origin,t=e.action;if(o.options.ORIGINS.some(function(t){return t===n})&&e.data){if("documentReady"===t)return o.setDefaultOptions(),void(i&&i());"updateValue"===t&&o.updateValue(e.data),"updateOptions"===t&&o.updateOptions(),o.options.ACTIONS[t]&&o.options.ACTIONS[t](e)}})):(this.bee.$set("disabled",this.options.readOnly),i&&i()))}i.prototype={render:function(){s("#"+this.options.containerId).html(this.bee.$el)},getIframe:function(){return this.isSupportWorker?this.bee.$refs.iframe:null},updateOptions:function(t){this.isSupportWorker&&this.editorFrameWindow.postMessage({action:"updateOptions",data:{options:t}},"*")},setDefaultOptions:function(){this.editorFrameWindow.postMessage({action:"setDefaultOptions",data:{readOnly:this.options.readOnly,language:this.options.language,value:this.options.value,schema:this.options.schema}},"*")},setReadOnlyStatus:function(t){this.isSupportWorker?this.editorFrameWindow.postMessage({action:"setReadOnlyStatus",data:{readOnly:t}},"*"):this.bee.$set("disabled",t)},setModify:function(){this.setReadOnlyStatus(!1)},setReadOnly:function(){this.setReadOnlyStatus(!0)},updateValue:function(t){this.value=t.value,this.bee.$set("value",t.value)},getValue:function(){return this.bee.value||this.options.value},setValue:function(t){this.isSupportWorker?this.editorFrameWindow.postMessage({action:"setValue",data:{value:t}},"*"):this.bee.$set("value",t)},destroy:function(){self.isSupportWorker&&s(this.bee.$refs.iframe.$el).remove()}},n.exports=i}),define("widget/msg/msg",function(t,e,n){var s=t("$"),i=t("util"),o=(t("event"),t("manager"),t("router"),t("tips")),a=t("models/message"),c=t("widget/operatelog/emitter"),r=t("./util"),l=t("appUtil"),d=t("models/api"),t=t("insight"),u=t.register("report-deprecated-module",{level:t.EventLevel.Info}),p='<div class="qc-tool-inner" id = "thisIsMsgCenter"><div class="qc-tool-head J-message-head"><h3 class="qc-tool-head-title">消息中心</h3><a class="qc-tool-more" href="/message" data-event="nav" data-hot="header.message.more">查看更多</a><a class="qc-tool-head-close J-closeMsgIcon"><i class="qc-close-panel"></i></a></div><div class="qc-tool-body J-message-body"><div class="qc-nav-message-list" id="message_list"><div class="qc-tool-info"><i class="log-loading-icon"></i>加载中</div></div></div></div>',h='<%for(var i=0,item; item=list[i]; i++){%><div class="qc-nav-message-inner" data-msgid="<%=item.msg_id%>"><div class="qc-nav-message-div"><span class="qc-nav-message-text"><%=item.category%></span><span class="qc-nav-message-time"><%=item._timedesc%></span></div><div class="qc-message-dd-hover J-messageRead" data-msgid="<%=item.msg_id%>"><a href="javascript:;">标记已读</a></div><a href="/message/detail/<%=item.msg_id%>" title="查看站内信详情"><%=item.titile%></a></div><%}%>',t={init:function(t){u.push({message:"模块 widget/msg/msg 即将下线",module:"widget/msg/msg"});var e=this;t=t||{},e.$wrapEl=s(t.wrapEl);t=s(p);e.$wrapEl.find(".J-dropdownPanel").append(t),e.$list=e.$wrapEl.find("#message_list"),e.on("refresh",function(){e.refresh()}),e.needRefreshList=!0,e.updateStatus(),e.on("showpopup",function(){e.needRefreshList&&(e.needRefreshList=!1,e.renderList(),e.updateStatus())}),e.bindEvent()},reset:function(){this.timerDelay=100},showPopup:function(){s("#topnav").trigger("header_right_tool_show"),this.$wrapEl.addClass("qc-nav-select"),this.emit("showpopup"),this.autoHeight()},hidePopup:function(){this.$wrapEl.removeClass("qc-nav-select")},bindEvent:function(){var e=this;e.$wrapEl.on("click",".J-headerMsgIcon",function(){e.$wrapEl.hasClass("qc-nav-select")?e.hidePopup():e.showPopup()}),e.$wrapEl.on("click",".J-closeMsgIcon",function(){e.hidePopup()}),e.$wrapEl.on("click",".J-messageRead",function(t){t.stopPropagation();t=s(this);return e.markMsg(t),!1}),s(window).on("resize",l.throttle(function(){e.autoHeight()},250)),s("#topnav").on("header_right_tool_show",function(){e.hidePopup()})},refresh:function(){this.renderList(),this.updateStatus()},renderList:function(){var e=this;e.getList().then(function(t){0!=(t=t.slice(0,18)).length?(e.decorateData(t),t=i.tmpl(h,{list:t}),e.$list.html(t)):e.showEmpty()})},getList:function(){return d.request({serviceType:"message",cmd:"DescribeSiteMsg",data:{CategoryId:"0",IsRead:0,Offset:0,Limit:18,Lang:window.VERSION,Version:"2018-12-25"}},{secure:!0,tipErr:!1,version:3}).then(function(t){t=t&&t.data&&t.data.Response.SiteMsgList;return Array.isArray(t)?t:[]})},showEmpty:function(){this.$list.html('<div class="qc-tool-info">暂无未读消息</div>')},markMsg:function(e){var n=this,i=e.attr("data-msgid"),i=parseInt(i,10);n.requestMesssageCgi("msgRead",{cids:[i]}).then(function(t){t&&-1==t.failed_msg.indexOf(i)?e.closest(".qc-nav-message-inner").fadeOut("slow",function(){e.remove(),n.refresh()}):o.error("消息标记已读失败")})},decorateData:function(t){t&&0!=t.length&&s.each(t,function(t,e){e._timedesc=r.getTimeDesc(e.time)})},requestMesssageCgi:function(t,e){e=e||{};var n=s.Deferred();return a.request({name:t,data:e,success:function(t){t?n.resolve(t):n.resolve(null)},fail:function(t){n.resolve(null)}}),n},updateStatus:function(){s(document).trigger("updateMessage")},autoHeight:function(){var t=s("#thisIsMsgCenter").find(".J-message-head").outerHeight(!0),e=s("#thisIsMsgCenter").find(".J-message-body"),n=parseInt(e.css("padding-top"))||0,i=parseInt(e.css("padding-bottom"))||0,o=this.$wrapEl.find(".J-dropdownPanel"),a=s(window).height()-50;o.height(a),e.height(a-n-i-t)},echo:function(t){this.updateStatus()}};c(t),n.exports=t}),define("widget/msg/util",function(t,e,n){var i={getTimeDesc:function(t){var e=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{2}):(\d{2})(?::(\d{1,2}))?$/.exec(t);if(!e)return t;var n=+e[1],i=+e[2]-1,o=+e[3],a=+e[4],s=+e[5],e=+(e[6]||0),s=new Date(n,i,o,a,s,e),e=new Date,s=Math.round((e-s)/1e3);return 86400<s?t:3600<s?Math.round(s/3600)+"小时前":60<s?Math.round(s/60)+"分钟前":s+"秒前"}};n.exports=i}),define("widget/operatelog/config",function(t,e,n){n.exports={businessIdConstants:{CVM:1,IMAGE:3,CREATE_CVM:2},businessMap:{1:{name:"云主机"},3:{name:"镜像"}},statusMap:{0:{desc:"成功",textClassName:"finish-task"},1:{desc:"失败",textClassName:"unusual-task"},2:{desc:"处理中",textClassName:"loading-task"},"-99":{desc:"未知",textClassName:"loading-task"}},REGIONMAP_R:{gz:1,sh:4,hk:5,ca:6,shjr:7},businessCommandList:[{id:-1,label:"不限",commands:[{id:-1,code:"",label:"不限"}]},{id:1,label:"云主机",commands:[{id:-1,label:"不限"},{id:7,label:"开机"},{id:8,label:"关机"},{id:1,label:"重启"},{id:3,label:"重置密码"},{id:5,label:"重装系统"},{id:9,label:"配置调整"},{id:10,label:"关联密钥"},{id:17,label:"生产子机"},{id:18,label:"修改名称"},{id:19,label:"修改机器所属项目"},{id:21,label:"销毁子机"}]},{id:3,label:"镜像",commands:[{id:-1,label:"不限"},{id:4,label:"创建镜像"},{id:16,label:"删除镜像"}]},{id:4,label:"VPC",commands:[{id:-1,label:"不限"},{id:100,label:"新建私有网络"},{id:101,label:"删除私有网络"},{id:102,label:"修改私有网络"},{id:103,label:"新建子网"},{id:104,label:"删除子网"},{id:105,label:"修改子网"},{id:106,label:"修改子网关联路由表"},{id:107,label:"删除路由表"},{id:108,label:"修改路由表内容"},{id:109,label:"升级续费VPN网关"},{id:110,label:"修改vpn网关"},{id:111,label:"新建对端网关"},{id:112,label:"删除对端网关"},{id:113,label:"修改对端网关"},{id:5e3,label:"创建vpn通道"},{id:5001,label:"更新vpn通道"},{id:5002,label:"删除vpn通道"},{id:5003,label:"创建vpn网关"}]}],statusList:[{id:-1,label:"不限"},{id:0,label:"成功"},{id:1,label:"失败"},{id:2,label:"执行中"}]}}),define("widget/operatelog/emitter",function(t,e,n){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.one=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<i.length;o++)if((n=i[o])===e||n.fn===e){i.splice(o,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var i=0,o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,e);return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length},n.exports=i}),define("widget/operatelog/floattips",function(t,e,n){var o=t("$"),i=t("util"),a=t("./emitter"),t=t("./util"),s='<p class="tc-15-msg <%=className%>"><span class="tip-info"><i class="<%=iconClassName%>"></i><span class="msg-span"><%=msg%></span></span><a href="javascript:;" class="logs-btn-close _close" title="关闭"></a></p>',c={0:{text:"成功",className:"succeed",iconClassName:"m-success-icon"},1:{text:"失败",className:"error",iconClassName:"m-error-icon"},2:{text:"处理中",className:"warning",iconClassName:"m-restart-icon"}};function r(){this.$tipsContainer=null}t.inherit(r,a),o.extend(r.prototype,{init:function(t){t=t||{},this.$tipsContainer=t.$container},handleTaskArr:function(t){var n=this;this.$tipsContainer&&(t=t||[],o.each(t,function(t,e){n.showTaskTip(e)}))},showTaskTip:function(t){var e,n=c[t.status];n&&((e=o.extend({},n)).msg=t.command_desc+n.text,this.displayTip(e))},displayTip:function(t){var e;this.$tipsContainer&&(t=i.tmpl(s,t),(e=o(t)).on("click","._close",function(t){e.fadeOut("normal",function(){e.remove()})}),e.hide(),this.$tipsContainer.append(e),e.fadeIn(),setTimeout(function(){e.fadeOut("normal",function(){e.remove()})},5e3))},showNoticeTip:function(t,e){t=t||{};var n,i=c[e=void 0===e?0:e];i&&((n=o.extend({},i)).msg=t.msg+i.text,2==e&&t.msg&&t.msg.indexOf("中")==t.msg.length-1&&(n.msg=t.msg),this.displayTip(n))},showTaskSuccessTip:function(t){this.showNoticeTip(t,0)},showTaskErrorTip:function(t){this.showNoticeTip(t,1)},showTaskProcessTip:function(t){this.showNoticeTip(t,2),this.emit("addtask",t)}}),n.exports=new r}),define("widget/operatelog/operatelog",function(t,e,n){var a=t("$"),i=t("util"),o=(t("event"),t("tips")),s=t("manager"),c=(t("router"),t("reporter"),t("./emitter")),r=t("./util"),l=t("./config").statusMap,d=t("./statusStorage"),u=t("./floattips"),p=t("appUtil"),h=t("models/api"),t=t("insight"),f=t.register("report-deprecated-module",{level:t.EventLevel.Info}),m='<div class="qc-tool-inner"><div class="qc-tool-head J-tool-head"><h3 class="qc-tool-head-title">最近操作</h3>        <a class="qc-tool-more" href="/cloudaudit" data-event="nav" data-hot="header.operatelog.more">查看更多</a><a class="qc-tool-head-close J-closeLogIcon" href="javascript:;"><i class="qc-close-panel"></i></a></div><div class="qc-tool-body J-operatelogList"><div class="qc-tool-info"><i class="log-loading-icon"></i>加载中</div></div></div>',g='<%for(var i=0; i < events.length; i++){%><li class="<%=events[i].extendAttr.status%>">            <div class="pv-content">                <div class="content-inner" style="display: block;">                    <h4><%=events[i].EventTime%></h4>                    <ul class="form-list">                        <li class="pure-text-row">                            <div class="form-label">                                <label for="">用户名</label>                            </div>                            <div class="form-input">                                <p><%=events[i].Username%></p>                            </div>                        </li>                        <li class="pure-text-row">                            <div class="form-label">                                <label for="">事件名称</label>                            </div>                            <div class="form-input">                                <p><%=events[i].EventName%></p>                            </div>                        </li>                        <li class="pure-text-row">                            <div class="form-label">                                <label for="">资源类型</label>                            </div>                            <div class="form-input">                                <p><%=events[i].Resources.ResourceType%></p>                            </div>                        </li>                        <li class="pure-text-row">                            <div class="form-label">                                <label for="">资源名称</label>                            </div>                            <div class="form-input">                                <p><%=events[i].Resources.ResourceName || "*"%></p>                            </div>                        </li>                    </ul>                </div>            </div>        </li><%}%>',v='<div class="tip-msg-win floattips-container"></div>',b='<div class="tc-processes-vertical dot-state"><ol class="J-operateContainer"></ol></div>',y='    <div class="">        <p class="text-label">该操作需要授权，请联系您的开发商为您添加权限。 <a href="//cloud.tencent.com/document/product/598/10598" target="_blank">查看授权操作指南 <i class="external-link-icon"></i> </a></p>        <p class="text-label">失败信息描述</p>        <div class="rich-textarea">            <div class="rich-content">                <p class="rich-text error"><%=tips%></p>            </div>        </div>    </div>';function w(){this.$wrapEl="",this.$container=null,this.$list=null,this.maxReqNum=300,this._bBind=!1}r.inherit(w,c),a.extend(w.prototype,{init:function(t){var e,n;f.push({message:"模块 widget/operatelog/operatelog 即将下线",module:"widget/operatelog/operatelog"}),"zh"==window.VERSION&&(t=t||{},(e=this).$wrapEl=a(t.wrapEl),n=a(m),t=a(v),e.$container=e.$wrapEl.find(".J-dropdownPanel"),e.$container.append(n),e.$wrapEl.append(t),e.$list=e.$container.find(".J-operatelogList"),u.init({$container:t}),u.on("addtask",function(t){d.addTaskKey(t),e.emit("refresh")}),d.on("showtips",function(t){u.handleTaskArr(t)}),e.on("show",function(){e.show()}),e.on("hide",function(){e.hide()}),e.on("refresh",function(){e.refresh()}),e.matchWindowSize(),s.getComData(function(t){t&&t.canManageCloudResource}),e.bindEvent())},bindEvent:function(){var e=this;e._bBind||(e._bBind=!0,e.$wrapEl.on("click",".J-closeLogIcon",function(t){e.emit("hide")}),e.$container.on("click",'[data-event="nolink"]',function(t){var e=a(this).attr("data-nolinktips");e&&o.error(e)}),a(window).on("resize",p.throttle(function(){e.matchWindowSize(),e.resizeOplist()},250)),e.$wrapEl.on("click",".J-headerLogIcon",function(){e.$wrapEl.hasClass("qc-nav-select")?e.emit("hide"):e.emit("show")}),a("#topnav").on("header_right_tool_show",function(){e.hide()}))},toggle:function(){this.$wrapEl.hasClass("qc-nav-select")?this.emit("hide"):this.emit("show")},show:function(){a("#topnav").trigger("header_right_tool_show"),this.$wrapEl.addClass("qc-nav-select"),this.resizeOplist(),this.$list.html('<div class="qc-tool-info"><i class="log-loading-icon"></i>加载中</div>'),this.showOperationLogs()},hide:function(){this.$wrapEl.removeClass("qc-nav-select")},matchWindowSize:function(){this.$container.height(a(window).height()-50)},resizeOplist:function(){var t=a(window).height()-50,e=this.$container.find(".J-tool-head").outerHeight(),n=parseInt(this.$list.css("padding-top"))||0,i=parseInt(this.$list.css("padding-bottom"))||0;this.$list.height(t-e-n-i)},handleData:function(t){this.needRefresh=d.checkStatus(t.datalist),a.each(t.datalist,function(t,o){o._desc=o.task_title||o.command_desc,o._detail_total_num=0,o._detail_success_num=0,o._detail_error_num=0,o._detail_ing_num=0,o.process_detail&&(o._detail_total_num=o.process_detail.length,a.each(o.process_detail,function(t,e){var n=e.status,i=l[""+n]||l[-99]||{};e._extobj=i,e._title=e.instance_id,e._instance_link=r.getInstanceLink(e,o),e._dataEvent="nav",e._instance_link?0==e._instance_link.indexOf("javascript")&&(e._dataEvent="nolink"):e._title=e._nolinktips,0===n?o._detail_success_num++:1===n?o._detail_error_num++:o._detail_ing_num++,"nav"==e._dataEvent&&(e._dataHotStr='data-hot="log.recent.id"')}),o.extra_detail=o.extra_detail||[])})},renderList:function(){var e=this;s.getOperatelogList({page:1,count:10,operate_uin:i.getUin(),detail:!0},function(t){t&&t.datalist&&t.datalist.length&&(e.handleData(t),e.checkStatus(t))},function(t){},!1)},checkStatus:function(t){var n=this;this.isWating=!1,a.each(t.datalist,function(t,e){if(2==e.status)return!(n.isWating=!0)}),this.clearCheckTask(),this.needRefresh||this.isWating?this.watingTimer=setTimeout(function(){n.maxReqNum&&(n.refresh(),n.maxReqNum--)},1e4):this.setmaxReqNum()},clearCheckTask:function(){clearTimeout(this.watingTimer)},setmaxReqNum:function(){this.maxReqNum=600},refresh:function(){this.clearCheckTask(),this.renderList()},getOperatelogList:function(t){var e=a.Deferred(),n=new Date,i=[n.getFullYear(),n.getMonth()+1,n.getDate()].join("/"),n=Date.parse(i+" 00:00:00")/1e3,i=Date.parse(i+" 23:23:59")/1e3;return h.request({serviceType:"cloudaudit",cmd:"LookUpEvents",data:{StartTime:n,EndTime:i,MaxResults:15,Version:"2019-03-19"},regionId:1},{secure:!0,tipErr:!1,version:3}).then(function(t){t&&t.data&&t.data.Response&&Array.isArray(t.data.Response.Events)?(a(t.data.Response.Events).each(function(t,e){e.extendAttr={status:0==e.ErrorCode?"is-success":"is-error"}}),e.resolve(t.data.Response.Events)):e.resolve([])},function(t){e.reject(t)}),e.promise()},showOperationLogs:function(){var e=this;this.getOperatelogList().done(function(t){t.length?(t=i.tmpl(g,{events:t}),e.$list.html(a(b)).find(".J-operateContainer").html(t)):e.$list.html('<div class="qc-tool-info">暂无操作日志</div>')}).fail(function(t){t&&4102==t.mccode?(t=t.msg||t.data&&t.data.message||"暂无操作日志",e.$list.html(i.tmpl(y,{tips:t}))):e.$list.html('<div class="qc-tool-info">暂无操作日志</div>')})},destroy:function(){this.clearCheckTask()}}),n.exports=new w}),define("widget/operatelog/statusStorage",function(t,e,n){var i=t("$"),o=t("appUtil"),a=t("constants"),s=t("./emitter"),t=t("./util");function c(){this.storeKey="NMC_OPERATELOG_TIPS_STATUS"}"undefined"==typeof localStorage&&(localStorage={getItem:i.noop,setItem:i.noop,removeItem:i.noop}),"undefined"==typeof JSON&&(JSON={parse:i.noop,stringify:i.noop}),t.inherit(c,s),i.extend(c.prototype,{getLocalStatus:function(){var t=localStorage.getItem(this.storeKey),e={};try{t&&(e=i.parseJSON(t))}catch(n){}return e},saveLocalStatus:function(t){if(t){var e=JSON.stringify(t);try{localStorage.removeItem(this.storeKey),localStorage.setItem(this.storeKey,e)}catch(n){}}},addTaskKey:function(t){var e;"undefined"!=typeof(t=t||{}).business_id&&"undefined"!=typeof t.task_id&&(void 0===(e=t.region_id)&&(e=o.getRegionId()),isNaN(e)||(e=a.REGIONMAP[e]||e),e=[t.business_id,e,t.task_id].join("_"),(t=this.getLocalStatus())[e]=0,this.saveLocalStatus(t))},deleteTaskKey:function(t){var e=this.getLocalStatus();e[t],delete e[t],this.saveLocalStatus(e)},checkStatus:function(t){var o={};i.each(t,function(t,e){var n=[e.business_id,e.region,e.task_id].join("_");o[n]=e});var a=this.getLocalStatus(),s=[],c=[];i.each(a,function(t,e){var n,i;"undefined"!=typeof o[t]?0!=(i=(n=o[t]).status)&&1!=i||(s.push(t),c.push(n)):(a[t]=e+1,100<=a[t]&&s.push(t))}),i.each(s,function(t,e){delete a[e]}),this.saveLocalStatus(a),this.emit("showtips",c);var n=!1;return i.each(a,function(t,e){n=!0}),n}}),n.exports=new c}),define("widget/operatelog/util",function(t,e,n){var c=t("./config"),i=t("appUtil"),t={inherit:function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},throttle:function(t,e){return i.throttle(t,e)},debounce:function(t,e){var n,i,o=null,a=null;function s(){n=null,i=t.apply(a,o),o=a=null}return function(){return o=arguments,a=this,n&&clearTimeout(n),n=setTimeout(s,e),i}},getInstanceLink:function(t,e){return t._nolinktips=t.hover_tips,t.outlink},getInstanceLink_old:function(t,e){var n=c.businessIdConstants;return e.business_id==n.CVM?21==e.command?(t._nolinktips="该主机已销毁",""):17==e.command&&2==t.status?(t._nolinktips="正在生产中，暂时还不能查看",""):this.getDetailLink("cvm",t,e):e.business_id==n.IMAGE?16==e.command?(t._nolinktips="该镜像已删除",""):4==e.command&&0!==t.status?(2==t.status?t._nolinktips="镜像制作中":t._nolinktips="镜像制作失败",""):this.getDetailLink("image",t,e):e.business_id==n.CREATE_CVM?2==t.status?(t._nolinktips="正在生产中，暂时还不能查看",""):this.getDetailLink("cvm",t,e):(t._nolinktips="该对象暂时还不可用","javascript:;")},getDetailLink:function(t,e,n){var i,o="",a=e.instance_id,s=c.REGIONMAP_R[n.region];switch(t){case"cvm":/ins-/.test(a)?o="/cvm/detail/"+s+"/"+a:(o="/cvm/index?",(i=[]).push("rid="+s),i.push("instanceId="+a),i.push("uuid="+a),o+=i.join("&"));break;case"image":o=/img-/.test(a)?"/cvm/image/detail/"+s+"/"+a:"/cvm/image"}return o}};n.exports=t}),define("widget/page/BeeRoute",function(t,e,n){var i="routeParams",o="_toHistoryTimer",c=t("router"),u=t("appUtil"),a=t("lib/Class"),s=t("pageManager"),r={beforeRender:function(n,i){return function(){var t=n.apply(this,arguments),e=i.apply(this,arguments);return t?e?$.when(t,e):t:e}},onRender:1,onDestroy:1,processBeeConfig:function(e,n){return function(){var t=e.apply(this,arguments);return n.call(this,t)||t}}},l={params:1};n.exports=a.extend({Bee:t("qccomponent"),cacheParams:!1,routeBase:"",params:{fromNav:{defaults:"",initial:"waiting"}},constructor:function(t){t&&this.mixin(t)},setParam:function(o,a){var t,e;"string"==typeof o&&(t=o,e=a,a=arguments[2],(o={})[t]=e),o=o||{},(a=a||{}).initial&&(delete this[i],a.replace=!0,a.silent=!0,a.history=!1);var n,s,c=this,r=c[i]||(c[i]={}),l=r,d={};a.replace?(n=Object.keys(r).concat(Object.keys(o)),l=c[i]={}):n=Object.keys(o),n.forEach(function(t){var e=r[t],n=o[t],i=c._getParamMeta(t);n!==undefined&&""!==n||(a.initial&&i.initial!==undefined?n=$.isFunction(i.initial)?i.initial():i.initial:i.defaults!==undefined&&(n=$.isFunction(i.defaults)?i.defaults():i.defaults)),e!==(n=i.formula?i.formula(n):n)&&(!a.fromParam&&a.history===undefined&&i.history&&(a.history=!0),n===undefined?delete l[t]:l[t]=n,s=!0,a.fromBee||(d[t]=n),a.silent||(t="onParam"+u.capitalize(t),c[t]&&c[t](n,a)))}),c.bee&&c.bee.$set(d),s&&!1!==a.history&&(c.cacheParams?c._cacheParamsToHistory(l,!0!==a.history):c._paramsToHistory(l,!0!==a.history))},getParam:function(t){return this[i]&&this[i][t]},_eachParam:function(e){var n=this,t=n.params;Object.keys(t).forEach(function(t){e(t,n._getParamMeta(t))})},_getParamMeta:function(t){var e=this.params[t],t={route:t,defaults:undefined,formula:null};return"object"==typeof e?$.extend(t,e):t.defaults=e,t},_cacheParamsToHistory:function(t,e){var n=this;n[o]&&n[o].destroy();var i=setTimeout(function(){n._paramsToHistory(t,e)},100);n[o]={destroy:function(){clearTimeout(i)}}},_paramsToHistory:function(o,t){var a=[],s=encodeURIComponent;this._eachParam(function(t,e){var n,i=e.route;i&&(n=o[t],t=$.isFunction(e.defaults)?e.defaults():e.defaults,e.formula&&(n=e.formula(n),t=e.formula(t)),n===t&&!e.fixed||n===undefined||a.push(s(i)+"="+s(n)))}),c.navigate(this.routeBase+"?"+a.join("&"),undefined,t)},render:function(i){i=arguments[arguments.length-1]||{};var t,e,o=this,a={};o._eachParam(function(t,e){var n;e.route?(i.hasOwnProperty(e.route)&&(n=(n=i[e.route])?decodeURIComponent(n):""),a[t]=n):a[t]=o.getParam(t)}),o.setParam(a,{initial:!o.actived,fromParam:!0}),o.actived||(o.actived=!0,o.getParam("fromNav")&&o.setParam("fromNav",""),e=function(){o.actived&&(o.Bee&&(o.bee=new o.Bee(o.getBeeConfig()),o.$el=$(o.bee.$el).appendTo(s.appArea.html("")),o._eachParam(function(t,e){o.bee.$watch(t,function(){o.setParam(t,this[t],{fromBee:!0})})})),o.onRender())},(t=o.beforeRender())?t.done(e):e())},beforeRender:$.noop,onRender:$.noop,getBeeConfig:function(){var n=this,i={};return n._eachParam(function(t,e){i[t]=n.getParam(t)}),n.processBeeConfig({$data:i,actionHandler:function(){n.handleAction(this.name,this)}})},handleAction:function(t,e){var n="onAction"+u.capitalize(t),i=[].slice.call(arguments,1);this[n]&&this[n].apply(this,i)},processBeeConfig:function(t){return t},_isInnerRoute:function(){return 0===c.fragment.indexOf(this.routeBase)&&!/[?&]fromNav([=&#]|$)/.test(c.fragment)},destroy:function(){this._isInnerRoute()||(this.actived=!1,this._destroy("bee",o),this.onDestroy())},onDestroy:$.noop,_destroy:function(){for(var t,e,n=0;n<arguments.length;n++)(e=this[t=arguments[n]])&&(e.destroy?e.destroy():e.$destroy?e.$destroy():e.remove&&e.remove(),this[t]=null)},extend:function(t){return $.extend({},this,t)},mixin:function(i){var t,o=this;return Object.keys(i).forEach(function(t){var e,n=i[t];t in r?(e=r[t],$.isFunction(e)||(e=u.afterFn),o[t]=e(o[t],n)):o[t]=t in l?$.extend({},o[t],n):n}),1<arguments.length?(t=[].slice.call(arguments,1),o.mixin.apply(o,t)):o}})}),define("widget/page/DetailPanel",function(t,e,n){var i=t("qccomponent"),o=t("appUtil"),s="_loadToken",a="_completeToken",c=n.exports=i.extend({$valuekey:"id",$beforeInit:function(){var e=this;c.__super__.$beforeInit.apply(e,arguments),e.$watch(e.composedIdExpression,function(t){e.isComposedIdAvailable(t)?(e.$set("notValid",!1),e.$set("composedId",t)):e.$set("notValid",!0)},!0),e.$watch("composedId",e.bufferReload=o.bufferFn(function(t){(t=t||e.composedId)&&e._assureDataLoad().done(function(){e.data&&!e.notFound&&e._assureDataCompleted()})},100),!0),e.initCallback&&e.initCallback(e)},_assureDataLoad:function(){var i=this,t=i.composedId,o=$.Deferred();if(o.then(function(){i.$set({loading:!1})}),!i.isComposedIdAvailable(t))return o.reject();if(i.$set("notFound",!1),i.isDataMatch(t,i.data))return o.resolve();i.$set({loading:!0,data:{}});var a=i[s]={};return $.when(i.getData(t),i.getItemProcessor(t)).done(function(t,e){var n;i[s]===a&&(n=t,e&&n&&(n=e(n)),i.$set({notFound:!t,data:n}),o.resolve())}).fail(o.reject).always(function(){i.$set("loading",!1)}),o},_assureDataCompleted:function(){var e=this,t=e.composedId,n=e.data,i=e[a]={};!e.isNeedComplete(t,n)||(t=e.getItemCompleter(t,[n],1))&&t.then(function(t){t(n,function(t){e[a]===i&&e.update(t)})})},update:function(e){var n=this;Object.keys(e).forEach(function(t){n.$set("data."+t,e[t])}),n.updateCallback&&n.updateCallback(e)},loadData:function(t){},getData:function(t){return this.loadData(t)},getItemProcessor:function(t){return $.Deferred().resolve()},prepareItemCompleter:function(t){},getItemCompleter:function(t,e,n){t=this.prepareItemCompleter(t);if(t)return t(e,n).then(function(n){return function(t,e){e(n(t))}})},isComposedIdAvailable:function(t){return t.regionId&&t.id},isDataMatch:function(t,e){return t.id===e[this.detailId||this.idProperty]},isNeedComplete:function(t,e){return!0},$beforeDestroy:function(){this[s]=this[a]=null,c.__super__.$beforeDestroy.apply(this,arguments)}},{defaults:{composedIdExpression:"{regionId:regionId, id:id}",idProperty:"id",detailId:"",loading:!0,notValid:!1}})}),define("widget/page/makeAsyncDialogButton",function(t,e,n){var a=t("dialog"),s=function(){a.hide()},c=function(t){a.freeze(!1).toggleBtnLoading(!1,t).toggleBtnDisable(!1,t)};n.exports=function(e){return Object.keys(e).forEach(function(t,i){var o=e[t];e[t]=function(t){var e=o.apply(this,arguments);if(!0!==e){var n=!1;if(e&&e.then)return e.then(function(){n=!0},function(){n=!0}),n||a.freeze(!0).toggleBtnLoading(!0,i),void e.then(s,function(){c(i)});c(i)}else s()}}),e}}),define("widget/page/mixins/grid",function(t,e,n){var i=t("widget/popover/BeeConfirm").extend({defaults:{confirmKey:"确定"}}),s=t("appUtil"),o=t("widget/alg/Locks"),c="_bufferReload",r="_bufferRefreshHeight",a="_refreshing",l="_refreshLocks",d="_loadToken",u={keyword:"searchKey"};t("widget/cam/cam");n.exports={basicGridFields:["page","count","orderField","order"],gridFields:["keyword"],watchFields:["regionId"],refreshInterval:1e4,idProperty:"id",nameProperty:"name",params:{page:{defaults:1,formula:function(t){return+t||1}},count:{defaults:20,formula:function(t){return+t||20}},order:{defaults:0,formula:function(t){return+t||0}},orderField:{defaults:""},keyword:""},onRender:function(){var t=this,e=t.bee,n=e.$refs,i=t.grid=n.grid,o=function(){t.bufferReload()};[].concat(t.basicGridFields,t.gridFields).forEach(function(t){s.beeBindBoth(e,i,t,"pending"+s.capitalize(t))}),[].concat(t.basicGridFields,t.gridFields,t.watchFields).forEach(function(t){e.$watch(t,o)}),[].concat(t.gridFields,t.watchFields).forEach(function(t){e.$watch(t,function(){e.$set("page",1)})}),o()},processBeeConfig:function(t){var e=this;return t.$data.gridCfg={backList:function(){this.$set({searchKey:"",pendingKeyword:""})},handleAction:function(){e.handleGridAction.apply(e,arguments)}},t},onDestroy:function(){this._destroy(d,c,r,a,l)},setRefreshing:function(t,e){var n=this,i=n.grid;n.actived&&(t?(n[a]&&!e||(n[a]&&n[a].destroy(),n[a]=s.bufferFn(function(){0<i.selectedNum||n.getRefreshingLocks().isLocked()?n[a]():n.bufferReload(!0)},e||n.refreshInterval,function(t){t=new Date((new Date).getTime()+t);n.bee&&n.bee.$set("refreshingTime",t)})),n[a]()):n[a]&&n[a].destroy())},getRefreshingLocks:function(){var n=this,t=n[l];return t||((t=n[l]=new o).onChange=function(t){var e=n.bee;e&&e.$set("refreshingLocked",t)}),t},getData:function(){},setData:function(e){var n=this.bee;[].concat(this.basicGridFields,this.gridFields).forEach(function(t){e[u[t]||t]=n[t]}),n.$refs.grid.setData(e)},getItemProcessor:function(t){return $.Deferred().resolve(function(t){return t})},prepareItemCompleter:function(t){},getItemCompleter:function(t,e,n){t=this.prepareItemCompleter(t);if(t)return t(e,n).then(function(n){return function(t,e){e(n(t))}})},bufferReload:function(t){var a=this,n=a.bee,e=n.$refs;a[c]||(a[r]=s.bufferFn(function(){a.grid.setMaxHeight()}),a[c]=s.bufferFn(function(t){var i=e.grid,o=a[d]={};t||(i.$set({list:[]}),i.showLoading("加载中...")),$.when(a.getData().fail(i.errorCallback.bind(i)).done(i.dataCallback.bind(i)),a.getItemProcessor(n)).done(function(t,e){o===a[d]&&a.actived&&(e&&(t.list=t.list.map(e)),a.setData(t),(e=a.getItemCompleter(n,t.list,t.totalNum))&&e.then(function(n){t.list.forEach(function(t,e){n(t,function(t){o===a[d]&&a.actived&&(i.updateItem(e,t),a[r]())})})}))}).always(function(){o===a[d]&&a.actived&&(t||i.hideLoading())})})),a[c](t)},handleGridAction:function(t,e){var n="onGrid"+s.capitalize(t),i=[].slice.call(arguments,1);this[n]&&this[n].apply(this,i)},onActionColumns:function(){this.bee.$refs.grid.showFieldsManager()},onActionSearch:function(t){this.bee.$set("keyword",$.trim(t.keyword))},confirm:function(t,e){this.bee.$refs.grid||this.grid;var n=$.Deferred();return new i({handler:e&&e.target||t.attachEl,$data:t,onConfirm:function(){n.resolve()},onCancel:function(){n.reject()}}),n}}}),define("widget/page404/index",function(t,e,n){var i=t("widget/banPage/index");n.exports={render:function(t){return i.render("404",t)}}}),define("widget/pageOops/index",function(t,e,n){var i=t("widget/banPage/index");n.exports={render:function(t){return i.render("oops",t)}}}),define("widget/pagination/pagination",function(t,e,n){var a=t("$"),s=t("util"),t=function(t){return this.options=a.extend({},{renderTo:null,page:1,perPageCount:20,totalNum:0,listFun:null},t),this.show(),this};t.prototype={show:function(){var t=this.options,e={},n=t.page,i=t.perPageCount,o=t.totalNum,t=a(t.renderTo);e.currentPage=n,e.totalPage=parseInt((o+i-1)/i);o=s.tmpl('    <% if (totalNum > 0) { %>      <div class="tc-page-simple col2-main-page" data-cp="<%- info.currentPage %>">        <span class="indent">共<%- totalNum %>条</span>        <span class="indent"><%- info.currentPage %>/<%- info.totalPage %>页</span>        <a href="javascript:void(0);" title="第一页" class="tc-page-first<% if (info.currentPage === 1 || info.currentPage > info.totalPage) { %> disable<% } %>" data-role="first_page"></a><a href="javascript:void(0);" title="上一页" class="tc-page-pre<% if (info.currentPage === 1 || info.currentPage > info.totalPage) { %> disable<% } %>" data-role="prev_page"></a><a href="javascript:void(0);" title="下一页" class="tc-page-next<% if (info.currentPage >= info.totalPage) { %> disable<% } %>" data-role="next_page"></a><a href="javascript:void(0);" title="最后一页" class="tc-page-last<% if (info.currentPage >= info.totalPage) { %> disable<% } %>" data-role="last_page"></a>      </div>    <% } %>',{info:e,totalNum:o});this.info=e,this.$el=a(o),t.html("").append(this.$el),this.bindEvent()},bindEvent:function(){var t=this,e=this.$el,n=e.find("[data-role='prev_page']"),i=e.find("[data-role='next_page']"),o=e.find("[data-role='first_page']"),e=e.find("[data-role='last_page']");n.click(function(){t.prevNextPage(this,-1)}),i.click(function(){t.prevNextPage(this,1)}),o.click(function(){t.goPage(this,1)}),e.click(function(){t.goPage(this,t.info.totalPage)})},goPage:function(t,e){$obj=a(t),$obj.hasClass("disable")||this.renderList(e)},prevNextPage:function(t,e){var n=parseInt(a(t).closest("div").attr("data-cp"));this.goPage(t,n+e)},renderList:function(t){var e=this.options.listFun;e&&e(t)}},n.exports=t}),define("widget/panel/panel",function(t,e,n){var a=t("$"),i=t("util"),t=(t("appUtil"),t("pageManager")),s='    <a class="btn-close" href="javascript:void(0)" id="closePanleBtn">关闭</a>    <div id="panelPaginationWrap"></div>    <div class="sidebar-panel-container" data-child="innerContainer"></div>',c="panelContain_"+Math.floor(1e4*Math.random()),r={rendTo:t.appArea,width:"795px",height:"",onBeforeShow:null,onAfterShow:null,onBeforeHide:null,onAfterHide:null,module:{},data:{},speed:300,transition:null,pagination:null},l={},d=(document.body.style,i.supportTransform()),u=0,p=!1,h=i.setTransformTransitionForElem,f=function(){o.hide()},o=n.exports={show:function(t,e){for(var n in t=t||{},l={},r)l[n]=r[n];l=a.extend(l,t);var i,o=document.getElementById(c);o||(o=document.createElement("div"),a(o).attr("id",c),o.className="sidebar-panel",d&&h(o,"translate3d(100%,0px,0px)",""),a(o).html(s),l.rendTo.append(o),p=!0),o.style.height=l.height,"always"==l.transition?this.hide():l.module&&l.module.destroy&&l.module.destroy(),this.pagination.init(l.pagination),a("#closePanleBtn").unbind("click",f),a("#closePanleBtn").bind("click",f),a("#"+c+" [data-child=innerContainer]").empty(),"panel"!=l.rendTo.attr("data-parent")&&(a(o).parent().length&&(a(o).parent().removeAttr("data-parent"),a(o).parent()[0].removeChild(o)),l.rendTo.attr("data-parent","panel"),l.rendTo.append(o),p=!0),l.module&&l.module.render&&l.module.render(a("#"+c+" [data-child=innerContainer]"),l.data),!e&&l.onBeforeShow&&l.onBeforeShow(),d?(i=(100/parseInt(l.speed)).toFixed(1),u&&clearTimeout(u),p?setTimeout(function(){o.style.width=l.width,h(o,"translate3d(0px,0px,0px)","all "+i+"s ease-out")},10):(o.style.width=l.width,h(o,"translate3d(0px,0px,0px)","all "+i+"s ease-out")),u=setTimeout(function(){h(o,undefined,""),!e&&l.onAfterShow&&l.onAfterShow()},1e3*i)):(a(o).show(),o.style.width="0px",a(o).stop(!0,!0),a(o).animate({width:l.width},l.speed,"swing",function(){!e&&l.onAfterShow&&l.onAfterShow()}))},hide:function(t){l.module&&l.module.destroy&&l.module.destroy(),a("#closePanleBtn").unbind("click",f);var e,n=document.getElementById(c);n&&(!t&&l.onBeforeHide&&l.onBeforeHide(),d?(e=(100/parseInt(l.speed)).toFixed(1),u&&clearTimeout(u),h(n,"translate3d(100%,0px,0px)","all "+e+"s ease-out"),u=setTimeout(function(){!t&&l.onAfterHide&&l.onAfterHide(),h(n,undefined,"")},1e3*e)):(a(n).stop(!0,!0),a(n).animate({width:"0px"},l.speed,"swing",function(){a(n).hide(),!t&&l.onAfterHide&&l.onAfterHide()})))},pagination:{init:function(t){var e=a("#panelPaginationWrap");t?(this.options=t,t=i.tmpl('<div class="pagination" data-cp="<%- info.currentPage %>">        <a href="javascript:;" id="panelPrev" class="btn-page page-prev<% if (info.currentPage === 1 || info.currentPage > info.totalPage) { %> btn-page-disabled<% } %>" data-title="上一条"><i class="icon-page-prev"></i></a>        <a href="javascript:;" id="panelNext" class="btn-page page-next<% if (info.currentPage >= info.totalPage) { %> btn-page-disabled<% } %>" data-title="下一条"><i class="icon-page-next"></i></a>    </div>',{info:t}),e.html(t),this.bindEvent()):e.html("")},bindEvent:function(){var t=this,e=a("#panelPrev"),n=a("#panelNext");e.click(function(){t.prevNextPage(this,-1)}),n.click(function(){t.prevNextPage(this,1)})},goPage:function(t,e){$obj=a(t),$obj.hasClass("btn-page-disabled")||(t="panelPrev"==$obj.attr("id")?"prev":"next",this.callback(e,t))},prevNextPage:function(t,e){var n=parseInt(a(t).closest("div").attr("data-cp"));this.goPage(t,n+e)},callback:function(t,e){var n=this.options.callback;n&&n(t,e)}},render:function(t){var e=document.getElementById(c);e&&(t?a("#"+c+" [data-child=innerContainer]").html(t):e.empty())}}}),define("widget/pills/pills",function(t,e,n){var l=t("$"),d=t("util"),t=function(t){if(this.options=l.extend({},{renderTo:null,data:null,className:"",change:null,newMode:!1},t),this.activeCls=this.options.newMode?"checked":"b_selected",e=this.options.renderTo){var e=l(e),t=this.options.newMode?'    <div class="tc-15-rich-radio <%= className %>" role="radiogroup">        <% for (var i=0, item; item = data[i]; i++) { %>            <% if (!item.hide) { %>            <button type="button" data-value="<%- item.value %>" class="tc-15-btn m <% if (i===0) { %> first <% } %> <% if (i===data.length -1) { %> last <% } %> <% if (item.active) { %> checked <% } %>  <% if (item.disabled) { %> disabled <% } %>" data-title="<%= item.tips %>">                <span><%= item.name %></span>                <% if (item.ico) { %> <i class="<%= item.ico %>"><%= item.iconVal %></i> <% } %>             </button>            <% } %>        <% } %>    </div>':'    <span class="shop_ui_block ui_block_55 <%= className %>">    <% for (var i=0, item; item = data[i]; i++) { %>    <% if (!item.hide) { %>            <a href="javascript:;"  data-value="<%- item.value %>" class="b_item <% if (i===0) { %> b_first <% } %> <% if (i===data.length -1) { %> b_last <% } %> <% if (item.active) { %> b_selected <% } %>  <% if (item.disabled) { %> b_disable <% } %>" data-title="<%= item.tips %>">            <span class="text"><%= item.name %></span>            <% if (item.ico) { %> <i class="<%= item.ico %>"></i> <% } %>             </a>            <% } %>        <% } %>    </span>',t=d.tmpl(t,{data:this.options.data,className:this.options.className}),t=l(t);return this.$el=t,e.append(t),this.bindEvent(),this}};t.prototype={bindEvent:function(){var t=this,e=this.options.newMode?"button:not(.disabled)":"a:not(.b_disable)";this.$el.off("click").on("click",e,function(){t.select(this),t.change(this)})},select:function(t){var e=this.activeCls;this.$el.find("."+e).removeClass(e),l(t).addClass(e)},status:function(t){var e,n=this.options.newMode?"disabled":"b_disable";for(e in t.values)t.disabled?this.$el.find('[data-value="'+t.values[e]+'"]').addClass(n):this.$el.find('[data-value="'+t.values[e]+'"]').removeClass(n)},change:function(t){var e=this.options.change;e&&e.call(this,l(t))},getActiveObj:function(){return this.$el.find("."+this.activeCls)},val:function(t){var e=this.$el;if(t===undefined)return e.find("."+this.activeCls).attr("data-value");t=e.find('[data-value="'+t+'"]');t.length&&this.select(t)},setData:function(t){if(t&&t.length){for(var e=this,n=e.$el,i=e.getCheckedData(),o=this.options.newMode?'    <div class="tc-15-rich-radio <%= className %>" role="radiogroup">        <% for (var i=0, item; item = data[i]; i++) { %>            <% if (!item.hide) { %>            <button type="button" data-value="<%- item.value %>" class="tc-15-btn m <% if (i===0) { %> first <% } %> <% if (i===data.length -1) { %> last <% } %> <% if (item.active) { %> checked <% } %>  <% if (item.disabled) { %> disabled <% } %>" data-title="<%= item.tips %>">                <span><%= item.name %></span>                <% if (item.ico) { %> <i class="<%= item.ico %>"><%= item.iconVal %></i> <% } %>             </button>            <% } %>        <% } %>    </div>':'    <span class="shop_ui_block ui_block_55 <%= className %>">    <% for (var i=0, item; item = data[i]; i++) { %>    <% if (!item.hide) { %>            <a href="javascript:;"  data-value="<%- item.value %>" class="b_item <% if (i===0) { %> b_first <% } %> <% if (i===data.length -1) { %> b_last <% } %> <% if (item.active) { %> b_selected <% } %>  <% if (item.disabled) { %> b_disable <% } %>" data-title="<%= item.tips %>">            <span class="text"><%= item.name %></span>            <% if (item.ico) { %> <i class="<%= item.ico %>"></i> <% } %>             </a>            <% } %>        <% } %>    </span>',a=this.options.newMode?"button:not([disabled])":"a:not([disabled])",s=!1,c=0;c<t.length;c++){var r=t[c];if(r.name==i.name&&r.value==i.value){r.active=1,s=!0;break}}o=d.tmpl(o,{data:t,className:e.options.className});n.html(l(o)),e.options.data=t,e.bindEvent(),s||n.find(a).first().trigger("click")}},getCheckedData:function(){for(var t=this.options.data,e={value:this.getActiveObj().data("value")},n=0;n<t.length;n++)if(t[n].value==e.value){e.name=t[n].name;break}return e}},n.exports=t}),define("widget/popover/BeeConfirm",function(t,e,n){var i=t("qccomponent").getComponent("popup-confirm");n.exports=i.extend({$afterInit:function(){i.prototype.$afterInit.apply(this,arguments);var t=this;setTimeout(function(){t.show()},0)},hide:function(t){var e;this.state&&(e=this,!1!==(t=t?e.onConfirm():e.onCancel())&&(t&&t.then?t.then(function(){i.__super__.hide.call(e),e.$destroy(!0)}):(i.__super__.hide.call(e),e.$destroy(!0))))}},{defaults:{confirmKey:"删除",style:"width:250px;"}})}),define("widget/popover/Editor",function(t,e,n){var u=t("qccomponent"),i=t("tips"),p="_docClickHandler",h="_backspaceHandler",t=u.extend({constructor:function(t){var e,n=this,i=$(t.target),o=(d=t.attachEl)?$(d):$(document.body),a=t.offset||{top:0,left:0},s=t.alignRight;u.call(n,t),(e=$(n.$el)).appendTo(o);var c=i.offset(),r=t.box?$(t.box):o,l=i.outerHeight(),d=i.outerWidth(),t=e.outerHeight(),o=e.outerWidth(),i=r.offset(),r=r.innerHeight();s&&(a.left-=o-d),a=c.top+l+t+a.top>i.top+r?{top:c.top-t-a.top,left:c.left+a.left}:{top:c.top+l+a.top,left:c.left+a.left},e.offset(a),setTimeout(function(){$(document).on("click",n[p]=function(t){e[0]===t.target||$.contains(e[0],t.target)||n.$destroy()}).on("keydown",n[h]=function(t){8!==t.keyCode||$(t.target).closest('input[type="text"]:not([readonly]), input[type="password"]:not([readonly]), textarea:not([readonly])').length||t.preventDefault()})})},$afterDestroy:function(){$(document).off("click",this[p]).off("keydown",this[h])},$tpl:'<div class="tc-15-edit-in-place" style="position:absolute;top:-9999px;left:-9999px;z-index:1002;background-color:#fff;overflow:visible;">{{>content}}<button class="tc-15-btn m" b-on="{click:handleYes}">{{yesText}}</button> <button class="tc-15-btn m weak" b-on="{click:handleNo}">{{noText}}</button></div>',yesText:"保存",noText:"取消",handleYes:function(){var t=this,e=$.Deferred();e.done(function(){t.$destroy()}).fail(function(t){i.error(t)}),!1!==this.onYes(e)&&e.resolve()},handleNo:function(){this.onNo(),this.$destroy()},handleSimpleEdit:function(t){var e=t.def||$.Deferred(),n=t.updater,i=t.host,o=t.method||"$set",a=t.index,s=t.key,c=t.loadingKey||s+"Changing",r=t.newValue,l=t.oldValue,t="pending"===e.state(),d=function(e){if(n)return n(e);0<=a?i[o](a,e):Object.keys(e).forEach(function(t){i[o](t,e[t])})},u={};return u[s]=r,t&&(u[c]=!0),d(u),e.fail(function(){(u={})[s]=l,d(u)}),e.always(function(){(u={})[c]=!1,d(u)}),e},onYes:$.noop,onNo:$.noop});n.exports=t}),define("widget/popover/HelpTips",function(t,e,n){var i=t("qccomponent").extend({$tpl:'    <div class="tc-15-bubble-icon">        <i class="tc-icon icon-what"></i>        <div class="tc-15-bubble tc-15-bubble-{{getCurPos(position)}}"             b-style="{width: width, marginLeft: position == \'top\' || position == \'bottom\' ? -width/2 : 8, marginTop: position == \'left\' || position == \'right\' ? -width/2 : 0}">            <div class="tc-15-bubble-inner">                <p style="white-space: normal">                    {{> content || $content }}                </p>            </div>        </div>    </div>',getCurPos:function(t){return i.POSMAP[t]||"top"}},{defaults:{position:"bottom",width:300},POSMAP:{left:"right",right:"left",top:"bottom",bottom:"top"}});n.exports=i}),define("widget/popover/TextEditor",function(t,e,n){var i=t("./Editor");n.exports=i.extend({content:'    <div class="tc-15-input-text-wrap m {{invalid ? \'error\' : \'\'}}">        <div class="clr">{{>inputTpl}}</div>        <div class="tc-15-input-tips">{{invalid || tips}}</div>    </div>',inputTpl:'    <input type="text" class="tc-15-input-text" b-model="value" b-on="{keypress : ifEnter}">',$afterInit:function(){i.prototype.$afterInit.apply(this,arguments),this.oldValue=this.value||""},ifEnter:function(t){13===t.keyCode&&this.handleYes()},validate:$.noop,doSave:function(t,e){return $.Deferred().resolve()},onYes:function(){var t,e=this.value,n=this.oldValue;return e===n?$.Deferred().resolve():(t=this.validate(e),this.$set("invalid",t),!t&&(t=this.doSave(e,n),this.onSave(t,e,n),t))}})}),define("widget/popover/popover",function(t,e,n){var i=t("$"),o=(t("event"),t("util")),t=t("lib/Class"),a=["left","top","right","bottom"];function s(t,e){e=e||{},this.$el=i(o.tmpl(e.tpl||this.tpl,{content:t})),this.el=this.$el[0],this._auto=!1!==e.auto,this.$el.data("popover",this),this.$el.attr("data-role","popover"),this.posOffset=i.extend({top:0,left:0},e.posOffset),e.className&&this.$el.addClass(e.className),e.style&&this.$el.css(e.style),this.position(e.position||"top"),this.options=e,this._global=e.global}i("body").off("mousedown.popover").on("mousedown.popover",function(t){i("[data-role=popover][data-close=mousedown]").filter(function(){return!i(t.target).closest("[data-role=popover][data-close=mousedown]").is(this)}).remove()}),i.extend(s,{arrowOffset:8,close:function(t){t instanceof s?t.hide():(t=i(t).data("popover"))&&t.hide()},closeAll:function(){i("[data-role=popover]").each(function(){var t=i(this).data("popover");t&&t.hide()})}},t),i.extend(s.prototype,{tpl:'    <div class="tc-bubble" style="z-index: 9999">        <div class="tc-bubble-inner">            <%- content %>        </div>    </div>',attach:function(t){this.target=t,this.bindHoverEvent()},show:function(t,e){e=e||{},this.target=t,this.$target=i(t),e.persist||this.$el.attr("data-close","mousedown"),this._global?i(document.body).append(this.el):this.$target.after(this.el);e=this.$target.data("popover");e&&e.hide(),this.$target.data("popover",this),this.reposition()},position:function(t){this._pos=t},reposition:function(){var t=this._pos;if(-1!==a.indexOf(t)){var e,n=this.offset(t),i=this._auto&&this.suggested(t,n);switch(i&&i!==t&&(t=i,n=this.offset(t)),t){case"top":e="bottom";break;case"bottom":e="top";break;case"left":e="right";break;case"right":e="left"}this.$el.addClass("tc-bubble-"+e),this.$el.css(n)}},suggested:function(t,e){var n=this.el,i=n.clientWidth,o=n.clientHeight,a=window.scrollY,s=window.scrollX,c=window.innerWidth,n=window.innerHeight,r={top:!0,bottom:!0,left:!0,right:!0};e.top+o>a+n&&(r.bottom=!1),e.top<a&&(r.top=!1),e.left+i>s+c&&(r.right=!1),e.left<s&&(r.left=!1);for(var l=t.split(/\s+/),d=0;d<l.length&&r[l[d]];d++)if(d===l.length-1)return t;for(d=0;d<l.length;d++)if(r[l[d]])return l[d];return r[t]?t:r.top?"top":r.bottom?"bottom":r.left?"left":r.right?"right":void 0},offset:function(t){var e=this.constructor.arrowOffset;if(!(this._global?this.el.getBoundingClientRect():this.$el.position()))throw new Error("could not get bounding client rect of Tip element");var n=this.$el.width(),i=this.$el.height(),o=this._global?this.target.getBoundingClientRect():this.$target.position();if(!o)throw new Error("could not get bounding client rect of `target`");var a,s,c,r,l,d=this.$target.width(),u=this.$target.height(),p=(a=o,s=document,c=s.body||s.getElementsByTagName("body")[0],r=s.documentElement||c.parentNode,o=r.clientTop||c.clientTop||0,s=r.clientLeft||c.clientLeft||0,c=window.pageYOffset||r.scrollTop,r=window.pageXOffset||r.scrollLeft,{top:a.top+c-o,left:a.left+r-s});switch(0,t){case"top":l={top:p.top-i-e,left:p.left+d/2-n/2};break;case"bottom":l={top:p.top+u+e,left:p.left+d/2-n/2};break;case"right":l={top:p.top+u/2-i/2,left:p.left+d+e};break;case"left":l={top:p.top+u/2-i/2,left:p.left-n-e};break;default:throw new Error('invalid position "'+t+'"')}return l.top+=this.posOffset.top,l.left+=this.posOffset.left,l},hide:function(){this.remove()},remove:function(){this.$target.removeData("popover"),this.$el.removeData("popover"),this.$el.remove()},bindHoverEvent:function(){var t=this;i(this.target).on("mouseover",function(){t.show(t.target)}).on("mouseout",function(){t.hide()})}}),n.exports=s}),define("widget/projects/projectSelector",function(t,e,n){var i=t("qccomponent"),o=t("manager"),d=t("appUtil"),t=i.getComponent("qc-select"),t=t.extend({$valuekey:"projectId",$afterInit:function(){$(this.$el).attr("data-project-selector",""),$(this.$el).find("[data-list]").css({maxHeight:240}),this.needAll||d.setDefaultPid(0);var r=this,l=d.getProjectId();this.__super__.$afterInit.call(this),$(this.$el).hide(),this.$watch("selected",function(t){t&&(d.setProjectId(t.projectId),this.$set("projectId",t.projectId))}),o.getProjects(function(c){setTimeout(function(){var t,e,n=c.data,i=!!r.$data.needAll&&(r.$data.cam||c.isShowAll);if(n&&n.length&&(1!==n.length||0!=n[0].projectId)){if(!i){for(var o,a=!1,s=0;o=n[s];s++)if(l==o.projectId){a=!0;break}if(!a)return d.setProjectId(n[0].projectId),void location.reload()}t=n.map(function(t){return{label:t.name,projectId:t.projectId}}),i&&t.unshift({label:"全部项目",projectId:-1}),t.forEach(function(t){t.projectId==l&&(e=t)}),r.$set({list:t,selected:e||t[0]}),$(r.$el).css("display","")}},0)})}},{defaults:$.extend({},t.defaults,{needAll:!0})});i.tag("project-selector",t),n.exports=t}),define("widget/projects/projects",function(t,e,n){var c=t("$"),r=t("util"),l=t("appUtil"),d=(t("event"),t("selector")),i=t("manager"),t=(t("login"),t("tips"),function(t){!1===t.needAll&&(l.setDefaultPid(0),-1==t.selectedId&&(t.selectedId=0));var e={renderTo:null,needAll:!0,selectedId:l.getProjectId()},a=this;this.options=c.extend({},e,t);var s=this.options.renderTo,t=this.options.getProjects||i.getProjects.bind(i);if(s)return t(function(t){var e=t.data,t=!!a.options.needAll&&t.isShowAll;if(e&&e.length&&(1!==e.length||0!=e[0].projectId)){if(!t){for(var n,i=!1,o=0;n=e[o];o++)if(a.options.selectedId==n.projectId){i=!0;break}if(!i)return l.setProjectId(e[0].projectId),void location.reload()}s=c(s),a.data=e,a.isShowAll=t;t=r.tmpl('    <div class="tc-15-dropdown tc-15-dropdown-in-hd" data-project-selector>        <a href="javascript:;" class="tc-15-dropdown-link"><span><%= selectedName %></span><i class="caret"></i></a>        <ul class="tc-15-dropdown-menu" role="menu" style="max-height:240px; overflow-y:auto">            <% if (isShowAll) { %>                <li data-id="-1" <% if (-1 == selectedId) { %> class="selected" <% } %>>                    <a href="javascript:;">全部项目</a>                </li>            <% } %>            <% for (var i=0,item; item = data[i]; i++) { %>                <li data-id="<%-item.projectId%>" <% if (item.projectId == selectedId) { %> class="selected" <% } %>>                    <a href="javascript:;" title="<%= item.name %>"><%= item.name %></a>                </li>            <% } %>        </ul>    </div>',{data:e,isShowAll:t,selectedId:a.options.selectedId,selectedName:a.getSelectedName(a.options.selectedId)}),t=c(t);s.append(t),a.selector=new d(t,{newMode:!0}),a.bindEvent()}}),this});t.prototype={bindEvent:function(){var t=this;this.selector.change(function(){l.setProjectId(this.val()),t.options.change&&t.options.change.call(t)}),this.selector.open(function(){})},getSelectedName:function(t){var e="";if(-1==t)return"全部项目";for(var n,i=0;n=this.data[i];i++)if(n.projectId==t){e=n.name;break}return e},val:function(t){return this.selector?this.selector.val(t):t==undefined?this.options.selectedId:void 0}},n.exports=t}),define("widget/pubsubhub/pubsubhub",function(t,e,n){var i=t("$");n.exports={on:function(){return i.fn.on.apply(i(this),arguments)},off:function(){return i.fn.off.apply(i(this),arguments)},trigger:function(){return i.fn.trigger.apply(i(this),arguments)},one:function(){return i.fn.one.apply(i(this),arguments)}}}),define("widget/range/range",function(t,e,n){var r=t("$"),i=t("util"),o=(t("appUtil"),"mousemove.widget_range"),a="mouseup.widget_range",t=function(t){this.options=r.extend({},{renderTo:null,value:1,min:0,max:100,width:300,unit:"Mbps",section:[{value:5,width:60},{value:20,width:150},{value:100,width:300}],step:1,change:null},t),this.options.renderTo&&(renderTo=r(this.options.renderTo),this.options.unitOffset=6*this.options.unit.length,t=i.tmpl('    <div class="ui_progress">        <div class="progress_area">            <div class="progress_bar my-range-bar" style="width:<%-width%>px">                <div class="progress_bg my-range-track" style="width:auto;">                    <div class="progress_in my-range-selected"></div>                    <a href="javascript:void(0);" class="btn_drag my-range-thumb" style="z-index:1"></a>                </div>                <div class="scale" style="width:auto">                    <% for (var i=0, item; item = section[i]; i++) { %>                    <div class="scale_dot my-range-scale" style="left:<%=item.width-2%>px;"></div>                    <% } %>                </div>            </div>            <div class="input_area">                <input type="text" class="input_mini" value="<%-value%>" style="margin-left:10px;width: 45px"/>                <span class="text"><%-unit%></span>            </div>        </div>        <div class="text_area">            <% for (var i=0, item; item = section[i]; i++) { var left = item.width - (unitOffset + item.value.toString().length * 6) / 2; %>                <span class="text" style="left:<%- left %>px;"><%-item.value%><%-unit%></span>            <% } %>        </div>    </div>',this.options),this.el=r(t),this.rangeBar=this.el.find(".my-range-bar"),this.rangeTrack=this.el.find(".my-range-track"),this.rangeSelected=this.el.find(".my-range-selected"),this.rangeThumb=this.el.find(".my-range-thumb"),this.rangeScale=this.el.find(".my-range-scale"),this.rangeIpt=this.el.find('input[type="text"]'),this.minX=this.valueToX(this.options.min),this.maxX=this.valueToX(this.options.max),renderTo.html("").append(this.el),this.bindEvent(),this.val(this.options.value))};t.prototype={bindEvent:function(){var e=this;this.options;this.rangeThumb.on("mousedown",function(t){e.thumbMousedown(t)}).on("dragstart",function(){return!1}),this.rangeBar.on("click",function(t){r(t.target).hasClass("my-range-thumb")||(e.slide(t.clientX),e.changeFun())}),this.rangeIpt.change(function(t){e.changeVal(this)}).keydown(function(t){t=t.keyCode||t.which;13!=t&&32!=t&&108!=t||e.changeVal(this)})},changeVal:function(t){var e=this,n=this.options,t=parseInt(r.trim(r(t).val()));isNaN(t)?e.val(e.options.value):t<n.min?e.val(n.min):t>n.max?e.val(n.max):e.val(t)},thumbMousedown:function(t){var e=this;return this.diff=this.relativeX(t.clientX)-this.getThumbLeft(),r(document).off(o).off(a).on(o,function(t){e.mousemove(t)}).on(a,function(t){e.mouseup(t)}),!1},mousemove:function(t){this.slide(t.clientX)},mouseup:function(t){r(document).off(o).off(a),this.changeFun()},slide:function(t){var e=this.diff||0;this.update(this.relativeX(t)-e)},update:function(t){var e=this.getThumbOffset(),n=this.options,i=(n.min,n.max,n.step,n.width,n.section,this.minX),n=this.maxX,e=(t=n<(t=t<i?i:t)?n:t)-e;this.rangeThumb.css("left",e),this.rangeSelected.width(e);t=this.xToValue(t);this.rangeIpt.val(this.getTargetValue(t))},getTargetValue:function(t){t=Math.round(t);var e=this.options.step,n=t%(e="function"==typeof e?e(t):e);return 0!=n&&(t+=e-n),t},changeFun:function(){var t=this.options;this.inited?t.change&&t.change.call(this,this.val()):this.inited=!0},getThumbOffset:function(){return 0},getThumbLeft:function(){return this.rangeThumb.position().left},relativeX:function(t){return t-this.rangeTrack.offset().left},calculateSection:function(t,e){for(var n,i=this.options.section,o=this.rangeScale,a="",s=0,c=0;n=i[c];c++)if(t<=n[e]){a=n,s=c;break}return"width"===e&&(o.removeClass("dot_pass"),o.each(function(t){t<s&&r(this).addClass("dot_pass")})),{startX:0===s?0:i[s-1].width+1,startV:0===s?0:i[s-1].value+1,wCount:0===s?a.width:a.width-i[s-1].width-1,rCount:0===s?a.value:a.value-i[s-1].value-1}},valueToX:function(t){var e=this.calculateSection(t,"value");return t=(t-e.startV)/e.rCount*e.wCount+e.startX},xToValue:function(t){var e=this.calculateSection(t,"width");return t=(t-e.startX)/e.wCount*e.rCount+e.startV},val:function(t){this.options;if(t===undefined)return parseInt(this.rangeIpt.val());this.update(this.valueToX(t)),this.changeFun()},setMaxMin:function(t,e){this.options[t]=e,"max"===t?this.maxX=this.valueToX(e):this.minX=this.valueToX(e)}},n.exports=t}),define("widget/region/region",function(t,e,n){var c=t("$"),r=t("util"),l=t("appUtil"),d=(t("event"),t("selector")),i=t("manager"),t=function(t){var e={renderTo:null,selectedId:l.getRegionId()},o=this;this.options=c.extend({},e,t);var a=this.options.whiteList,s=this.options.renderTo;if(s)return i.queryRegion(function(t){if(data=l.clone(t),s=c(s),a){for(var e,n={},i=0;i<a.length;i++)n[a[i]]=!0;for(e in data)n[e]||delete data[e]}t=r.tmpl('    <div class="tc-15-dropdown tc-15-dropdown-in-hd">        <a href="javascript:;" class="tc-15-dropdown-link"><span><%= selectedName %></span><i class="caret"></i></a>        <ul class="tc-15-dropdown-menu" role="menu">            <% for (var id in sortData ) { var realId = id.replace("_", ""); %>                <li data-id="<%-realId%>" <% if (realId == selectedId) { %> class="selected" <% } %>>                    <a href="javascript:;" title="<%= sortData[id] %>"><%= sortData[id] %></a>                </li>            <% } %>        </ul>    </div>',{data:data,sortData:l.getRegionOrderHackObj(data),selectedId:o.options.selectedId,selectedName:data[o.options.selectedId]}),t=c(t);s.append(t),o.selector=new d(t,{newMode:!0}),o.bindEvent()},undefined,this.options.regionListType),this};t.prototype={bindEvent:function(){var t=this;this.selector.change(function(){l.setRegionId(this.val()),t.options.change&&t.options.change.call(t)}),this.selector.open(function(){})},val:function(t){return this.selector.val(t)}},n.exports=t}),define("widget/region/regionAreaSelector",function(t,e,n){var i=t("widget/selectors/AreaDropdownSelector"),o=t("config/regionconfig"),a=t("manager"),t=t("qccomponent"),o=i.extend({$afterInit:function(){var o=this;this.useDefaultRegionList&&a.queryRegion(function(e){var n={},t=Object.keys(e),i=o.getGroups(t);t.map(function(t){n[t]={label:e[t]}}),o.$set("groups",i),o.$set("items",n)},undefined),o.regionList&&(o.$set("items",o.regionList),o.$set("groups",o.getGroups(Object.keys(o.regionList)))),o.$watch("regionList",function(t,e){o.$set("items",t),o.$set("groups",o.getGroups(Object.keys(t)))})},mainlandRegionsId:o.getMainlandRegionList(),getGroups:function(t){var e=this.mainlandRegionsId,n=[{name:"大陆地区",itemsId:[]},{name:"其他",itemsId:[]}];return t.map(function(t){(-1==e.indexOf(String(t))?n[1]:n[0]).itemsId.push(String(t))}),n}});t.tag("region-area-selector",o),n.exports=o}),define("widget/region/regionPills",function(t,e,n){var i=t("qccomponent"),o=t("manager"),r=t("constants"),l=t("appUtil"),a=i.getComponent("qc-segment"),t={idKey:"regionId",regionId:l.getRegionId(),global:!1,"short":!1,reset:!1},s=a.extend({$valuekey:"regionId",$afterInit:function(){var t,c=this;this.whiteList;s.__super__.$afterInit.call(this),this.reset&&(c.regionId=l.getRegionId()),this.$on("selected",function(t){t&&(this.global&&l.setRegionId(t.regionId),this.$set("regionId",t.regionId))}),this.$watch("regionId",function(t){c.toggle({regionId:t})}),$.when((t=$.Deferred(),o.queryRegion(t.resolve,t.reject),t.promise()),"function"==typeof c.getWhiteList?c.getWhiteList():$.Deferred().resolve(c.whiteList||[])).done(function(t,e){t=l.clone(t);var n,i=[],o=l.getRegionOrderHackObj(t),a=!1,s=r.REGIONNAMES;for(n in o)n=n.replace("_",""),e.length&&e.indexOf(n)<0?(delete t[n],n==c.regionId&&(a=!0)):c["short"]?i.push({label:s[n],regionId:n,$checked:n==c.regionId}):i.push({label:t[n],regionId:n,$checked:n==c.regionId});c.$set({list:i,regionId:(a?i[0]:c).regionId})})}},{defaults:t});i.tag("region-pill",s),n.exports=s}),define("widget/region/regionSelector",function(t,e,n){var i=t("qccomponent"),r=t("manager"),l=t("tips"),d=t("appUtil"),u=i.getComponent("qc-select").extend({$valuekey:"regionId",$afterInit:function(){var i=this,o=this.whiteList||[],a=this.regionId||d.getRegionId();this.$set("selected",{regionId:a}),u.__super__.$afterInit.call(this);var s=$(this.$el);s.hide(),$(this.$el).attr("data-region-selector",""),this.$watch("selected",function(t){t&&!1!==this.global&&d.setRegionId(t.regionId);t=t&&t.regionId;t!==this.regionId&&this.$set("regionId",t)});var c,t,e;this.$watch("regionId",function(){var e,n,t=this.selected,i=this.regionId;t&&t.regionId!==i&&this.$set("selected",(t=this.list,e=i,t.forEach(function(t){t.regionId===e&&(n=t)}),n||t[0]))}),e="function"==typeof this.getWhiteList?this.getWhiteList():$.Deferred().resolve(o),t=$.Deferred(),r.queryRegion(t.resolve,t.reject),$.when(e.done(function(t){o=t}),t.done(function(t){c=d.clone(t)})).done(function(){var e,t,n=[];for(t in d.getRegionOrderHackObj(c))t=t.replace("_",""),o.length&&o.indexOf(t)<0?delete c[t]:n.push({label:c[t],regionId:t});n.forEach(function(t){t.regionId==a&&(e=t)}),void 0===e&&(l.error("所选地域不支持该功能，已自动为您切换到支持的地域"),e=n[0]),i.$set({list:n,selected:e||n[0]}),s.css("display","")})}});i.tag("region-selector",u),n.exports=u}),define("widget/region/ZoneSelector",function(t,e,n){var i=t("qccomponent"),o=t("manager"),c=t("appUtil"),t=i.getComponent("qc-select").extend({$valuekey:"zoneId",$afterInit:function(){var a=this,s=[{label:"全部",zoneId:-1}],t=this.regionId||c.getRegionId();$(a.$el).hide(),o.queryZone(t,function(t){for(var e,n=t,i=a.zoneId||-1,o=0;o<n.length;o++)s.push({label:n[o].zoneName,zoneId:n[o].zoneId}),i==n[o].zoneId&&(e={label:n[o].zoneName,zoneId:n[o].zoneId});a.$set({list:s,selected:e||s[0]}),$(a.$el).show()})}},{defaults:{selected:{label:"全部",zoneId:-1}}});i.tag("zone-selector",t),n.exports=t}),define("widget/scrollLoader/scrollLoader",function(t,e,n){var r=t("$"),t=function(t){this.options=r.extend({},{container:null,callback:null,loadingTip:"",noDataTip:"",additionalParam:null,page:1,totalNumField:"num",listDataField:"vmList",perPageCount:20},t);t=this.options.container;if(t)return this.$el=r(t),this.bindEvent(),this.init(),this};t.prototype={init:function(){this.$el.html(""),this._initGet()},_initGet:function(){var n=this,i=this.$el,t=this.options,o=t.page,a=t.perPageCount,s=t.noDataTip,c=t.totalNumField,r=t.listDataField;this.getList(o,function(t){var e=t[c],t=t[r];n.totalPage=parseInt((e+a-1)/a),1!=o||t&&t.length||!s?setTimeout(function(){var t=n.$el[0];t.scrollHeight<=t.offsetHeight&&o<n.totalPage&&n._initGet()},0):i.append(s)}),t.page++},bindEvent:function(){var i=this,o=this.$el;o.off("scroll").on("scroll",function(){var t=o[0],e=t.scrollTop,n=t.scrollHeight,t=t.offsetHeight;0<e&&n-t<=e&&!i.isLoading&&i.scrollLoad()})},scrollLoad:function(){var t=this.options,e=t.page;!this.totalPage||this.totalPage&&e>this.totalPage||this.getList(t.page++)},getList:function(t,e){var n,i=this,o=this.options,a=o.additionalParam,s=this.$el,c=o.loadingTip;c&&(n=r(c),s.append(n)),this.isLoading=!0;o=o.callback;o&&o(t,function(t){e&&e(t),i.isLoading=!1,n&&n.remove()},a)}},n.exports=t}),define("widget/search/search",function(t,e,n){var i=t("$"),o=t("util"),r=t("tips"),t=function(t){return this.options=i.extend({},{value:"",width:150,analyseType:"",dialogMode:0,placeholder:"搜索",multiIp:!1,listFun:null},t),this.show(),this};t.prototype={show:function(){var t=this.options,e=i(t.renderTo),n='  <style>  .sel-host-keywd{transition: width 0.3s linear;}  </style>  <div class="search-panel">    <input type="text" <% if (width) { %> style="width:<%-width%>px" <% } %> class="sel-host-keywd" value="<%=value%>" placeholder="<%=placeholder%>">     <button class="sel-host-btn" data-role="search">搜索</button>  </div>';1===t.dialogMode?n='<div class="search-box">     <input type="text" class="search-inp" <% if (width) { %> style="width:<%-width%>px" <% } %> value="<%=value%>" placeholder="<%=placeholder%>"><a href="javascript:;" class="new-search-btn" data-role="search"><i class="new-search-icon"></i></a>     </div>':2===t.dialogMode?n='<div class="search-box">        <input class="inp-txt" type="text" <% if (width) { %> style="width:<%-width%>px" <% } %> value="<%=value%>" placeholder="<%=placeholder%>">        <i class="search-icon" data-role="search"></i>    </div>':t.multiIp&&(n='  <div class="search-panel search-panel-textarea" tab-index="0">    <textarea <% if (width) { %> style="width:<%-width%>px" <% } %> class="sel-keywd-textarea def-scroll" value="<%=value%>" placeholder="<%=placeholder%>"><%=value%></textarea><button class="sel-host-btn" data-role="search">搜索</button>  </div>');t=o.tmpl(n,{value:t.value,width:t.width,placeholder:t.placeholder});this.$el=i(t),this.$ipt=this.$el.find('input[type="text"]'),this.$ipt.length||(this.$ipt=this.$el.find("textarea")),this.$btn=this.$el.find('[data-role="search"]'),e.html("").append(this.$el),this.bindEvent()},bindEvent:function(){var e,n,i=this,o=this.options;this.$btn.click(function(){i.doSearch(),o.multiIp&&i.$ipt.removeClass("area-expand-height")}),this.$ipt.on("keydown",function(t){if(13===t.which&&!o.multiIp)return i.doSearch(),!1}),o.multiIp&&(e=this.$ipt,(n=this.$btn).on("mousedown",function(){n.data("down",!0)}).on("mouseup",function(){n.data("down",!1)}),e.on("focus",function(t){n.data("down",!1),e.addClass("area-expand-height")}).on("blur",function(t){n.data("down")||e.removeClass("area-expand-height")}))},val:function(t){var e=this.$ipt;if(t===undefined)return i.trim(e.val());e.val(t)},doSearch:function(){var t=this.val();"cvm"===this.options.analyseType&&(t=this.getCvmAnalyseValue())===undefined||this.renderList(t)},getCvmAnalyseValue:function(){var t=this.val(),e=/^(?:(?:[1-9]?[0-9]|1[0-9]{2}|2(?:[0-4][0-9]|5[0-5]))\.){3}(?:[1-9]?[0-9]|1[0-9]{2}|2(?:[0-4][0-9]|5[0-5]))$/,n=this.options.multiIp,i=null;if(t)if(i={},n&&/\n/.test(t)){for(var o,a=t.replace(/\s+/,"\n").split("\n"),s=[],c=0;o=a[c];c++){if(!e.test(o))return r.error("暂不支持批量模糊搜索,请检查输入");s.push(o)}i.ipList=s}else/^\d{1,3}((\.(\d{1,3})?)?){0,3}$/.test(t)?i.vagueIp=t:i.alias=t;return i},renderList:function(t){var e=this.options.listFun;e&&e(t)}},n.exports=t}),define("widget/searchSelector/SearchSelector",function(t,e,n){var i=t("qccomponent").getComponent("qc-select"),c=t("$"),r=i.extend({listTpl:i.prototype.listTpl+'<li class="disabled" b-if="$loading"><a href="javascript:;">加载中...</a></li>',$afterInit:function(){r.__super__.$afterInit.call(this),this.initGetData&&this._getData({page:1,count:this.count}),this.bindEvents()},bindEvents:function(){var e=this;c(this.$el).on("keydown",function(t){13===t.keyCode&&t.stopPropagation()}),c(this.$el).find("ul").on("scroll",function(){var t=c(this);this.scrollHeight-e.pagerOffset<=t.height()+this.scrollTop&&!e.$loading&&e.page<e.totalNum/e.count&&e._getData({page:e.page+1})})},_getData:function(o,a){var s=this;return o=c.extend({count:r.defaults.count},o),s.$set("$loading",!0),new Promise(function(n,i){s.getData(o,function(t,e){s.$set("$loading",!1),t?i(t):(s.$set(c.extend({},o,{totalNum:e.totalNum})),a?s.$set("list",e.list):s.list.splice.apply(s.list,[s.list.length,0].concat(e.list)),(a||s.list.length)&&s.defaultSelect&&s.$set("selected",e.selected||e.list[0]),n(e))})})},getData:function(t,e){e(null,[{label:"label",value:"value"}])},filterData:function(t){return t},search:function(t){this._getData({page:1,searchKey:t},!0)}},{defaults:{initGetData:!0,defaultSelect:!1,styleType:1,page:1,count:20,filter:!0,openReset:!1,pagerOffset:20,label:"请选择"}});n.exports=r}),define("widget/selectors/AreaDropdownSelector",function(t,e,n){var i=t("qccomponent"),t=i.extend({$tpl:'    <div class="tc-15-dropdown tc-15-dropdown-btn-style tc-15-menu-active">        <a class="tc-15-dropdown-link" href="javascript:void(0);" b-on-click="toggle()">            <em>{{selected ? items[selected].label : \'请选择\'}}</em>            <i class="caret"></i>        </a>        <div class="tc-15-dropdown-menu area-dropdown-menu" b-style="{display: showDropdown ? \'block\' : \'none\'}">            <div b-repeat="group in groups">                <p class="text-weak">{{group.name}}</p>                <ul class="area-list">                    <li b-repeat="id in group.itemsId"                        class="{{selected == id ? \'cur\' : \'\'}}"                        disable={{items[id].disable}}                        data-id="{{items[id].id}}"                        b-on="{click: clickHandler(id)}"                    >                        <a href="javascript:void(0);">{{items[id].label}}</a>                    </li>                </ul>            </div>        </div>    </div>',$valuekey:"selected",clickHandler:function(e){var n=this;return function(){var t=n.items[e];t.disable||n.selectItem(e,t)}},selectItem:function(t,e){this.$set("selected",String(t)),this.$set("showDropdown",!1),this.onChange&&this.onChange(this.selected)},toggle:function(){this.$set("showDropdown",!this.showDropdown)}},{defaults:{selected:null,showDropdown:!1}});i.tag("area-dropdown-selector",t),n.exports=t}),define("widget/selectors/CvmSelector",function(t,e,n){var i=t("./ListSelector"),o=t("models/iaas"),a=t("appUtil"),i=i.extend({getData:function(n){var t=(n=n||{}).count||this.count,e=n.page||this.page,i=this,t=$.extend({},this.extraParam,{limit:t,offset:t*(e-1),projectId:this.projectId}),e=n.searchKey;return e&&(/^ins-\w{8}$/.test(e)?t.uInstanceIds=[e]:a.isValidIp(e)?t.searchWord=e:t.instanceName=e),this.request(t).then(function(t){var e=(t=t.data).deviceList||[],t=i.parseData({list:e,totalNum:t.totalNum});return(t=!t||!t.then?Promise.resolve(t):t).then(function(t){return $.extend({},n,t)})})},request:function(t){return o.apiRequest({regionId:this.regionId,cmd:"DescribeInstanceMainInfo",data:t,serviceType:"cvm"},{camTips:!1})},parseData:function(t){return t}},{defaults:{multipleSearch:!1,checkType:"radio",checkKey:"uInstanceId",colums:[{name:"主机ID/名称",key:"uInstanceId",tdTpl:'<p>{{item.uInstanceId}}</p><p class="text-overflow">{{item.alias}}</p>'},{name:"内网IP",key:"deviceLanIp"},{name:"公网IP",key:"deviceWanIp"}]}});n.exports=i}),define("widget/selectors/EniSelector",function(t,e,n){var i=t("./ListSelector"),o=t("models/iaas"),i=i.extend({getData:function(n){var t=(n=n||{}).count||this.count,e=n.page||this.page,i=this,e=$.extend({},{limit:t,offset:t*(e-1)},this.extraParam);return n.searchKey&&(/^eni-\w{8}$/.test(n.searchKey)?e.networkInterfaceId=n.searchKey:e.eniName=n.searchKey),o.apiRequest({regionId:this.regionId,cmd:"DescribeNetworkInterfaces",data:e,serviceType:"vpc"},{camTips:!1}).then(function(t){var e=(t=t.data).data||[],t=i.parseData({list:e,totalNum:t.totalNum});return(t=!t||!t.then?Promise.resolve(t):t).then(function(t){return $.extend({},n,t)})})},parseData:function(t){return t.list.forEach(function(t){t.ipNum=t.privateIpAddressesSet.length}),t}},{defaults:{multipleSearch:!1,checkType:"radio",checkKey:"networkInterfaceId",colums:[{name:"弹性网卡ID/名称",key:"networkInterfaceId",tdTpl:'<p>{{item.networkInterfaceId}}</p><p class="text-overflow">{{item.eniName}}</p>'},{name:"绑定IP数",key:"ipNum"}]}});n.exports=i}),define("widget/selectors/LbSelector",function(t,e,n){var i=t("widget/searchSelector/SearchSelector"),a=t("models/api"),o=i.extend({$afterInit:function(){o.__super__.$afterInit.call(this),this.$watch("vpcId",function(t){t!=undefined&&this.checkVpc(t)})},checkVpc:function(i){var o=this;this.list.forEach(function(t,e){var n=t.vpcId!=i,t={$disabled:n,title:n&&o.disabledTitle?o.disabledTitle:t.label};o.list.$set(e,t)})},getData:function(t,n){var o=this,e={offset:(t.page-1)*t.count,limit:t.count,projectId:t.projectId||this.projectId};t.searchKey&&(e.searchKey=t.searchKey),Promise.all([a.request({serviceType:"vpc",cmd:"DescribeVpcEx",data:{limit:999}}),a.request({serviceType:"lb",cmd:"DescribeLoadBalancers",data:e})]).then(function(t){var i={};t[0].data.reduce&&t[0].data.reduce(function(t,e){return t[+e.vpcId.split("_")[2]]=e.unVpcId,t},i);var e=t[1],t=e.loadBalancerSet.map(function(t,e){var n=(i[t.vpcId]||t.vpcId)!=o.vpcId;return o.selected&&o.selected.unLoadBalancerId==t.unLoadBalancerId&&setTimeout(function(){o.$set("selected",o.list[e])}),{label:t.loadBalancerName,value:t.loadBalancerId,unLoadBalancerId:t.unLoadBalancerId,vpcId:i[t.vpcId]||t.vpcId,$disabled:n,title:n&&o.disabledTitle?o.disabledTitle:t.loadBalancerName}});n(null,{list:t,totalNum:e.totalCount})},n)}},{defaults:{label:"请选择负载均衡",emptyTips:'{{searchKey ? "无搜索结果" : "无负载均衡"}}'}});n.exports=o}),define("widget/selectors/ListSelector",function(t,e,n){var i=t("qccomponent"),o=t("dialog"),a=t("widget/cam/cam"),i=i.extend({$tpl:'    <div>        <div class="search-box {{ multipleSearch ? \'multi-search-box\' : \'\' }}">            <form action="javascript:;" b-on-submit="search(keyword)">                <div class="search-input-wrap">                    <textarea b-if="multipleSearch" b-model="keyword" class="tc-15-input-text search-input" placeholder="{{searchPlaceholder}}"></textarea>                    <input b-if="!multipleSearch" b-model="keyword" type="text" class="tc-15-input-text search-input"  placeholder="{{searchPlaceholder}}" />                    <a href="javascript:;" b-on-click="clearSearch()" b-if="keyword" role="button" class="btn-rm-txt" title="清空">清空</a>                </div>                <input class="search-btn" type="button" b-on-click="search(keyword)" value="搜索">            </form>        </div>        <div class="tc-15-table-panel" b-on="_events">            <form action="javascript:;">            <div class="tc-15-table-fixed-head" b-style="{paddingRight: _hasYScroll ? scrollBarSize : 0}">                <table class="tc-15-table-box">                    <colgroup>                        <col b-if="showCheckColum" style="width: 50px">                        <col b-repeat="col in colums" b-style="{width: col.width || \'auto\'}">                    </colgroup>                    <thead>                    <tr>                        <th b-if="showCheckColum"></th>                        <th b-repeat="col in colums">                            <div>                                {{> col.thTpl || col.name || \'-\' }}                            </div>                        </th>                    </tr>                    </thead>                </table>            </div>            <div class="tc-15-table-fixed-body" b-style="tbodyStyle" b-ref="gridbody">                <table class="tc-15-table-box tc-15-table-rowhover">                    <colgroup>                        <col b-if="showCheckColum" style="width: 50px">                        <col b-repeat="col in colums" b-style="{width: col.width || \'auto\'}">                    </colgroup>                    <tbody>                    <tr tabindex="0" b-if="searchKey">                        <td class="text-center" colspan="{{colums.length + 1}}">                            <div b-if="totalNum">                                <span class="text-overflow">搜索"{{searchKey}}"，找到{{totalNum}}条结果。</span>                                <a href="javascript:;" b-on-click="clearSearch()">返回原列表</a>                            </div>                            <div b-if="!totalNum">                                <span class="text-overflow">抱歉，没有找到相关{{ searchItemName }}，尝试其他搜索条件。</span>                                <a href="javascript:;" b-on-click="clearSearch()">返回原列表</a>                            </div>                        </td>                    </tr>                    <tr tabindex="0" b-if="showAdd">                        <td class="text-center" colspan="{{colums.length + 1}}">                            <div>                                <a href="javascript:;">+ 创建弹性公网IP</a>                            </div>                        </td>                    </tr>                    <tr tabindex="0" b-repeat="item in list" class="{{item.$disable ? \'disable\': \'\'}}" data-title?="item.$disableTips">                        <td b-if="showCheckColum">                            <div class="tc-15-first-checkbox">                                <input data-check disabled?="item.$disable"                                       b-if="checkType == \'checkbox\'" type="checkbox" b-model="item.$checked" name="$checked" value="{{item[checkKey]}}" class="tc-15-checkbox">                                <input data-check disabled?="item.$disable"                                       b-if="checkType == \'radio\'" type="radio" b-model="$checked" data-value="{{item[checkKey]}}" name="$checked" value="{{item[checkKey]}}" class="tc-15-radio">                            </div>                        </td>                        <td b-repeat="col in colums">                            <div>                                {{> col.tdTpl || item[col.key] || \'-\' }}                            </div>                        </td>                    </tr>                    <tr tabindex="0" b-if="totalNum == 0 && !searchKey && !camTips">                        <td class="text-center" colspan="{{colums.length + 1}}">                            <div>                                {{emptyTips}}                            </div>                        </td>                    </tr>                    <tr tabindex="0" b-if="tips">                        <td class="text-center" colspan="{{colums.length + 1}}">                            <div>                                {{> tips }}                            </div>                        </td>                    </tr>                    <tr tabindex="0" b-if="loading">                        <td class="text-center" colspan="{{colums.length + 1}}">                            <div><i class="n-loading-icon"></i><span class="text">加载中...</span>                            </div>                        </td>                    </tr>                    </tbody>                </table>            </div>            </form>        </div>    </div>',$afterInit:function(){var t=this,e=$(this.$refs.gridbody);this.initGetData&&this.pullData({page:1},!0),$(this.$el).on("keydown",function(t){13===t.keyCode&&t.stopPropagation()}),this.scrollPager&&e.on("scroll",function(){this.scrollHeight-t.pagerOffset<=e.height()+this.scrollTop&&!t.loading&&t.page<t.totalNum/t.count&&t.pullData({page:t.page+1,searchKey:t.searchKey})})},pullData:function(e,n){var i=this;return i.showLoading(),i.$set("camTips",!1),this.getData.apply(this,arguments)["catch"](function(t){if(a.isCamRefused(t))return i.showTips("<cam-tips>"+t.message+"</cam-tips>"),i.$set("camTips",!0),{totalNum:0,list:[]};throw t}).then(function(t){return i.$set($.extend({},e,{totalNum:t.totalNum})),n?i.$set("list",t.list):i.list.splice.apply(i.list,[i.list.length,0].concat(t.list)),i.hideLoading(),i.$emit&&i.$emit("updated"),i.autoCenterDialog&&o&&o.center(),i.$set("_hasYScroll",i.$refs.gridbody.scrollHeight>i.$refs.gridbody.clientHeight),t})},search:function(t){this.pullData({page:1,searchKey:t&&t.trim()},!0)},clearSearch:function(){this.$set("keyword",""),this.search("")},getData:function(){return Promise.resolve({list:[],totalNum:0})},showLoading:function(){this.$set("loading",!0)},hideLoading:function(){this.$set("loading",!1)},showTips:function(t){this.$set("tips",t)},hideTips:function(t){this.$set("tips",null)},_events:{"click .tc-15-table-fixed-body tr":function(t){var e,n=$(t.currentTarget);n[0].bee&&((e=n[0].bee.$data).$disable||(n=n.find("[data-check]"),$(t.target).is(n)||n.click(),this.currentItem=e))}}},{defaults:{multipleSearch:!1,showCheckColum:!0,checkType:"checkbox",checkKey:"id",scrollBarSize:17,scrollPager:!0,searchPlaceholder:"请输入关键字",initGetData:!0,autoCenterDialog:!0,emptyTips:"列表为空",tbodyStyle:{maxHeight:300},pagerOffset:20,page:1,count:20,colums:[]}});n.exports=i}),define("widget/selectors/SgSelector",function(t,e,n){var i=t("./ListSelector"),o=t("models/iaas"),a=(t("appUtil"),i.extend({$afterInit:function(){a.__super__.$afterInit.call(this),this.$watch("projectId",function(t){!t&&0!==t||this.clearSearch()},!0)},getData:function(e){var n=this,t=(e=e||{}).searchKey,i=$.extend({},{projectId:this.projectId},this.extraParam);return t&&(/^sg-\w{8}$/.test(t)?i.sgId=t:i.sgName=t),o.apiRequest({regionId:this.regionId,cmd:"DescribeSecurityGroups",data:i,serviceType:"dfw"}).then(function(t){t=t.data||[];return $.extend({},e,n.parseData({list:t,totalNum:t.length}))})},parseData:function(t){return t}},{defaults:{multipleSearch:!1,scrollPager:!1,checkType:"checkbox",checkKey:"sgId",colums:[{name:"安全组ID/名称",key:"sgId",tdTpl:'<p><a href="/cvm/securitygroup/detail/{{item.sgId}}?rid={{regionId}}" target="_blank">{{item.sgId}}</a></p><p class="text-overflow">{{item.sgName}}</p>'},{name:"备注",key:"sgRemark"}]}}));n.exports=a}),define("widget/selectors/SubnetSelector",function(t,e,n){var i=t("qccomponent"),a=t("models/api"),s=t("manager"),c=t("appUtil"),o=i.extend({$tpl:'    <div class="tc-15-table-panel network-table">        <div class="tc-15-table-fixed-body">            <table class="tc-15-table-box tc-15-table-rowhover">                <colgroup>                    <col class="tc-15-table-col1" style="width: 5%">                    <col class="tc-15-table-col2">                </colgroup>                <tbody>                <tr tabindex="0" title?="item.$disabled !== true && item.$disabled" b-repeat="item in list" b-ref="list" class="{{item.$disabled ? \'disable\': \'\'}}">                    <td>                        <div class="tc-15-first-checkbox">                            <input disabled?="disabled || item.$disabled || (!item.$selected && disabledUnSelect)" b-model="item.$selected" id="lb-{{item.value}}" type="checkbox" class="tc-15-checkbox" value="{{item.value}}" />                        </div>                    </td>                    <td>                        <div style="height: 42px; line-height: 42px">                            <label for="lb-{{item.value}}" style="height: 100%;display: block;">                                <span class="text-overflow">{{item.label}}</span>                            </label>                        </div>                    </td>                </tr>                <tr b-if="vpcId != 0 && !list.length">                    <td colspan="2">                        <div>                            当前网络没有子网                        </div>                    </td>                </tr>                </tbody>            </table>        </div>    </div>',$valuekey:"selected",$afterInit:function(){o.__super__.$afterInit.call(this),this.$watch("[vpcId, regionId,disableItems]",this.reload.bind(this),!0),this.$watch("list",function(t){t.map&&(t=t.filter(function(t){return t.$selected}),this.$set("selected",t))},!0),this.$watch("selected",function(t){var e=this.list,i=this;t&&t.forEach(function(n){e.forEach(function(t,e){i.$refs.list[e].$set("$selected",n.value==t.value&&t.label==t.label)})})},!0)},getData:function(n,i){var o=this;return i=i||c.getRegionId(),new Promise(function(e,t){0==+n?s.queryZone(i,function(t){e(t.map(function(e){var n={label:e.zoneName,status:e.status,value:e.zoneId,$selected:o.defaultSelected&&o.defaultSelected.some(function(t){return t.zoneId==e.zoneId})};return o.disableItems&&o.disableItems.some(function(t){if(e.zoneId==t.id)return n.$disabled=t.title||!0,!0}),n}).filter(function(t){return t.status&&!(-1<(o.hideItems||[]).indexOf(+t.value))}))},t):a.request({serviceType:"vpc",cmd:"DescribeSubnetEx",regionId:i,data:{vpcId:n,limit:999}}).then(function(t){e(t.data.map(function(e){var n={label:e.unSubnetId+" ("+e.subnetName+")",value:e.unSubnetId,$selected:o.defaultSelected&&o.defaultSelected.some(function(t){return t.subnetId==e.unSubnetId})};return o.disableItems&&o.disableItems.some(function(t){if(e.zoneId==t.id)return n.$disabled=t.title||!0,!0}),n}))},t)})},reload:function(){var e=this;this.getData(this.vpcId,this.regionId).then(function(t){e.$set("list",t)})}});n.exports=o}),define("widget/selectors/VpcSelector",function(t,e,n){var i=t("widget/searchSelector/SearchSelector"),c=t("models/api"),i=i.extend({getData:function(t,o){var a=this,s={offset:t.page-1,limit:t.count,regionId:t.regionId};t.searchKey&&(s.vpcName=t.searchKey),c.request({cmd:"DescribeVpcEx",serviceType:"vpc",data:s}).then(function(t){var e,n=a.selected,i=t.data.map(function(t){return t.isDefault&&(e=!0),{label:t.isDefault?t.unVpcId+" | "+t.vpcName+"（默认）":t.unVpcId+" | "+t.vpcName,value:t.unVpcId,isDefault:t.isDefault}});a.baseNetwork&&0==s.offset&&i.unshift({label:"基础网络",value:"0"}),!a.baseNetwork&&a.showNewDefaultVpc&&(e||(i.unshift({isDefault:!0,label:"Default-VPC（默认）",value:"",title:"系统将默认创建一个/16的私有网络"}),1<i.length&&(n=i[1]))),o(null,{list:i,totalNum:t.totalCount,selected:n})},o)}},{defaults:{count:999,defaultSelect:!0,style:"min-width: 120px",baseNetwork:!0,filter:!1,label:"加载中...",showNewDefaultVpc:!1,emptyTips:'{{searchKey ? "无搜索结果" : "无私有网络"}}'}});n.exports=i}),define("widget/shutdownTip/shutdownTip",function(t,e,n){var i=t("$"),o=t("appUtil"),a=t("util"),s=t("dialog"),c=t("manager"),r='    <div class="coin-alert" id="getFlowCscResultErrTip">        <table class="ui-popmsg">            <tbody>                <tr>                    <td height="72" class="i"><i class="ico ico-warn mr10"></i></td>                    <td height="72" class="t">                        <span class="info"><span class="tit">下列云主机<%=opName%>失败</span><br></span>                        <ul style="padding:5px 0;color:#666" id="shutDownTipDevice"><li style="color:#999;font-size:12px">正在加载...</li></ul>                        <div>                            <% if (from == "password") { %>                                请检查用户名是否正确后重试!                            <% } else { %>                                请将上述云服务器关机后重试!                            <% } %>                        </div>                    </td>                </tr>            </tbody>        </table>    </div>',l="    <% for (var i = 0, item; item = deviceList[i]; i++) { %>        <li><%=item.alias%> (<%-item.deviceLanIp%>)</li>    <% } %>",t={resolve:function(t,e){var n=[];if("password"==e&&t&&t.operate&&t.operate.detail&&t.operate.detail.length)for(var i=0;o=t.operate.detail[i];i++)o.error_code!=undefined&&0!=o.error_code&&n.push(o.instance_name);else if("sshkey"==e&&t&&t.resultDetail&&t.resultDetail.failedList&&t.resultDetail.failedList.length)for(var o,i=0;o=t.resultDetail.failedList[i];i++)o.result&&o.result.errorCode&&-8614==o.result.errorCode&&n.push(o.uuid);n.length&&this.show(n,e)},show:function(t,e){var n="";"password"==e?n="重置密码":"sshkey"==e&&(n="操作密钥");e=a.tmpl(r,{opName:n,from:e});s.create(e,420,"",{title:"操作失败",isMaskClickHide:!1,button:{"关闭":function(){s.hide()}},defaultCancelBtn:!1}),c.getCvmList({count:t.length,offset:0,regionId:o.getRegionId(),uuidList:t},function(t){t=t.deviceList,t=a.tmpl(l,{deviceList:t});i("#shutDownTipDevice").html(t)})}};n.exports=t}),define("widget/step/step",function(t,e,n){var s=t("$"),i=t("event"),o=t("lib/Class"),c=t("dialog"),t=function(){},a=function a(t){t=t||{},s.extend(this,t),this._loaded=[],this.curStep=0,this.init()};s.extend(a.prototype,{width:700,title:"",content:"",steps:2,nextText:"下一步",confirmText:"确定",preBtnTpl:'<a href="javascript:;" data-event="prev" class="back-btn" style="display: none" role="button"></a>',stepMap:{0:t,1:t},onConfirm:t,onClose:t,init:function(){var t=this;this.$dialog=c.create(this.content,this.width,"",{title:this.title,beforeButtonHtml:this.preBtnTpl,preventResubmit:!0,isMaskClickHide:!1,button:{"":function(){t.next()}},defaultCancelCb:function(){t.destroy()}}),this.bindEvent(),this.$nextBtn=this.$dialog.find(".btn.btn_blue"),this.$prevBtn=this.$dialog.find("a[data-event=prev]"),t.$dialog.find("[data-step]:not(:first)").hide(),this.step(0)},destroy:function(){c.hide(),this.onClose(),s(this).trigger("stepclose")},next:function(t){void 0===t&&(t=this.curStep+1),this.step(t)},prev:function(t){void 0===t&&(t=this.curStep-1),this.step(t)},step:function(i){var t,e,n,o,a=this;c.toggleBtnDisable(!0),i===this.steps?(t=this.onConfirm())&&t.then?t.then(function(){a.destroy()},function(){c.toggleBtnDisable(!1)}):!1!==t?a.destroy():c.toggleBtnDisable(!1):((o=a.$dialog.find("[data-step="+i+"]")).data("loading",!0),t=this.stepMap[i].call(this,this,o,a._loaded[i]),e=function(){0===i?(a.$curStep=o,this.$prevBtn.hide(),this.$nextBtn.text(this.nextText)):(this.$prevBtn.show(),i===this.steps-1?this.$nextBtn.text(this.confirmText):this.$nextBtn.text(this.nextText)),a.$dialog.find("[data-step]").hide(),o.fadeIn(),a.$curStep=o,c.toggleBtnDisable(!1),o.data("loading",!1),c.center(),a._loaded[i]=!0;var t=a.curStep;a.curStep=i,s(a).trigger("stepchange",[i-t]);var e=c.el.find('[data-field="step-ui"]');if(e.length){e.find("li").addClass("disabled");for(var n=0;n<=i;n++)e.find("li").eq(n).removeClass("disabled")}}.bind(this),n=function(){c.toggleBtnDisable(!1),o.data("loading",!1)},t&&t.then?t.then(e,n):(!1===t?n:e)())},bindEvent:function(){var t=this;i.bindCommonEvent(this.$dialog.find(".dialog_layer_ft")[0],"click",{prev:function(){t.prev()}})}}),s.extend(a,o),n.exports=a}),define("widget/step/steps",function(t,e,n){var i=t("qccomponent").extend({$tpl:'    <div>        <div class="tc-15-step col{{steps.length + 1}}">            <ol>                <li b-repeat="step in steps" class="{{$index <= curStep ?  \'\' : \'disabled\'}}">                    <div class="tc-15-step-name" b-on-click="prev($index)" b-style="{cursor: $index < curStep ? \'pointer\' : \'\'}">                        <span class="tc-15-step-num">{{$index + 1}}</span>                        {{step.title}}                    </div>                    <div class="tc-15-step-arrow" b-if="$index < steps.length - 1"></div>                </li>            </ol>        </div>        <div>            <div b-ref="steps" b-repeat="step in steps" b-style="{display: $index == curStep ? \'\' : \'none\'}">                {{> step.content }}            </div>        </div>        {{> footerTpl }}    </div>',footerTpl:'    <div class="create-2-btn-ground" b-if="showBtns" style="margin-bottom: 1.5em;overflow:hidden">        <button b-ref="prev" b-if="curStep" type="button" class="tc-15-btn {{disable ? \'disabled\' : \'\'}}"                disabled?="disable" b-on-click="prev()">{{prevBtn}}</button>        <div class="create-2-fr">            <button b-ref="next" type="button" class="tc-15-btn {{disable ? \'disabled\' : \'\'}}"                    disabled?="disable" b-on-click="next()">{{curStep == steps.length -1 ? confirmBtn : nextBtn}}</button>            <button b-ref="cancel" b-if="cancel" type="button"                    class="tc-15-btn weak" b-on-click="_cancel()">{{cancelBtn}}</button>        </div>    </div>',$afterInit:function(){i.__super__.$afterInit.call(this),this._step(0)},next:function(){var t,e=this;e.disable||!1!==(t=this._confirm())&&(t&&t.then?(e.$set("disable",!0),t.then(function(){e.$set("disable",!1),e._step(e.curStep+1)},function(){e.$set("disable",!1)})):this._step(this.curStep+1))},prev:function(t){this.disable||(t=t==undefined?this.curStep-1:t)<this.curStep&&this._step(t)},_step:function(t){0<=t&&t<=this.steps.length-1&&(0<t&&this.$refs.steps[t-1].$set({_done:!0}),this.$set("curStep",t),this._init())},_init:function(t){return t=void 0===t?this.curStep:t,this.steps[t]&&this.steps[t].init&&this.steps[t].init.apply(this,[this.steps[t],t])},_confirm:function(t){return t=void 0===t?this.curStep:t,this.steps[t]&&this.steps[t].confirm&&this.steps[t].confirm.apply(this,[this.steps[t],t])},_cancel:function(){this.cancel&&this.cancel()},steps:[]},{defaults:{nextBtn:"下一步",prevBtn:"上一步",cancelBtn:"取消",confirmBtn:"完成",showBtns:!0}});n.exports=i}),define("widget/tabGroup/tabGroup",function(t,e,n){var i=t("qccomponent"),i=(t("manager"),t("constants"),t("appUtil"),i.extend({valueKey:"selected",tabs:[],list:[],content:"",$afterInit:function(){var t,e=this.selected||this.list&&this.list[0];e&&(t=this.getIndex(e),(e=this.list[t])&&this._onChange(e,t))},showPager:function(){this.$set("isShowPager",!0)},hidePager:function(){this.$set("isShowPager",!1)},_onChange:function(t,e){t&&(this.$set("selected",t),this.$set("currentIndex",e),this.onChange(t,e))},getIndex:function(n){var i=-1;return this.list.some(function(t,e){if(t.id===n.id)return i=e,!0}),i},prev:function(){var t=this.selected,e=this.getIndex(t)-1,t=this.list[e];t&&this._onChange(t,e)},next:function(){var t=this.selected,e=this.getIndex(t)+1,t=this.list[e];t&&this._onChange(t,e)},onChange:function(t,e){},$tpl:'    <div>        <div class="tc-15-rich-radio" role="radiogroup" b-if="!hideTab">            <a href="javascript:;" b-if="isShowPager" class="btn-last" b-on-click="prev()">上一个</a>            <div>                <button b-repeat="item in list" b-on-click="_onChange(item,$index)" class="tc-15-btn first m {{item.id==selected.id? \'checked\' : \'\'}} {{item.$disabled? \'disabled\': \'\'}}"                        role="radio" disabled?="item.$disabled" aria-checked?="item.id==selected.id">{{item.label}}</button>            </div>            <a href="javascript:;" b-if="isShowPager" class="btn-next" b-on-click="next()">下一个</a>        </div>        {{> content }}    </div>'},{defaults:{}}));n.exports=i}),define("widget/timePills/timePills",function(t,e,n){var c=t("$"),r=t("util"),t=function(t){var e={renderTo:null,data:this.getData(),change:null,activeCls:"checked",tpl:'<div>        <div class="tc-15-rich-radio <%= className %>" role="radiogroup">                <% for (var i=0, item; item = list[i]; i++) { %>                    <% if (!item.hide) { %>                    <button type="button" data-value="<%- item.value %>" data-name="<%- item.name %>" <% if (item.label) { %>data-label="<%= item.label %>" <% } %>  class="tc-15-btn m <% if (item.active) { %> checked <% } %>  <% if (item.disabled) { %> disabled <% } %>" data-title="<%= item.tips %>">                        <span data-name="<%- item.name %>"><%= item.name %></span>                        <% if (showDiscountIcon && item.iconClass) { %> <i class="<%= item.iconClass %>"><%= item.iconText %></i> <% } %>                     </button>                    <% } %>                <% } %>            </div>            <% if (showOtherTime) { %>                <a href="javascript:(0)" data-event="otherTime">其他时长</a>            <% } %></div>',showOtherTime:!0,showDiscountIcon:!0,defaultTriggerChange:!1};if(this.options=c.extend({},e,t),e=this.options.renderTo){e=c(e),t=r.tmpl(this.options.tpl,{list:this.options.data,className:this.options.className,showOtherTime:this.options.showOtherTime,showDiscountIcon:this.options.showDiscountIcon}),t=c(t);return this.$el=t,e.append(t),this.bindEvent(),this.options.defaultTriggerChange&&this.getActiveObj().trigger("click"),this}};t.prototype={bindEvent:function(){var t=this;t.$el.find("button:not(.disabled)").on("click",function(){t.select(this),t.change()}),t.$el.find("[data-event=otherTime]").on("click",function(){this.remove(),t.setData(t.getData(!0))})},select:function(t){var e=this.options.activeCls,n=this.$el.find("."+e),i=c(t),o=i.data("label")||"",t=n.data("name");n.removeClass(e).find("span").text(t),i.addClass(e),o&&i.find("span").text(o)},status:function(t){for(var e in t.values)t.disabled?this.$el.find('[data-value="'+t.values[e]+'"]').addClass("disabled"):this.$el.find('[data-value="'+t.values[e]+'"]').removeClass("disabled")},change:function(){var t=this.options.change,e=this.val();t&&t.call(this,e)},getActiveObj:function(){return this.$el.find("."+this.options.activeCls)},val:function(t){var e=this.$el;if(t===undefined)return e.find("."+this.options.activeCls).attr("data-value");t=e.find('[data-value="'+t+'"]');t.length&&this.select(t)},setData:function(t){if(t&&t.length){for(var e=this.$el,n=this.getCheckedData(),i=this.options.tpl,o=!1,a=0;a<t.length;a++){var s=t[a];if(s.name==n.name&&s.value==n.value){o=s.active=!0;break}s.active=!1}i=r.tmpl(i,{list:t,className:this.options.className,showOtherTime:!1,showDiscountIcon:this.options.showDiscountIcon});e.html(c(i)),this.options.data=t,this.bindEvent(),o||e.find("button:not([disabled])").first().trigger("click")}},getCheckedData:function(){for(var t=this.options.data,e={value:this.getActiveObj().data("value")},n=0;n<t.length;n++)if(t[n].value==e.value){e.name=t[n].name;break}return e},getData:function(t){var e=[],n=0;if(t){for(n=1;n<=5;n++)e.push({label:n+"个月",name:n,value:n});for(n=6;n<=11;n++)e.push({label:n+"个月",name:n,value:n,iconClass:"icon-hui",iconText:"88折"})}else for(n=1;n<=3;n++)e.push({label:n+"个月",name:n,value:n});return e.concat([{name:"1年",value:"12",active:!0,iconClass:"icon-hui",iconText:"83折"},{name:"2年",value:"24",iconClass:"icon-hui",iconText:"7折"},{name:"3年",value:"36",iconClass:"icon-hui",iconText:"5折"}])}},n.exports=t}),define("widget/uploadfile/uploadfile",function(t,e,n){var i=t("$"),o=t("util"),a=t("net"),t=function(t){var e=o.getUin();if(this.options=i.extend({},{renderTo:null,data:null,loading:null,success:null,fail:null},t),n=this.options.renderTo){var t=a._addParam(this.options.data.cgi,{action:this.options.data.action||"uploadImgFile",uin:e,csrfCode:o.getACSRFToken(),skey:o.cookie.get("skey"),format:"iframe",t:(new Date).getTime()}),n=i(n),t=o.tmpl('<style>.upload-form, .upload-file{cursor: pointer; opacity: 0; filter: alpha(opacity=0); position: absolute; top: 0; right: 0; bottom: 0; left: 0; z-index: 1; width: 100%; height: 100%}</style><form class="upload-form" action="<%=url%>" enctype="multipart/form-data" method="post"><input class="upload-file" type="file" name="uploadfile" accept="<%=data.filetypes%>" /><input type="hidden" name="uin" value="<%=uin%>" /><input type="hidden" name="<%=data.name%>" <%=data.attr%> placeholder="<%=data.placeholder%>" value="" /><input type="hidden" name="photo_flag" value="<%=data.photo_flag%>"></form>',{data:this.options.data,uin:e,url:t});return n.css({position:"relative",overflow:"hidden"}),n.append(t),this.$form=n.find("form"),this.$file=n.find('input[type="file"]'),this.bindEvent(),this}};t.prototype={bindEvent:function(){var t=this;this.$file.change(function(){t.change()})},check:function(){var t=new RegExp("."+this.options.data.filetypes.replace(/image\/|\s/g,"").replace(/\,/g,"|."),"ig"),e=this.$file.val().split(/\\|\//).pop(),e={chkName:t.test(e),chkSize:!0};return window.File&&window.FileList&&2048<this.$file[0].files[0].size/1024&&(e.chkSize=!1),e},change:function(){var t=this.$file.val().split(/\\|\//).pop();t&&(this.onChange({name:t}),(t=this.check()).chkName||this.onFail({msg:"文件格式必须为JPG或PNG"}),t.chkSize||this.onFail({msg:"文件大小不能超过2M"}),t.chkName&&t.chkSize&&this.submit())},submit:function(){this.renderIframe()},onLoading:function(){this.options.loading&&this.options.loading()},onChange:function(t){this.options.change&&this.options.change(t)},onFail:function(t){this.options.fail&&this.options.fail(t)},onSuccess:function(t){this.options.success&&this.options.success(t)},renderIframe:function(){var e=this,t="iframeTarget"+(new Date).getTime();/msie [\w.]+/.test(navigator.userAgent.toLowerCase())&&(n='javascript:false;document.write("");');var n=o.tmpl('<iframe name="<%=name%>" <%if(src){%> <%=src%> <%}%> style="display:none"></iframe>',{name:t,src:n||!1});this.$iframeForm=i(n),this.iframeForm=this.$iframeForm[0],this.$form.attr("target",t),setTimeout(function(){e.$iframeForm.appendTo("body"),e.$iframeForm.load=e.cb,e.iframeForm.callback=function(t){t&&0==t.code?e.onSuccess(t.data):e.onFail(t.data)},e.$form.submit(),e.onLoading()},10)},cb:function(){this.$iframeForm.remove()}},n.exports=t}),define("widget/validate/validate",function(t,e,n){var s=t("$"),t={validate:function(t,e){var n=this;this.$container=t,this.opt=e||{},this.opt.rules=this.opt.rules||{},this.opt.ignoreBlurSuccess=this.opt.ignoreBlurSuccess||{},this.opt&&s.each(this.opt.rules,function(t,e){n._bind(t)})},_bind:function(e){var n=this,i=(n.opt.rules[e],n.opt.ignoreBlurSuccess),t=n.$container.find('[name="'+e+'"]'),o=t.closest('[data-role="fieldcont"]'),a=(o=o.size()<=0?t.parent():o).find(".icon-valid-flag"),s=o.find(".form-input-help"),c=s.text();t.focus(function(){s.text(c),o.removeClass("is-success").removeClass("is-error")}),t.blur(function(){var t=n._check(e);t.errmsg?(s.text(t.errmsg),o.addClass("is-error")):(s.text(c),!i[e]&&t&&t.val&&o.addClass("is-success")),a.show()})},_setErrStatus:function(t,e){this.opt.rules[t];var n=this.$container.find('[name="'+t+'"]'),i=n.closest('[data-role="fieldcont"]'),t=(i=i.size()<=0?n.parent():i).find(".icon-valid-flag"),n=i.find(".form-input-help");t.show(),n.text(e.errmsg),i.addClass("is-error")},_check:function(t){var e=this.opt.rules[t],n=this.$container.find('[name="'+t+'"]'),i=n.attr("data-field-title")||"";"string"==typeof e&&((t={})[e]=!0,e=t);var o=this.getRealValue(n),a=[];return s.each(e,function(t,e){var n=d["fn_"+t];if(!n)return a.push("验证规则("+t+")不存在"),!1;e=n(o,e);return!0!==e?(a.push(i+e),!1):void 0}),{val:o,errmsg:a.join("")}},getRealValue:function(t){if(0==t.size())return"";var e=t.attr("type");t.get(0).tagName;if("checkbox"!=e&&"radio"!=e)return t.val();var n=[];return t.each(function(t,e){s(e).prop("checked")&&n.push(s(e).val())}),0==n.length?"":n},isValidate:function(){var i=this,o=[],a={};return this.opt.rules&&s.each(this.opt.rules,function(t,e){var n=i._check(t);n.errmsg?(o.push(n.errmsg),i._setErrStatus(t,n)):a[t]=n.val}),{errmsg:o.join(""),param:a}}},i=/^[1-9]\d{4,13}$/,o=/^[0-9]+$/,a=/^[0-9\-]+$/,c=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]*\.){1,63}[a-z0-9]+$/i,r=/^((http|https|ftp):\/\/)?(\w(\:\w)?@)?([0-9a-z_-]+\.)*?([a-z0-9-]+\.[a-z]{2,6}(\.[a-z]{2})?(\:[0-9]{2,6})?)((\/[^?#<>\/\\*":]*)+(\?[^#]*)?(#.*)?)?$/i,l=/^(([-\u4E00-\u9FA5a-z0-9]{1,61})\.)+([\u4E00-\u9FA5a-z]{2,63})$/,d={fn_required:function(t,e){return!!t||"不能为空"},fn_qq:function(t,e){return!!i.test(t)||"不满足QQ号规则"},fn_number:function(t,e){return!!o.test(t)||"不满足数字规则"},fn_phone:function(t,e){return!!a.test(t)||"不满足电话号码规则"},fn_email:function(t,e){return!!c.test(t)||"不满足Email地址规则"},fn_url:function(t,e){return!!r.test(t)||"不满足URL规则"},fn_minLength:function(t,e){return undefined!=t&&t.length>=e||"不满足最低长度"},fn_maxLength:function(t,e){return undefined!=t&&t.length<=e||"超过最大长度"},togetherWith:function(t,e){},fn_domain:function(t,e){return!(undefined==t||!l.test(t))||"不合法"},fn_domain3:function(t,e){return undefined!=t&&l.test(t)?!(t.split(".").length<=2)||"仅支持单个非一级域名，如：a.abc.com":"不合法"}};n.exports=t}),define("widget/validator/util",function(t,e,n){var r=t("qccomponent").getComponent("qc-popover"),l=t("appUtil"),i=t("util"),d=t("tips"),o=function(){};i.insertStyle(".vpc-input-error {border-color: #e1504a!important;color: #e1504a!important;outline: 0 none!important}"),n.exports={_toggleError:function(t,e,n){var i,o,a,s,c;t=$(t),n=n||{},!e||t&&t.length&&t.is(":visible")?(i=!!e,o=t,a="last-error-tip",s=n.errClass||"vpc-input-error is-error",o.toggleClass(s,i),c=t.data(a),i?(n.scrollIntoView&&t[0].scrollIntoView(),t.focus(),c||(c=new r({$data:$.extend({trigger:"",hideDestroy:!0,content:e},t.data(),{target:t[0],handler:n.$btn,attachEl:n.attachEl||t[0]}),$afterDestroy:function(){t.data(a,null)}}),t.is(":text,textarea")&&t.one("keyup.errorTip",function(){c.hide()}),c.hide=l.beforeFn(c.hide,function(){o.removeClass(s),t.off(".errorTip")}),t.data(a,c)),c.$set("content",e),c.show()):c&&c.hide()):e&&d.error(e)},multiValidate:function(t,e,n,i,o){var a,s,c;for(e=e||Object.keys(t),n=n||{},o=o||{},i=$(i),a=0;a<e.length;a++)if(c=e[a],this[c]&&(s=this[c](t[c],n[c],t),i.length&&(c=this._find$el(i,c,o),this._toggleError(c,s,o)),s))return s},_find$el:function(t,e,n){return n=n||{},(t=$(t)).find("["+(n.attr||"data-name")+'="'+e+'"]')},extend:function(t){o.prototype=this;var e=new o;return $.extend(e,t)}}}),define("widget/validator/validator",function(t,e,n){var u=t("$"),p=t("appUtil"),t={showErr:function(t,d){return t=u(t),d=u.extend({needFocus:1},d),t.each(function(){var e=u(this),n=d.tipEl,t=d.errMode;n||(n=t?e.parent().find(".tc-15-input-tips"):e.next(".wrong")).length||(n=(t?u("<div/>").addClass("tc-15-input-tips"):u("<span/>").addClass("wrong")).insertAfter(e)),(n=u(n)).data("origHtml")===undefined&&n.data("origHtml",n.html()),t?e.closest(".tc-15-input-text-wrap").addClass("error"):e.addClass("red"),d.tip&&n.html(d.tip).show();var t=d.focusObj||e,t=u(t),i=d.evtTriggerObj||e,i=u(i),o=d.evtType||"default";d.needFocus&&t.focus();var a,s,c,r,l=function(t){t&&t(),e.removeClass("red"),e.closest(".tc-15-input-text-wrap").removeClass("error"),n.data("origHtml")?n.html(n.data("origHtml")):n.hide()};"default"==o?(a=function(){i.off("keydown",s)},s=function(){l(a)},a(),i.on("keydown",s)):(c=function(){i.off(o,r)},r=function(){l(c)},c(),i.on(o,r)),p.restoreDialogBtn(),d.callback&&d.callback()}),!1}};n.exports=t}),define("widget/validator/validatorV2",function(t,e,n){var i=t("lib/Class"),o=t("widget/popover/popover"),r=t("$"),a=t("appUtil"),t=function(t){t=t||{},r.extend(this,t),this._rules=r.extend({},this.constructor.rules,t.rules)};r.extend(t.prototype,{errClass:"error",typeAttr:"name",validateSelector:"[data-validate]",rules:null,showErr:function(t,e,n){(n=n||{}).silence||(n.noTips||this.showTips(t,e,n.popoverOpts),r(t).addClass(this.errClass))},hideErr:function(t){this.hideTips(t),r(t).removeClass(this.errClass)},showTips:function(t,e,n){n=r.extend({className:"error-tops",position:"left"},this.popover,n);new o('<i class="err-icon"></i><span class="error-txt">'+e+"</span>",n).show(t)},hideTips:function(t){t=r(t).data("popover");t&&t.hide()},validate:function(t,e,n){e=e||{};var i,o=r(t),a=e.value||t.value,s=e.type||o.attr(this.typeAttr),o=this._rules;if(o[s]){if(!t.disabled&&(i=o[s].call(this,a,t,n)))return(e.showErr||this.showErr).call(this,t,i,e,n),!1}else console.error("没有找到校验规则: "+s);return(e.hideErr||this.hideErr).call(this,t),!0},checkAll:function(t){for(var e,n=r(t).find(this.validateSelector),i=!0,o=0,a=n.length;o<a;o+=1)if(e=n[o],!this.validate(e,{showErr:r.noop,hideErr:r.noop,noTips:!0})){i=!1;break}return i},validateAll:function(t,e){for(var n,i,o=r(t).find(this.validateSelector),a=!0,s=0,c=o.length;s<c;s++)i=o[s],n=this.validate(i,{noTips:!0},e),a&&!n&&(i.focus&&i.focus(),i.select&&i.select(),i.scrollIntoView(!1),a=!1,this.validate(i,{},e));return a}}),r.extend(t,i,{rules:{name:function(t){var e=!1;return t?25<t.length?e="您输入的名称过长了":a.isValidName(t)||(e='名称仅支持中文、英文、数字、下划线、分隔符"-"、小数点'):e='请输入名称，名称仅支持中文、英文、数字、下划线、分隔符"-"、小数点',e},email:function(t){t=!(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)&&t.length<=60)&&"请输入正确的邮箱地址";return t},phone:function(t){return ret=(!/^[1]{1}[3-8]{1}[0-9]{1}\d{8}$/.test(t)||11!==t.length)&&"请输入正确的大陆手机号码",ret}}}),n.exports=t}),define("widget/devtoolsDetector/devtoolsDetector",function(t,e,n){var i=t("$"),t=t("appUtil"),o={open:!1,orientation:null};function a(){var t=160<window.outerWidth-window.innerWidth,e=160<window.outerHeight-window.innerHeight,n=t?"vertical":"horizontal";e&&t||!(window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized||t||e)?(o.open=!1,o.orientation=null):(o.open=!0,o.orientation=n)}a(),i(window).off("resize.devtoolsDetector").on("resize.devtoolsDetector",t.throttle(function(){a()},500)),n.exports=o}),define("widget/zoomDetector/detectZoom",function(t,e,n){var i,o=function(){return window.devicePixelRatio||1},a=function(){var t=Math.round(screen.deviceXDPI/screen.logicalXDPI*100)/100;return{zoom:t,devicePxPerCssPx:t*o()}},s=function(){var t=Math.round(document.documentElement.offsetHeight/window.innerHeight*100)/100;return{zoom:t,devicePxPerCssPx:t*o()}},c=function(){var t=Math.round(window.outerWidth/window.innerWidth*100)/100;return{zoom:t,devicePxPerCssPx:t*o()}},r=function(){var t=Math.round(document.documentElement.clientWidth/window.innerWidth*100)/100;return{zoom:t,devicePxPerCssPx:t*o()}},l=function(){var t=(90==Math.abs(window.orientation)?screen.height:screen.width)/window.innerWidth;return{zoom:t,devicePxPerCssPx:t*o()}},d=function(){var t=function(t){return t.replace(/;/g," !important;")},e=document.createElement("div");e.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0",e.setAttribute("style",t("font: 100px/1em sans-serif; -webkit-text-size-adjust: none; text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;"));var n=document.createElement("div");n.setAttribute("style",t("width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;")),n.appendChild(e),document.body.appendChild(n);e=1e3/e.clientHeight,e=Math.round(100*e)/100;return document.body.removeChild(n),{zoom:e,devicePxPerCssPx:e*o()}},u=function(){var t=f("min--moz-device-pixel-ratio","",0,10,20,1e-4);return{zoom:t=Math.round(100*t)/100,devicePxPerCssPx:t}},p=function(){return{zoom:u().zoom,devicePxPerCssPx:o()}},h=function(){var t=window.top.outerWidth/window.top.innerWidth;return{zoom:t=Math.round(100*t)/100,devicePxPerCssPx:t*o()}},f=function(a,s,t,e,n,c){var i,o,r,l=window.matchMedia||(i=document.getElementsByTagName("head")[0],o=document.createElement("style"),i.appendChild(o),(r=document.createElement("div")).className="mediaQueryBinarySearch",r.style.display="none",document.body.appendChild(r),function(t){o.sheet.insertRule("@media "+t+"{.mediaQueryBinarySearch {text-decoration: underline} }",0);t="underline"==getComputedStyle(r,null).textDecoration;return o.sheet.deleteRule(0),{matches:t}}),n=function d(t,e,n){var i=(t+e)/2;if(n<=0||e-t<c)return i;var o="("+a+":"+i+s+")";return l(o).matches?d(i,e,n-1):d(t,i,n-1)}(t,e,n);return r&&(i.removeChild(o),document.body.removeChild(r)),n},m=(i=function(){return{zoom:1,devicePxPerCssPx:1}},isNaN(screen.logicalXDPI)||isNaN(screen.systemXDPI)?window.navigator.msMaxTouchPoints?i=s:window.chrome&&!(window.opera||0<=navigator.userAgent.indexOf(" Opera"))?i=c:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")?i=r:"orientation"in window&&"webkitRequestAnimationFrame"in window?i=l:"webkitRequestAnimationFrame"in window?i=d:0<=navigator.userAgent.indexOf("Opera")?i=h:window.devicePixelRatio?i=p:.001<u().zoom&&(i=u):i=a,i);n.exports={zoom:function(){return m().zoom},device:function(){return m().devicePxPerCssPx}}}),define("widget/zoomDetector/zoomDetector",function(t,e,n){var i=t("$"),o=t("util"),a=t("appUtil"),s=t("widget/zoomDetector/detectZoom"),c=t("widget/devtoolsDetector/devtoolsDetector"),r='<div class="qc-win-scale tip-msg-win J-zoomWarning"><div class="tc-15-msg warning"><div class="tip-info"><i class="remind-icon"></i><div class="msg-span">                <%if(isWindows){%>                    页面缩放比例异常，会影响功能的正常使用，请尝试调整缩放比例为100%<span>(快捷键 ctrl+0)</span>                <%}else{%>                    页面缩放比例异常，会影响功能的正常使用，请尝试调整缩放比例为100%<span>(快捷键 cmd+0)</span>                <%}%></div><div class="qc-win-scale-btn"><a href="javascript:;" class="J-ignoreZoomWarning">不再提醒</a><a href="javascript:;" class="J-closeZoomWarning">关闭</a></div></div></div></div>';n.exports={init:function(){},check:function(){var t=s.zoom(),e=!1,n=c.open;window.localStorage&&(e=window.localStorage.ignoreZoomWarning),(t<.97||1.05<t)&&1!=e&&!n?this.showZoomWarning():i(".J-zoomWarning").fadeOut()},isMacintosh:function(){return-1<navigator.platform.indexOf("Mac")},isWindows:function(){return-1<navigator.platform.indexOf("Win")},showZoomWarning:function(){var t=this.isMacintosh(),e=this.isWindows();i(".J-zoomWarning").is(":visible")||(i(".J-zoomWarning").length?i(".J-zoomWarning").fadeIn():i(document.body).append(o.tmpl(r,{isMacintosh:t,isWindows:e})),i(".J-ignoreZoomWarning").off().on("click",function(){window.localStorage&&(window.localStorage.ignoreZoomWarning=1),i(".J-zoomWarning").hide()}),i(".J-closeZoomWarning").off().on("click",function(){i(".J-zoomWarning").hide()}))},bindEvents:function(){var t=this;i(window).off("resize.zoomDetector").on("resize.zoomDetector",a.throttle(function(){t.check()},200))}}});