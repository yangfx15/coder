二面

自我介绍

Q：换工作为啥这么频繁？

A：



场景设计

Q：有 A、B、C 三个翻译供应商，我们需要采购，可能采购多个。从技术角度出发对供应商的选择进行评估，可以从哪些维度考虑。

A：供应商的系统稳定性（响应时间、可用性），和自身系统的技术栈兼容性，中间件选择（比如Redis、MySQL），供应商的架构，技术的新旧，用了多久，供应商的性价比等等

Q：根据技术评估，接入其中两家供应商作为翻译服务（比如在不同场景下，翻译效果供应商各有优劣），如果让你设计服务的大概框架或架构，你怎么做

A：web端 -> 网关层 -> 业务层 -> 供应商调用 -> 中间件

Q：服务本身的架构如何设计（分层？）

A：

Q：从 0 到 1 的架构搭建，你会怎么考虑？

A：

代码考察

Q：任务之间调度，相互可能有依赖，判断是否有循环依赖的问题。LeetCode 课程表

A：

算法与数据结构

Q：一副扑克牌（54张）随意抽取 5 张，组成顺子的概率

A：

多线程

Q：变量 a 的初始值是 0，用 2 个线程对其增加 10 次，问 a 最终的最大值和最小值分别为多少？假设两个线程都可以运行完成

A：20次

反问环节

Q：有什么问题吗？



A：富途海外和国内版的登录业务

Q：从 10 亿数据中找出最大的 10 个数，如何寻找

A：分治+堆（小顶堆）

Q：两份海量数据，都是 32 位的整数，如何求它们的交集

A：HashMap 或位图实现



**金融业务，后端高级Go开发**

一面

代码考察

Q：某地区电费根据用电度数来计算，区间为：

0-10度，5块；

11-20度，4块；

21-50度，3块；

51-200度，2块；

大于 201度，1块。

写一个函数，计算一个月共计缴费多少元，并给出基本测试用例。

A：

Q：两个数组 A=[1,2,2]，B=[1,2,2,3]，元素可能重复，判断 A 是否是 B 的子集，要求空间复杂度为 O(1)。

A：双指针

SQL 考察

Q：两张表

user: user_id, user_name

order: order_id, user_id

写一个 SQL，查询订单数 TOP10 的用户名称和订单数。

``` mysql
select u.user_name, t.cot from user u join (
	select user_id, count(order_id) cot from order
    group by user_id 
    order by count(order_id) desc 
    limit 10
) t on u.user_id = t.user_id
```

Q：订单表的量较大，单独查询时为什么分页很深时效率比较低？如何优化？

A：

Q：业务增长的过程中，订单表的数据量急剧增大，如何分库分表，使得我们不停机就可以进行数据迁移。

A：双倍扩容，主从备份。

Q：分表的操作很多情况下会伴随着分库，如何将单表的数据拆分到多个库下的多张表。

A：

Q：MySQL 索引为什么用 B+树

A：

Q：限流问题：5 分钟内订单不能超过 10 次

A：时间窗口，300 大小数组每一秒记录当前秒用户的发帖次数，时间窗口往后移动的时候，判断当前用户的请求次数。

Q：假设不允许拆细，一秒内的请求可能还会超过

A：令牌桶实现？（不行）

Q：如何控制令牌放入的速度？

A：可以记录每个订单（用户、时间），将订单数量作为滑动窗口的  key？（实现一下）

Q：实现一个五子棋的机器下棋策略，你会怎么实现

A：五子棋的棋手得分方式



二面

自我介绍

Q：工作中最有难度的事情，为什么？

A：重构？

Q：重构中有没有重新划分模块的事情，系统层面？

A：无，主要是系统内部的分层和对象的重构

Q：分层难度体现在哪里？

A：

Q：系统会对外暴露哪些方法？

A：CRUD，存在，批量操作，上报会话数据

技术栈考察

Q：Go 里面传值和传指针的区别

Q：Interface 和 Struct 的使用，区别？

Q：Slice 底层数据结构

Q：Slice 的扩容机制

网络

Q：介绍一下 TCP 的 TIME_WAIT 状态

A：挥手过程中

Q：服务中有出现过大量 TIME_WAIT 的情况吗

A：泛红攻击？

Q：调用第三方服务（其它系统或者外部系统）时，如何设置超时时间，你有什么经验或原则吗？同步请求

A：根据业务来看吧，超时重试？

Q：哪些情况要重试，哪些不需要

A：例如 MySQL 可能就记录下来，其它系统就 1/2/4 秒超时重试，业务告警

Q：平时工作中有遇到网络相关的问题吗

A：TCP 粘包拆包



MySQL 考察

Q：MySQL 的 Char 和 VarChar 区别

A：

Q：两者存储的最长长度

A：不知

Q：两者底层实现的机制有什么不同？

A：不知

Q：字符串建索引，需要注意什么，比如 Varchar 字段

A：不重复度，最左匹配

Q：查一张表的总数，select count(*) 在 InnoDB 存储引擎下有什么问题

A：全表扫描

Q：MyIasm 内置总数，存储当前数据表的条数，为什么 InnoDB 不这么做，而要全表扫描，看上去很不合理？

A：InnoDB 支持行级锁，count(*) 需要表级锁

SQL 查询

Q：联合索引 [A, B]，以下两条 SQL：

1. select A from t where A = ? order by B

2. select A from t where B = ? order by A

使用索引的情况怎样的，会使用索引吗

A：第 1 条会用到 [A, B]，第 2 条不会用到索引，最左匹配原则。

Q：使用 MySQL 过程中有哪些印象深刻的情况

A：连接未释放，忘记关闭 rs.Close() 产生 BUG

Q：为什么 Kafka 效率很高



软件工程能力考察

Q：作为研发，你有哪些方式去保证质量

A：测试驱动，系统可用，限流降级熔断，数据安全（HTTPs加密，数据加密），分布式集群，主从部署，上线时灰度测试等



代码考察

Q：已知两个城市 A、B 分别有 40 万和 60 万人口，两个城市每天会产生 100 万通电话，问：其中跨城市打的电话有多少？

A：概率题，跨城市打电话有有两种情况：A to B，B to A，所以概率为 0.4 x 0.6 + 0.6 x 0.4 = 0.48.



代码考察

Q：不借助任何库函数，写一个函数实现字符串反转，要求只能原地反转【如：arr[i], arr[j] = arr[j], arr[i]】。例：I.am.a.student ==> student.a.am.I

A：实现思路，先整体反转，再反转每个单词，Go 代码如下

``` go
func reverseString(s string) string {
	bts := []byte(s)
	for i, j := 0, len(bts)-1; i < j; i, j = i+1, j-1 {
		bts[i], bts[j] = bts[j], bts[i]
	}
	// 反转每一个单词
	start := 0
	for i := 0; i < len(bts)-1; i++ {
		if bts[i] == '.' {
			for k, j := start, i-1; k < j; k, j = k+1, j-1 {
				bts[k], bts[j] = bts[j], bts[k]
			}
			start = i + 1
		}
	}
	if start != 0 {
		for end := len(bts) - 1; start < end; start, end = start+1, end-1 {
			bts[start], bts[end] = bts[end], bts[start]
		}
	}
	return string(bts)
}
```

