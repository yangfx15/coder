目录

> 1. 背景
> 2. 一面
> 3. 二面
> 4. 三面
> 5. 小结



## 1. 背景

### 1.1 个人情况

本科毕业，后端开发 4 年，Go 语言练习时长两年半。喜欢唱跳、Rap、篮球等。

主要编程语言是 Go 和 Java，工作中涉及的技术栈有 MySQL、Oracle、Redis、RabbitMQ、Kafka、SpringBoot、设计模式、网络、微服务、分布式等。

面试目的：寻找几个经验丰富的面试官，看看自己的水平，也了解下市场情况。



### 1.2 面试岗位

这次面的是后端高级开发工程师（Golang），岗位信息如下。

职位诱惑：

1. 互联网行业，看能力可给出高于同行的待遇，平均 15 薪及以上；
2. 核心岗位，发展空间巨大；
3. 同事氛围欢乐+节日定制礼物+各种员工娱乐协会+种类多多假期；

岗位职责：

1. 负责互联网社区特性和运营平台的设计和开发；
2. 配合公司战略，完成公司和部门 OKR 任务；
3. 跟进行业前沿技术，持续进行技术建设；

任职要求:

1. 本科及以上学历，拥有2年以上 Golang 语言编程开发经验；
2. 熟悉 Linux 的常用命令，有基本的 shell 脚本编写能力；
3. 熟练掌握 Go 语言基础，熟悉网络编程接口，熟悉 TCP/IP、UDP 协议，对网络通信编程模型有较深刻的理解；
4. 熟练掌握常用设计模式，熟练掌握面向对象程序设计方法，具有一定设计能力；
5. 熟练使用 MySQL，良好的数据库设计和丰富的优化经验；
6. 熟悉 NoSQL 技术（Redis，Memcached等）；
7. 良好的技术架构能力和项目经验，善于发现技术问题和提出解决方案；
8. 有较强的学习能力，有良好沟通能力以及团队协作精神，能够承担工作压力。

从上不难看出，岗位和福利待遇等信息写的很全，这样的候选公司和 HR 都挺加分的。



## 2. 技术一面

**1）自我介绍&过往经历**

由于是在职状态，所以面试都是晚上面的，一面约在了晚上 7 点。

面试官可能在家里，就没有开摄像头，和我说明了一下（这点很加分，希望候选公司的面试官都这样礼貌，否则会降低被面试通过的概率）。

候选公司的面试官：你好，可以开始了吗？我是 xx 公司的面试官，这次面试的内容主要是技术栈考察和一些编程题，你可以先做个自我介绍吗？

自我介绍：嗯，好的。然后大概说一下自己的毕业学校，专业，时间，项目，擅长技能，大约 3 分钟。

> PS：候选公司的面试官尽量开摄像头，如果实在不能开的，最好说明一下。面试开始时可以先做个自我介绍，也会比较加分，即使是简单的说明。
>
> 以下为节省问答字数，候选公司的面试官和人选回答采用一问一答的形式，Q&A信息尽量简短。



Q：项目 1 的细节，做了哪些优化（自我介绍时说做了系统优化）

A：MySQL 性能调优，分库分表 等，八股文备好：<a href="https://mp.weixin.qq.com/s?__biz=MzI5Nzk2MDgwNg==&mid=2247484042&idx=1&sn=1620b3df43419745708f6f4c60a9ad9a&chksm=ecac5683dbdbdf95197214ec82fe119ce0bc64c95b6806a8124a381f2c01131d41d6678b87e6&token=443585135&lang=zh_CN#rd">MySQL 总结</a>

Q：项目 2 的具体职责，为什么换工作？

A：项目 2 的背景是...，给用户提供什么价值，我负责了哪些模块，具体职责是什么，有什么效果或者贡献，最终结果...

换工作的原因是，目前所在业务已经趋于稳定，想要更多成长机会，贵公司这块技术和文化比较吸引我...，其它随便扯，突出一个字：夸！夸对方 NB，顺便准备下为什么跳槽频繁的话术，是因为个人发展，工作地域问题？还是说有技术追求，想学习更多业务和技术场景？总之不能说一些敏感原因，比如 “事多钱少，领导傻 吊” 等等。

> 虽然不打算换工作，但在面试前也需要考虑好自己的跳槽原因，让面试官知道你是 “有备而来”，否则就只能 “耗子尾汁”。



**2）编程语言Go知识点考察**

Q：Go 语言里面 make 和 new 的区别？

A：make 和 new 是 Go 语言的两个重要关键字，它们区别如下：

* make 只能用来分配及初始化类型为 slice、map 以及 chan 的数据；new 可以分配任意类型的数据；
* new 分配返回的是指针，即类型 *Type；make 返回引用，即 Type；
* new 分配的空间被清零，而 make 分配空间后，会进行初始化。

Q：介绍一下 Goroutine 的调度模型

A：看这篇文章，<a href="https://mp.weixin.qq.com/s?__biz=MzI5Nzk2MDgwNg==&mid=2247484182&idx=1&sn=6d3f54eea5622a2d7f6323cbb553fdd8&chksm=ecac571fdbdbde09cc8beb982e5df0caafdf5c87587cd3fbd69ca86c33724e9368ab957beac3&token=443585135&lang=zh_CN#rd">GPM调度</a>

Q：读写一个已经关闭的 chan，会发生什么

A：会产生 panic，这道题考察 chan 的基本使用，需了解 chan 产生 panic 的三种情况：

* 对空 Chan 进行 Close
* 对已经 Close 的 Chan 再次 Close
* 对已经 Close 的 Chan 发送数据

Q：切片的底层结构

A：切片是一个长度可变的数组，其数据结构定义如下：

```go
type slice struct {
	array unsafe.Pointer
	len   int
	cap   int
}
```

其中，pointer 是一个指向数组的指针，len 代表当前切片的长度，cap 是当前切片的容量，并且 cap>=len.



**3）操作系统&计算机组成原理考察**

Q：为什么进程切换的开销比线程切换的开销要大

A：进程是资源分配的基本单位，进程切换时会涉及到堆区内存的刷新，页表全局目录的更换，以及虚拟地址空间的切换；而线程本质上只是一批共享资源的进程，因此一个进程的所有线程会共享虚拟地址空间，可以**节省虚拟地址空间的切换**。并且，在存储内存上下文时，线程只需要保存**寄存器和程序计数器**的数据即可。

> 如果还不了解进程和线程的区别，看这篇文章：<a href="https://mp.weixin.qq.com/s?__biz=MzI5Nzk2MDgwNg==&mid=2247484182&idx=1&sn=6d3f54eea5622a2d7f6323cbb553fdd8&chksm=ecac571fdbdbde09cc8beb982e5df0caafdf5c87587cd3fbd69ca86c33724e9368ab957beac3&token=443585135&lang=zh_CN#rd">GPM调度</a>



Q：用户空间和内核空间有什么区别

A：内核空间的操作系统内核访问的区域，是受保护的内存空间；而用户空间是普通应用程序都可访问的内存区域，相当于 VIP 头等舱和经济舱的区别。

早期操作系统不分内核与用户空间，这样一来，应用程序（比如我们自己随便写个脚本）就能访问任意的内存空间，会带来一些安全隐患：比如你写了个 for 循环可能就会把整台服务器的内存磁盘耗尽！



Q：Linux 下 send 和 sendFile 两个数据传递方法的区别

A：这是 Linux 系统下的网络 IO 问题。其中，send 采用基于数据拷贝的传统标准 IO 方式，当客户端进行数据传输时需要调用如下函数：

``` java
buffer = File.read;
Socket.send(buffer)
```

函数调用时，计算机共需四步操作：

1. 从磁盘读数据到内核空间；
2. 将内核空间拷贝数据到用户空间；
3. 将用户空间的内存数据拷贝到内核空间；



参考：https://juejin.cn/post/7016498891365302302



中间件原理考察

Q：什么是幻读，什么情况下会出现，如何解决

A：隔离级别

Q：Redis 如何做分布式锁

Q：为什么 Kafka 效率很高



计算机网络知识点考察

Q：介绍一下 TCP 的滑动窗口

Q：介绍一下 HTTPs

Q：浏览器上有很多不明身份的证书，如果我们点了信任，会有什么风险？

Q：对称加密和非对称加密



分布式考察

Q：Raft 协议了解吗，介绍一下



算法与数据结构考察

Q：从 10 亿数据中找出最大的 10 个数，如何寻找

A：分治+堆（小顶堆）

Q：两份海量数据，都是 32 位的整数，如何求它们的交集

A：HashMap 或位图实现



Q：快速排序的时间复杂度是多少

A：O(nlogn) ~ O(n^2)

Q：什么情况下时间复杂度最差

A：每次排序时都需要交换所有元素

Q：二分查找的时间复杂度

A：O(logn)



代码考察

Q：查找列表中一个数是否存在，如果存在就返回其下标，不存在就返回 -1，用二分查找实现。

A：

Q：给一个数组，把数组的元素打乱一下，每个元素出现的位置完全随机（每个位置出现的概率完全相等）。要求空间复杂度为 O(1)，时间复杂度为  O(n).

比如：[1, 2, 3, 4, 5] ==> [2, 4, 1, 5, 3]，每个位置的概率一样。

A：

``` go
func randSort(arr []int) {
    n := len(arr)
    for i:=0; i<n; i++ {
        rd := i+rand.Intn(n-i)
        arr[i], arr[rd] = arr[rd], arr[i]
    }
}
```



Q：给定一个单向链表，判断链表里是否有环

A：LeetCode原题-环形链表



二面

自我介绍

Q：换工作为啥这么频繁？

A：



场景设计

Q：有 A、B、C 三个翻译供应商，我们需要采购，可能采购多个。从技术角度出发对供应商的选择进行评估，可以从哪些维度考虑。

A：供应商的系统稳定性（响应时间、可用性），和自身系统的技术栈兼容性，中间件选择（比如Redis、MySQL），供应商的架构，技术的新旧，用了多久，供应商的性价比等等

Q：根据技术评估，接入其中两家供应商作为翻译服务（比如在不同场景下，翻译效果供应商各有优劣），如果让你设计服务的大概框架或架构，你怎么做

A：web端 -> 网关层 -> 业务层 -> 供应商调用 -> 中间件

Q：服务本身的架构如何设计（分层？）

A：

Q：从 0 到 1 的架构搭建，你会怎么考虑？

A：

代码考察

Q：任务之间调度，相互可能有依赖，判断是否有循环依赖的问题。LeetCode 课程表

A：

算法与数据结构

Q：一副扑克牌（54张）随意抽取 5 张，组成顺子的概率

A：

多线程

Q：变量 a 的初始值是 0，用 2 个线程对其增加 10 次，问 a 最终的最大值和最小值分别为多少？假设两个线程都可以运行完成

A：20次

反问环节

Q：有什么问题吗？

A：富途海外和国内版的登录业务



**金融业务，后端高级Go开发**

一面

代码考察

Q：某地区电费根据用电度数来计算，区间为：

0-10度，5块；

11-20度，4块；

21-50度，3块；

51-200度，2块；

大于 201度，1块。

写一个函数，计算一个月共计缴费多少元，并给出基本测试用例。

A：

Q：两个数组 A=[1,2,2]，B=[1,2,2,3]，元素可能重复，判断 A 是否是 B 的子集，要求空间复杂度为 O(1)。

A：双指针

SQL 考察

Q：两张表

user: user_id, user_name

order: order_id, user_id

写一个 SQL，查询订单数 TOP10 的用户名称和订单数。

``` mysql
select u.user_name, t.cot from user u join (
	select user_id, count(order_id) cot from order
    group by user_id 
    order by count(order_id) desc 
    limit 10
) t on u.user_id = t.user_id
```

Q：订单表的量较大，单独查询时为什么分页很深时效率比较低？如何优化？

A：

Q：业务增长的过程中，订单表的数据量急剧增大，如何分库分表，使得我们不停机就可以进行数据迁移。

A：双倍扩容，主从备份。

Q：分表的操作很多情况下会伴随着分库，如何将单表的数据拆分到多个库下的多张表。

A：

Q：MySQL 索引为什么用 B+树

A：

Q：限流问题：5 分钟内订单不能超过 10 次

A：时间窗口，300 大小数组每一秒记录当前秒用户的发帖次数，时间窗口往后移动的时候，判断当前用户的请求次数。

Q：假设不允许拆细，一秒内的请求可能还会超过

A：令牌桶实现？（不行）

Q：如何控制令牌放入的速度？

A：可以记录每个订单（用户、时间），将订单数量作为滑动窗口的  key？（实现一下）

Q：实现一个五子棋的机器下棋策略，你会怎么实现

A：五子棋的棋手得分方式



二面

自我介绍

Q：工作中最有难度的事情，为什么？

A：重构？

Q：重构中有没有重新划分模块的事情，系统层面？

A：无，主要是系统内部的分层和对象的重构

Q：分层难度体现在哪里？

A：

Q：系统会对外暴露哪些方法？

A：CRUD，存在，批量操作，上报会话数据

技术栈考察

Q：Go 里面传值和传指针的区别

Q：Interface 和 Struct 的使用，区别？

Q：Slice 底层数据结构

Q：Slice 的扩容机制

网络

Q：介绍一下 TCP 的 TIME_WAIT 状态

A：挥手过程中

Q：服务中有出现过大量 TIME_WAIT 的情况吗

A：泛红攻击？

Q：调用第三方服务（其它系统或者外部系统）时，如何设置超时时间，你有什么经验或原则吗？同步请求

A：根据业务来看吧，超时重试？

Q：哪些情况要重试，哪些不需要

A：例如 MySQL 可能就记录下来，其它系统就 1/2/4 秒超时重试，业务告警

Q：平时工作中有遇到网络相关的问题吗

A：TCP 粘包拆包



MySQL 考察

Q：MySQL 的 Char 和 VarChar 区别

A：

Q：两者存储的最长长度

A：不知

Q：两者底层实现的机制有什么不同？

A：不知

Q：字符串建索引，需要注意什么，比如 Varchar 字段

A：不重复度，最左匹配

Q：查一张表的总数，select count(*) 在 InnoDB 存储引擎下有什么问题

A：全表扫描

Q：MyIasm 内置总数，存储当前数据表的条数，为什么 InnoDB 不这么做，而要全表扫描，看上去很不合理？

A：InnoDB 支持行级锁，count(*) 需要表级锁

SQL 查询

Q：联合索引 [A, B]，以下两条 SQL：

1. select A from t where A = ? order by B

2. select A from t where B = ? order by A

使用索引的情况怎样的，会使用索引吗

A：第 1 条会用到 [A, B]，第 2 条不会用到索引，最左匹配原则。

Q：使用 MySQL 过程中有哪些印象深刻的情况

A：连接未释放，忘记关闭 rs.Close() 产生 BUG



软件工程能力考察

Q：作为研发，你有哪些方式去保证质量

A：测试驱动，系统可用，限流降级熔断，数据安全（HTTPs加密，数据加密），分布式集群，主从部署，上线时灰度测试等



代码考察

Q：已知两个城市 A、B 分别有 40 万和 60 万人口，两个城市每天会产生 100 万通电话，问：其中跨城市打的电话有多少？

A：概率题，跨城市打电话有有两种情况：A to B，B to A，所以概率为 0.4 x 0.6 + 0.6 x 0.4 = 0.48.



代码考察

Q：不借助任何库函数，写一个函数实现字符串反转，要求只能原地反转【如：arr[i], arr[j] = arr[j], arr[i]】。例：I.am.a.student ==> student.a.am.I

A：实现思路，先整体反转，再反转每个单词，Go 代码如下

``` go
func reverseString(s string) string {
	bts := []byte(s)
	for i, j := 0, len(bts)-1; i < j; i, j = i+1, j-1 {
		bts[i], bts[j] = bts[j], bts[i]
	}
	// 反转每一个单词
	start := 0
	for i := 0; i < len(bts)-1; i++ {
		if bts[i] == '.' {
			for k, j := start, i-1; k < j; k, j = k+1, j-1 {
				bts[k], bts[j] = bts[j], bts[k]
			}
			start = i + 1
		}
	}
	if start != 0 {
		for end := len(bts) - 1; start < end; start, end = start+1, end-1 {
			bts[start], bts[end] = bts[end], bts[start]
		}
	}
	return string(bts)
}
```

